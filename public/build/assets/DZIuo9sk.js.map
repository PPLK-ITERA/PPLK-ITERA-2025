{"version":3,"file":"DZIuo9sk.js","sources":["../../../resources/js/Pages/Mading/PengumpulanCover/Page.tsx"],"sourcesContent":["import { set } from \"date-fns\";\nimport { useDebouncedCallback } from \"use-debounce\";\n\nimport React, { useEffect, useState } from \"react\";\n\nimport { Link, router, useForm } from \"@inertiajs/react\";\n\nimport { ChevronLeft } from \"lucide-react\";\n\nimport DefaultLayout from \"@/Layouts/DefaultLayout\";\n\nimport MaxWidthWrapper from \"@/Components/MaxWidthWrapper\";\nimport { Button, buttonVariants } from \"@/Components/ui/button\";\nimport { Input } from \"@/Components/ui/input\";\nimport { Label } from \"@/Components/ui/label\";\n\nimport { CardType } from \"@/lib/types/Mading\";\n\nconst ketentuanUploadCover = [\n    \"Kreativitas dan Daya Tarik Visual: Pilih gambar yang unik dan menarik perhatian pembaca. Gunakan desain yang kreatif dan harmonis untuk menciptakan tampilan yang memikat.\",\n    \"Kualitas dan Resolusi Gambar: Pastikan gambar yang diunggah memiliki resolusi tinggi agar tetap jelas dan tajam saat ditampilkan.\",\n    \"Kesesuaian Tema: Sesuaikan desain cover dengan tema atau topik mading. Hal ini membantu menyampaikan pesan yang ingin disampaikan dengan lebih efektif.\",\n    \"Keseimbangan Warna: Gunakan kombinasi warna yang sesuai dan tidak terlalu kontras agar tampilan lebih nyaman dilihat.\",\n    \"Keterbacaan Teks: Jika terdapat teks pada cover, pastikan font yang digunakan mudah dibaca dan tidak terlalu kecil.\",\n    \"Gambar yang Senonoh dan Tidak Menyinggung: Pastikan gambar yang diunggah tidak mengandung unsur SARA, pornografi, atau hal-hal yang dapat menyinggung orang lain.\",\n];\n\nexport default function Page({ id }) {\n    const [tugasData, setTugasData] = useState<CardType | null>(null);\n    const [urlError, setUrlError] = useState<string | null>(null);\n    const [csrfToken, setCsrfToken] = useState(\"\");\n    const [tugasId, setTugasId] = useState(0);\n    const [isSubmitted, setIsSubmitted] = useState(false);\n\n    const {\n        data: formData,\n        setData: setFormData,\n        post,\n        put,\n        processing,\n        errors,\n    } = useForm({\n        tugas_id: 0,\n        url: \"\",\n    });\n\n    const getTugasData = async () => {\n        try {\n            const response = await fetch(route(\"mading.tugas\", { id }), {\n                method: \"GET\",\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                },\n            });\n\n            if (!response.ok) {\n                throw new Error(\"HTTP status \" + response.status);\n            }\n\n            const data = await response.json();\n            setTugasData(data.tugas);\n            setIsSubmitted(data.isSubmitted);\n            console.log(\"tugasData\", tugasData);\n        } catch (error) {\n            console.log(\"Error: \", error);\n        }\n    };\n\n    useEffect(() => {\n        getTugasData();\n\n        const fetchCsrfToken = async () => {\n            try {\n                const response = await fetch(route(\"csrf\"));\n                const data = await response.json();\n                setCsrfToken(data.csrfToken);\n            } catch (error) {\n                console.error(\"Error fetching CSRF token:\", error);\n            }\n        };\n\n        fetchCsrfToken();\n    }, []);\n\n    const validateUrl = useDebouncedCallback(async () => {\n        if (!/^https:\\/\\/(www\\.)?\\w+\\.google\\.com\\/.*$/g.test(formData.url)) {\n            setUrlError(\"link harus dari Google Drive\");\n            return;\n        }\n\n        let id = formData.url.split(\"/\")[5];\n\n        let response = await fetch(\n            `https://www.googleapis.com/drive/v2/files/${id}?key=${import.meta.env.VITE_GOOGLE_API_KEY}`,\n        );\n\n        if (!response.ok) {\n            setUrlError(\"Link drive belum publik, silahkan coba lagi\");\n            return;\n        }\n\n        setUrlError(\"\");\n    }, 100);\n\n    const handleSubmit = async () => {\n        try {\n            const response = await fetch(route(\"mading.store\"), {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                    \"X-CSRF-TOKEN\": csrfToken,\n                },\n                body: JSON.stringify({\n                    tugas_id: tugasId,\n                    jawaban: formData.url,\n                }),\n            });\n\n            if (!response.ok) {\n                throw new Error(\"HTTP status \" + response.status);\n            }\n\n            router.replace(route(\"mading\"));\n        } catch (error) {\n            console.log(\"Error: \", error);\n        }\n    };\n\n    return (\n        <>\n            <DefaultLayout isSolid={true}>\n                <div className=\"bg-pattern-white pt-28\">\n                    <MaxWidthWrapper className=\"min-h-screen\">\n                        <div className=\"px-2.5 bg-white/80 py-5 rounded-md md:px-5 lg:px-10\">\n                            <Link\n                                href={route(\"mading\")}\n                                className={`${buttonVariants({ variant: \"outline\" })} bg-transparent hover:bg-transparent shadow-none items-center border-none flex gap-2 -ml-5`}\n                            >\n                                <ChevronLeft />\n                                <span>Kembali</span>\n                            </Link>\n\n                            <h2\n                                data-aos=\"fade-down\"\n                                data-aos-duration=\"1000\"\n                                className=\"font-montserrat font-bold text-jaffa-700 w-fit pt-[30px] text-3xl\"\n                            >\n                                Pengumpulan Cover Day - {id}\n                            </h2>\n\n                            <div className=\"md:mt-10 mt-5\">\n                                <h2 className=\"text-jaffa-700 text-xl font-bold\">\n                                    Ketentuan Cover Mading\n                                </h2>\n\n                                <div className=\"mt-5\">\n                                    {ketentuanUploadCover.map(\n                                        (ketentuan, index) => (\n                                            <div\n                                                key={index}\n                                                className=\"flex gap-2\"\n                                            >\n                                                <p>{index + 1}.</p>\n                                                <p>{ketentuan}</p>\n                                            </div>\n                                        ),\n                                    )}\n                                </div>\n\n                                <Button className=\"bg-jaffa-700 hover:bg-jaffa-700/90 mt-5 transition duration-200\">\n                                    Contoh cover yang sesuai\n                                </Button>\n                            </div>\n\n                            <div className=\"flex flex-col mt-10\">\n                                {tugasData?.tugas.map((tugas, index) => (\n                                    <div className=\"flex flex-col\" key={index}>\n                                        <Label\n                                            htmlFor=\"input-tugas\"\n                                            className=\"text-left\"\n                                        >\n                                            Link Google Drive\n                                        </Label>\n\n                                        <Input\n                                            type=\"text\"\n                                            id=\"input-tugas\"\n                                            value={formData.url}\n                                            onChange={(e) => {\n                                                setFormData(\n                                                    \"url\",\n                                                    e.target.value,\n                                                );\n                                                validateUrl();\n                                                setTugasId(tugas.id);\n                                            }}\n                                            placeholder={\n                                                \"https://drive.google.com/...\"\n                                            }\n                                            className=\"mt-2\"\n                                        />\n                                        {!!urlError ? (\n                                            <span className=\"text-red-500 text-[12px]\">\n                                                {urlError}\n                                            </span>\n                                        ) : urlError === \"\" ? (\n                                            <span className=\"text-[12px] text-green-500\">\n                                                Link valid\n                                            </span>\n                                        ) : null}\n                                    </div>\n                                ))}\n                            </div>\n\n                            <div className=\"mt-5\">\n                                <Label className=\" text-left\">Preview</Label>\n                                <div className=\"aspect-video bg-red-500 rounded-md\"></div>\n                            </div>\n\n                            <Button\n                                onClick={handleSubmit}\n                                disabled={!!urlError || !formData.url}\n                                className=\"bg-jaffa-700 hover:bg-jaffa-700/90 w-full mt-5 transition duration-200 ease-in-out\"\n                            >\n                                Submit Cover {id}\n                            </Button>\n                        </div>\n                    </MaxWidthWrapper>\n                </div>\n            </DefaultLayout>\n        </>\n    );\n}\n"],"names":["ketentuanUploadCover","Page","id","tugasData","setTugasData","useState","urlError","setUrlError","csrfToken","setCsrfToken","tugasId","setTugasId","isSubmitted","setIsSubmitted","data","formData","setData","setFormData","post","put","processing","errors","useForm","tugas_id","url","useEffect","async","response","fetch","route","method","headers","ok","Error","status","json","tugas","console","log","error","validateUrl","useDebouncedCallback","test","split","children","jsx","DefaultLayout","isSolid","className","jsxRuntimeExports","MaxWidthWrapper","jsxs","Link","href","buttonVariants","variant","ChevronLeft","map","ketentuan","index","Button","Label","htmlFor","Input","type","value","onChange","e","target","placeholder","onClick","body","JSON","stringify","jawaban","yt","replace","disabled"],"mappings":"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"}