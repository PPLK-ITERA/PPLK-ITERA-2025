import{W as a,r as e,j as s,Y as i}from"./BY-GGcvP.js";import{B as l,C as t}from"./CCN3ZvQB.js";import{D as r}from"./ChL44kMr.js";import{B as n,b as d}from"./f1uPbqpn.js";import{I as o}from"./CtFxohYU.js";import{L as c}from"./Dh3FlciD.js";import{S as u,a as m,b as h,c as j,f as p,d as g,e as x}from"./Cxtqkufj.js";import{t as k}from"./CRjfKT3B.js";import{T as f}from"./BV2G3g2m.js";import{D as v,f as N,a as T,b,c as w,d as _,g as y,e as S}from"./C_sxBxTN.js";import{D as C}from"./B5JIVpkM.js";import{S as E}from"./DMx1I8r_.js";import{P as A,a as K,b as P,C as D,c as F,d as I,e as L,f as O}from"./CDukSIMX.js";import{S as R,a as B}from"./d3ujqimi.js";import{T as G}from"./B6B-TmYA.js";import{u as J}from"./Dtq8WJaY.js";import{a as M}from"./CO0I9pYX.js";import{I as q}from"./D5RHTICF.js";import{C as V}from"./CNyTlPDr.js";import"./Sc4NIWF5.js";import"./BtYB3mo9.js";import"./CiCbmGtf.js";import"./C2eNwYJO.js";import"./SqnfmvaP.js";import"./3-sYBDTW.js";import"./C0u18CNn.js";import"./D_AcAKQ4.js";import"./Dja-iDAc.js";import"./BtZUX1YK.js";import"./C029mEWk.js";import"./DsAk238T.js";import"./D4zKOKqO.js";import"./CA54yuu4.js";import"./DPdBf6DS.js";function z(){const{data:i,setData:l,post:t,processing:r,errors:d}=a({judul:"",deskripsi:"",hari:"",tipe_link:"",kategori:"",deadline:""}),[g,x]=e.useState(null);return s.jsxs("form",{"aria-describedby":"form",className:"grid gap-4 py-4",onSubmit:a=>{a.preventDefault(),k({title:"Mohon tunggu sebentar...",description:"Sedang mengupload Tugas..."}),t(route("dashboard.tugas.addTugas"),{onError:()=>{k({title:"Uh oh! Gagal mengupload Tugas.",description:d.judul||d.deskripsi||d.hari||d.tipe_link||d.kategori||d.deadline})},onSuccess:()=>{k({title:"Berhasil!",description:"Tugas berhasil diupload."})}}),window.location.reload()},children:[s.jsxs("div",{className:"grid items-center grid-cols-4 gap-4",children:[s.jsx(c,{htmlFor:"judul",className:"text-right",children:"Judul"}),s.jsx(o,{id:"judul",name:"judul",required:!0,type:"text",value:i.judul,maxLength:255,className:"col-span-3",onChange:a=>{l("judul",a.target.value),validateJudul()}})]}),s.jsxs("div",{className:"grid items-center grid-cols-4 gap-4",children:[s.jsx(c,{htmlFor:"deskripsi",className:"text-right",children:"Deskripsi"}),s.jsx(f,{id:"deskripsi",name:"deskripsi",required:!0,type:"text",value:i.deskripsi,maxLength:255,className:"col-span-3",onChange:a=>l("deskripsi",a.target.value)})]}),s.jsxs("div",{className:"grid items-center grid-cols-4 gap-4",children:[s.jsx(c,{htmlFor:"hari",className:"text-right",children:"Hari"}),s.jsxs(u,{value:i.hari,onValueChange:a=>l("hari",a),children:[s.jsx(m,{className:"col-span-3",id:"hari",name:"hari",required:!0,children:s.jsx(h,{placeholder:"Pilih hari"})}),s.jsxs(j,{children:[s.jsx(p,{value:"0",children:"0"}),s.jsx(p,{value:"1",children:"1"}),s.jsx(p,{value:"2",children:"2"}),s.jsx(p,{value:"3",children:"3"}),s.jsx(p,{value:"4",children:"4"}),s.jsx(p,{value:"5",children:"5"})]})]})]}),s.jsxs("div",{className:"grid items-center grid-cols-4 gap-4",children:[s.jsx(c,{htmlFor:"tipe_link",className:"text-right",children:"Tipe Link"}),s.jsxs(u,{value:i.tipe_link,onValueChange:a=>l("tipe_link",a),children:[s.jsx(m,{className:"col-span-3",id:"tipe_link",name:"tipe_link",required:!0,children:s.jsx(h,{placeholder:"Pilih tipe link"})}),s.jsxs(j,{children:[s.jsx(p,{value:"instagram",children:"Instagram"}),s.jsx(p,{value:"tiktok",children:"TikTok"}),s.jsx(p,{value:"drive",children:"Google Drive"}),s.jsx(p,{value:"linkedin",children:"LinkedIn"})]})]})]}),s.jsxs("div",{className:"grid items-center grid-cols-4 gap-4",children:[s.jsx(c,{htmlFor:"kategori",className:"text-right",children:"Kategori"}),s.jsxs(u,{value:i.kategori,onValueChange:a=>l("kategori",a),children:[s.jsx(m,{className:"col-span-3",id:"kategori",name:"kategori",required:!0,children:s.jsx(h,{placeholder:"Pilih kategori"})}),s.jsxs(j,{children:[s.jsx(p,{value:"individu",children:"Individu"}),s.jsx(p,{value:"kelompok",children:"Kelompok"})]})]})]}),s.jsxs("div",{className:"grid items-center grid-cols-4 gap-4",children:[s.jsx(c,{htmlFor:"deadline",className:"text-right",children:"Deadline"}),s.jsx(o,{id:"deadline",name:"deadline",required:!0,type:"date",value:i.deadline,className:"col-span-3",onChange:a=>l("deadline",a.target.value),min:(new Date).toISOString().split("T")[0]})]}),s.jsxs("div",{className:"place-content-center flex items-center justify-between gap-4 mt-4 text-right",children:[!!g&&s.jsx("p",{className:"text-sm text-red-500",children:g}),s.jsx(n,{size:"sm",type:"submit",className:"w-full bg-[#BE3F00]",disabled:!!g||r,children:"Tambahkan Tugas"})]})]})}const H=({data:e})=>{const{setData:i,put:l}=a({id:0,catatan:"",_method:"put"});return s.jsx(s.Fragment,{children:s.jsxs("div",{className:"flex gap-1 p-2",children:[s.jsx("a",{href:`${e.tugas.jawaban??"#"}`,className:`${d({size:"sm"})}`,children:"Lihat Tugas"}),s.jsxs(v,{children:[e.tugas.isReturn?null:s.jsx(N,{asChild:!0,children:s.jsx(n,{className:"gap-2",variant:"outline",size:"sm",onClick:()=>i("id",e.tugas.id),children:"Kembalikan Tugas"})}),s.jsxs(T,{className:"sm:max-w-[425px]",children:[s.jsxs(b,{children:[s.jsx(w,{children:"Kembalikan Tugas"}),s.jsx(_,{children:"Kembalikan tugas yang sudah dikerjakan oleh mahasiswa ini agar diperbaiki"})]}),s.jsx("div",{className:"grid gap-4 py-4",children:s.jsxs("div",{className:"flex flex-col",children:[s.jsx(c,{htmlFor:"catatan",className:"text-left",children:"Catatan"}),s.jsx(f,{id:"catatan",onChange:a=>i("catatan",a.target.value),placeholder:"Berikan catatan pengembalian tugas",className:"mt-1"})]})}),s.jsxs(y,{children:[s.jsx(S,{asChild:!0,children:s.jsx(n,{variant:"outline",children:"Batalkan"})}),s.jsx(S,{asChild:!0,children:s.jsx(n,{onClick:()=>{l(route("dashboard.tugas.return"))},children:"Lanjutkan"})})]})]})]})]})})},$=[{id:"no",header:"No",cell:({row:a})=>a.index+1},{id:"name",accessorKey:"user.name",header:"Nama",cell:({row:a})=>a.original.user.name},{id:"judul",accessorKey:"tugas.judul",header:"Nama Tugas",cell:({row:a})=>a.original.tugas.judul},{id:"nama_kelompok",accessorKey:"user.nama_kelompok",header:"Kelompok",cell:({row:a})=>a.original.user.nama_kelompok},{id:"status",accessorKey:"tugas.status",header:"Status",cell:({row:a})=>a.original.status},{id:"catatan",accessorKey:"tugas.catatan",header:"Catatan",cell:({row:a})=>a.original.tugas.catatan},{id:"actions",header:"Aksi",cell:({row:a})=>s.jsx(H,{data:a.original})}],W=({tugas_id:a,no_kelompok:i,status:l})=>{const[t,r]=e.useState({status:l||null,no_kelompok:i||null,tugas_id:a});e.useEffect((()=>{(t.no_kelompok||t.status||t.tugas_id)&&(async()=>{const a=route("dashboard.tugas.data",{no_kelompok:t.no_kelompok??0,status:t.status??0,tugas_id:t.tugas_id});console.log("Fetching data for:",a)})()}),[t]);return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx(n,{onClick:()=>{r({tugas_id:a,no_kelompok:i||null,status:l||null})},children:"Terapkan"}),s.jsx(n,{onClick:()=>{window.location.reload()},variant:"outline",children:"Reset Filter"})]}),s.jsx(E,{}),s.jsx(C,{searchKey:"Nama, Nim, Email",columns:$,apiEndpoint:route("dashboard.tugas.data",{tugas_id:t.tugas_id,no_kelompok:t.no_kelompok??0,status:t.status??0}),title:"Pengumpulan Tugas",description:"Daftar pengumpulan tugas oleh kelompok."})]})},U=[{title:"Ellysion Panel",link:"/dashboard"},{title:"Pengumpulan Tugas",link:"/dashboard/pengumpulan-tugas"}];function X({auth:a,response:d}){var o,k;const f=a.user;J();const[_,y]=e.useState(!1),[S,C]=e.useState(""),[E,H]=e.useState(""),[$,X]=e.useState(""),[Y,Z]=e.useState(""),[Q,aa]=e.useState([]),[ea,sa]=e.useState([]),[ia,la]=e.useState(!1),[ta,ra]=e.useState(null);e.useEffect((()=>{(async()=>{try{const a=await fetch(route("dashboard.user.data.kelompok"),{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);const e=await a.json();aa(e)}catch(a){console.error("Error fetching kelompok data:",a)}})(),(async()=>{var a;la(!0),ra(null);try{const e=await fetch(route("dashboard.tugas.data.judulTugas"),{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}});if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const s=await e.json(),i=(null==(a=s.response)?void 0:a.data)||s.data||s;sa(i),i&&i.length>0&&(H(i[0].id.toString()),X(i[0].id))}catch(e){console.error("Error fetching tugas data:",e),ra("Gagal mengambil data tugas dari server");const a=[{id:1,judul:"DIRETRA"},{id:2,judul:"HARTATERA"},{id:3,judul:"COOLIN"},{id:4,judul:"GARTA MATERA"},{id:5,judul:"PORTAL DILOGI"},{id:6,judul:"REKASITERA"},{id:7,judul:"MOTLET CAKRAWALA"}];sa(a),H(a[0].id.toString()),X(a[0].id)}finally{la(!1)}})()}),[]);const na=a=>{C(a===S?"":a),y(!1)};return s.jsxs(s.Fragment,{children:[s.jsx(i,{title:"Pengumpulan Tugas"}),s.jsxs(r,{user:a.user,children:[s.jsx(l,{items:U}),s.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Pengumpulan Tugas"}),7==f.role_id||3==f.role_id?s.jsx("div",{className:"place-content-start flex w-full",children:s.jsxs(v,{children:[s.jsx(N,{asChild:!0,children:s.jsxs(n,{children:[s.jsx(q,{size:18}),s.jsx("span",{children:"Buat Tugas"})]})}),s.jsxs(T,{children:[s.jsx(b,{children:s.jsx(w,{children:"Buat Tugas"})}),s.jsx(z,{})]})]})}):null,s.jsx("h2",{children:"Filter berdasarkan..."}),ta&&s.jsx("div",{className:"p-4 mb-4 text-red-700 bg-red-100 border border-red-300 rounded",children:ta}),s.jsxs("div",{className:"md:flex-row md:items-center flex flex-col items-start gap-1",children:[s.jsxs("div",{className:"grow w-full",children:[s.jsx(c,{className:"ml-[1px]",children:"Nama Tugas"}),s.jsxs(u,{onValueChange:a=>{H(a),X(parseInt(a))},value:E,disabled:ia,children:[s.jsx(m,{className:"w-full font-bold",children:s.jsx(h,{placeholder:ia?"Memuat...":"Pilih nama tugas"})}),s.jsx(j,{children:s.jsxs(g,{children:[s.jsx(x,{children:"Nama Tugas"}),ea.map((a=>s.jsx(p,{value:a.id.toString(),children:a.judul},a.id)))]})})]})]}),s.jsxs("div",{className:"grow w-full",children:[s.jsx(c,{className:"ml-[1px]",children:"Nama Kelompok"}),s.jsxs(A,{open:_,onOpenChange:y,children:[s.jsx(K,{asChild:!0,children:s.jsxs(n,{variant:"outline",role:"combobox","aria-expanded":_,className:"justify-between w-full font-normal shadow-none",size:"sm",children:[S?(null==(o=Q.find((a=>JSON.stringify(a.id)===S)))?void 0:o.no_kelompok)+" - "+(null==(k=Q.find((a=>JSON.stringify(a.id)===S)))?void 0:k.nama_kelompok):"Pilih Kelompok",s.jsx(t,{className:"shrink-0 w-4 h-4 ml-2 opacity-50"})]})}),s.jsx(P,{children:s.jsxs(D,{children:[s.jsx(F,{placeholder:"Cari Kelompok...",className:"h-9"}),s.jsx(I,{children:"Data kelompok tidak ada."}),s.jsx(L,{children:s.jsxs(R,{className:"h-[calc(50vh-64px)]",children:[Q.length>0?Q.map(((a,e)=>s.jsxs(O,{value:JSON.stringify(a.id),onSelect:na,children:[a.no_kelompok," - ",a.nama_kelompok,s.jsx(V,{className:M("ml-auto h-4 w-4",S===JSON.stringify(a.id)?"opacity-100":"opacity-0")})]},e))):null,s.jsx(B,{orientation:"vertical"})]})})]})})]})]}),s.jsxs("div",{className:"grow w-full",children:[s.jsx(c,{className:"ml-[1px]",children:"Status Pengumpulan"}),s.jsxs(u,{onValueChange:a=>{Z(a)},value:Y,children:[s.jsx(m,{className:"w-full font-bold",children:s.jsx(h,{placeholder:"Pilih status pengumpulan"})}),s.jsx(j,{children:s.jsxs(g,{children:[s.jsx(x,{children:"Status Pengumpulan"}),s.jsx(p,{value:"1",children:"Sudah Mengumpulkan"}),s.jsx(p,{value:"2",children:"Telat Mengumpulkan"}),s.jsx(p,{value:"3",children:"Dikembalikan"}),s.jsx(p,{value:"4",children:"Belum Mengumpulkan"})]})})]})]})]}),s.jsx(W,{tugas_id:"number"==typeof $?$:0,no_kelompok:S?parseInt(JSON.parse(S)):0,status:Y?parseInt(Y):0})]}),s.jsx(G,{})]})}export{X as default};
