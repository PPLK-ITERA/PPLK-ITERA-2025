import{W as s,j as e,y as a,r as i}from"./DqG_jvZq.js";import r from"./BXKBM3iX.js";import{D as n}from"./CtFtZqrz.js";import{A as t,a as l,b as d,c as o,d as c,e as h,f as m,g as j,h as x}from"./DZdIUzmP.js";import{B as p}from"./D8EpR_mp.js";import{D as u,f as g,a as f,b,c as k,d as w,g as y,e as v}from"./zKGVgHNP.js";import{L as N}from"./D-z7qY3_.js";import{T as P}from"./Dn0GELe1.js";import{T as K}from"./CJHU9WGK.js";import{t as L}from"./POyznjw6.js";import{D as z}from"./GHyQjvu2.js";import{S as _}from"./K081oCV9.js";import{B as M}from"./DmFc5DtG.js";import{C as A,b as C,c as D,a as B}from"./DbwlFY_F.js";import{S,a as I,b as H,c as F,d as T,e as E,f as G}from"./DbQM3PRT.js";import{T as V,b as $,c as R,a as U}from"./BRGtGO4t.js";import"./U-U80pLs.js";import"./C4AutZlW.js";import"./DP5z5bPu.js";import"./Djrf8RR7.js";import"./DsQM-G0s.js";import"./xgQHLkAg.js";import"./DfL4xOZn.js";import"./Bvqnwa5P.js";import"./XTxzhHY9.js";import"./Cshwob9e.js";import"./Dw_vvL_O.js";import"./Chi2-jaP.js";import"./C46PLoNX.js";import"./BZtDV8eV.js";import"./C-dGCEgX.js";import"./DWF5FuEh.js";import"./CfLNumT5.js";import"./BVaomOsG.js";import"./BzSvv2ny.js";const W=({data:i})=>{const{data:r,setData:n,get:z,post:_,processing:M,errors:A}=s({id:i.id,kehadiran:"",keterangan:""});return e.jsxs(e.Fragment,{children:[!1===i.action?null:e.jsxs("div",{className:"flex gap-1 p-2",children:[e.jsxs(t,{children:[e.jsx(l,{asChild:!0,children:e.jsx(p,{size:"sm",children:"Absen"})}),e.jsxs(d,{children:[e.jsxs(o,{children:[e.jsxs(c,{children:["Apakah Anda yakin ingin meng-Absen"," ",i.user.name]}),e.jsx(h,{children:"Aksi ini akan mengubah status maba menjadi hadir."})]}),e.jsxs(m,{children:[e.jsx(j,{children:"Cancel"}),e.jsx(x,{onClick:()=>{"Hadir"!==i.user.status?a.post(route("dashboard.presensi.absen"),{...r,kehadiran:"Hadir"},{onSuccess:()=>{L({title:"Berhasil",description:`Berhasil mengabsen ${i.user.name}`}),window.location.reload()}}):L({title:"Gagal",description:`Maba ${i.user.name} sudah hadir`,variant:"destructive"})},children:"Continue"})]})]})]}),"Hadir"!==i.user.status?e.jsxs(u,{children:[e.jsx(g,{asChild:!0,children:e.jsx(p,{className:"gap-2",size:"sm",variant:"outline",children:"Set Izin"})}),e.jsxs(f,{className:"sm:max-w-[425px]",children:[e.jsxs(b,{children:[e.jsxs(k,{children:["Ingin Set Izin ",i.user.name," ?"]}),e.jsx(w,{children:"Isi bagian catatan dan aksi ini akan mengubah status maba menjadi izin"})]}),e.jsx("div",{className:"grid gap-4 py-4",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx(N,{htmlFor:"asnwer",className:"text-left",children:"Catatan"}),e.jsx(P,{id:"asnwer",value:r.keterangan,onChange:s=>n("keterangan",s.target.value),placeholder:"Berikan catatan izin",className:"mt-1"})]})}),e.jsxs(y,{children:[e.jsx(v,{asChild:!0,children:e.jsx(p,{variant:"outline",children:"Batalkan"})}),e.jsx(v,{asChild:!0,children:e.jsx(p,{onClick:()=>{a.post(route("dashboard.presensi.absen"),{...r,kehadiran:"Izin"},{onSuccess:()=>{L({title:"Berhasil",description:`Berhasil mengizinkan ${i.user.name}`}),window.location.reload()}})},children:"Lanjutkan"})})]})]})]}):null]}),e.jsx(K,{})]})},J=[{id:"no",header:"No",cell:({row:s})=>s.original.no},{id:"photo_profile",accessorKey:"user.photo_profile_url",header:"Foto Profil",cell:({row:s})=>e.jsx("img",{className:"h-[120px] w-[300px] object-cover aspect-3/4",src:s.original.user.photo_profile_url,alt:"Foto Profil"})},{id:"name",accessorKey:"user.name",header:"Nama"},{id:"nim",accessorKey:"user.nim",header:"NIM"},{id:"status",accessorKey:"user.status",header:"Status"},{id:"ket_status",accessorKey:"user.ket_izin",header:"Keterangan Izin"},{id:"nama_kelompok",accessorKey:"user.nama_kelompok",header:"Kelompok"},{id:"pita",accessorKey:"user.penyakit.pita",header:"Warna Pita"},{id:"ket_penyakit",accessorKey:"user.penyakit.ket_penyakit",header:"Riwayat Penyakit",cell:({row:s})=>e.jsx("p",{children:s.original.user.penyakit.ket_penyakit})},{id:"tanggal_presensi",accessorKey:"user.tanggal_presensi",header:"Waktu Presensi",cell:({row:s})=>e.jsx("p",{children:s.original.user.tanggal_presensi})},{id:"actions",header:"Aksi",cell:({row:s})=>e.jsx(W,{data:s.original})}],O=({day:s})=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-start justify-between"}),e.jsx(_,{}),e.jsx(z,{searchKey:"name",columns:J,apiEndpoint:route("dashboard.presensi.data",{date:s}),title:"Data Absensi Maba",description:"Gunakan sistem informasi ini untuk manajemen kehadiran maba!"})]}),Q=[{title:"Dashboard",link:"/dashboard"},{title:"Absensi Maba",link:"/dashboard/absensi-maba"}];function q({auth:s,response:a}){const[t,l]=i.useState(0),[d,o]=i.useState(0),[c,h]=i.useState(0),[m,j]=i.useState("2024-08-10"),x=s=>{j(s)},p=async()=>{const s=await fetch(route("dashboard.presensi.count",{date:m}));if(!s.ok)throw new Error("Failed to fetch data");const e=await s.json();l(e.response.data.hadir),o(e.response.data.tidakHadir),h(e.response.data.izin)};return i.useEffect((()=>{p()}),[]),i.useEffect((()=>{p()}),[x]),e.jsxs(n,{user:s.user,children:[e.jsx(M,{items:Q}),e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Absensi Maba"}),e.jsxs(S,{onValueChange:x,defaultValue:m,children:[e.jsx(I,{className:"w-[180px]",children:e.jsx(H,{placeholder:"Pilih Hari/Tanggal"})}),e.jsx(F,{children:e.jsxs(T,{children:[e.jsx(E,{children:"Day PPLK"}),e.jsx(G,{value:"2024-08-10",children:"Pra-PPLK"}),e.jsx(G,{value:"2024-08-12",children:"Day 1 PPLK"}),e.jsx(G,{value:"2024-08-13",children:"Day 2 PPLK"}),e.jsx(G,{value:"2024-08-14",children:"Day 3 PPLK"}),e.jsx(G,{value:"2024-08-15",children:"Day 4 PPLK"}),e.jsx(G,{value:"2024-08-16",children:"Day 5 PPLK"}),e.jsx(G,{value:"2024-08-17",children:"CUI"})]})})]}),e.jsxs("div",{className:"lg:grid-cols-4 grid grid-cols-2 gap-4",children:[e.jsxs(A,{children:[e.jsxs(C,{className:"flex flex-row items-center justify-between pb-2 space-y-0",children:[e.jsx(D,{className:"text-sm font-medium text-green-500",children:"Maba Hadir"}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",className:"fill-green-500",viewBox:"0 0 16 16",children:e.jsx("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"})})]}),e.jsx(B,{children:e.jsx("div",{className:"text-2xl font-bold",children:t})})]}),e.jsxs(A,{children:[e.jsxs(C,{className:"flex flex-row items-center justify-between pb-2 space-y-0",children:[e.jsx(D,{className:"text-sm font-medium text-red-600",children:"Maba Tidak Hadir"}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",className:"fill-red-600",viewBox:"0 0 16 16",children:e.jsx("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293z"})})]}),e.jsx(B,{children:e.jsx("div",{className:"text-2xl font-bold",children:d})})]}),e.jsxs(A,{children:[e.jsxs(C,{className:"flex flex-row items-center justify-between pb-2 space-y-0",children:[e.jsx(D,{className:"text-sm font-medium text-yellow-500",children:"Maba Izin"}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",className:"fill-yellow-500",viewBox:"0 0 16 16",children:e.jsx("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293z"})})]}),e.jsx(B,{children:e.jsx("div",{className:"text-2xl font-bold",children:c})})]})]}),e.jsxs(V,{defaultValue:"tabel-kehadiran",className:"space-y-4",children:[e.jsxs($,{children:[e.jsx(R,{value:"tabel-kehadiran",children:"Tabel Kehadiran"}),e.jsx(R,{value:"presensi",children:"Presensi"})]}),e.jsx(U,{value:"presensi",children:e.jsx(r,{})}),e.jsx(U,{value:"tabel-kehadiran",children:e.jsx(O,{day:m})})]})]})}export{q as default};
