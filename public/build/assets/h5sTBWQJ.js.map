{"version":3,"file":"h5sTBWQJ.js","sources":["../../../resources/js/Pages/Relasi/Search/Page.tsx"],"sourcesContent":["import Autoplay from \"embla-carousel-autoplay\";\nimport { useSearchParams } from \"react-router-dom\";\n\nimport React, { useEffect, useState } from \"react\";\n\nimport { UserPlus } from \"lucide-react\";\n\nimport {\n    IconAdjustmentsHorizontal,\n    IconChevronLeft,\n    IconChevronRight,\n    IconFilter,\n    IconMoodAngry,\n    IconMoodSearch,\n    IconSearch,\n} from \"@tabler/icons-react\";\n\nimport Footer from \"@/Components/Footer\";\nimport MaxWidthWrapper from \"@/Components/MaxWidthWrapper\";\nimport Navbar from \"@/Components/Navbar\";\nimport GoldPodium from \"@/Components/relasi/Podium\";\nimport ProfileCard from \"@/Components/relasi/ProfileCard\";\nimport RelasiLoading from \"@/Components/relasi/RelasiLoading\";\nimport RelasiSearch from \"@/Components/relasi/RelasiSearch\";\nimport SortDropdown from \"@/Components/relasi/SortDropdown\";\nimport TopUser from \"@/Components/relasi/TopUser\";\nimport UserList from \"@/Components/relasi/UserList\";\nimport { Button } from \"@/Components/ui/button\";\nimport { Toaster } from \"@/Components/ui/toaster\";\nimport { useToast } from \"@/Components/ui/use-toast\";\n\nimport { fetchSearch } from \"@/lib/data/relasi\";\nimport { useAos } from \"@/lib/hooks/useAos\";\nimport { User } from \"@/lib/types/User\";\nimport { UserSearchResponse } from \"@/lib/types/UserSearchResponse\";\n\nconst sortOptions = [\n    { label: \"Viewer\", value: \"viewer\" },\n    { label: \"Follower\", value: \"follower\" },\n    { label: \"Following\", value: \"following\" },\n    { label: \"Nama\", value: \"nama\" },\n];\n\nfunction Page() {\n    useAos();\n\n    const toast = useToast();\n    const [searchLoading, setSearchLoading] = useState(false);\n    const [currentPage, setCurrentPage] = useState(1);\n    const [searchResponse, setSearchResponse] = useState<UserSearchResponse>();\n    const [users, setUsers] = useState<Partial<User>[]>([]);\n    const [search, setSearch] = useState(\"\");\n    const [searchTitle, setSearchTitle] = useState<string>(\n        \"Cari Naramuda Lainnya!\",\n    );\n\n    async function mFetchSearch(\n        mSearch: string = \"\",\n        page: number = currentPage,\n    ) {\n        if (!mSearch) return;\n        if (mSearch.length > 100) {\n            toast.toast({\n                title: \"Gagal mencari Naramuda...\",\n                description: \"Kata kunci terlalu panjang\",\n                variant: \"destructive\",\n            });\n            return;\n        }\n        if (/[^a-zA-Z0-9_ ]/g.test(mSearch)) {\n            toast.toast({\n                title: \"Gagal mencari Naramuda...\",\n                description: \"Kata kunci hanya boleh berupa huruf dan angka\",\n                variant: \"destructive\",\n            });\n            return;\n        }\n\n        // set search to url query params\n        let url = new URL(window.location.href);\n        url.searchParams.set(\"search\", mSearch);\n        window.history.pushState({}, \"\", url.toString());\n\n        if (search != mSearch) {\n            setCurrentPage(1);\n        }\n\n        setSearch(mSearch);\n        setSearchLoading(true);\n        let response = await fetchSearch(mSearch, page);\n        setSearchResponse(response);\n        setUsers(response.data);\n        setSearchTitle(`Hasil Pencarian dari ${mSearch}`);\n        setSearchLoading(false);\n    }\n\n    useEffect(() => {\n        let s = new URLSearchParams(window.location.search).get(\"search\") ?? \"\";\n        setSearch(s);\n        mFetchSearch(s);\n    }, []);\n\n    useEffect(() => {\n        mFetchSearch(search, currentPage);\n    }, [currentPage]);\n\n    const getPaginationRange = () => {\n        let range: Array<number> = [];\n        let start = Math.max(1, currentPage - 2);\n        let end = Math.min(searchResponse?.last_page ?? 0, start + 4);\n        for (let i = start; i <= end; i++) {\n            range.push(i);\n        }\n        return range;\n    };\n\n    return (\n        <div className=\"bg-pattern-white flex flex-col w-full min-h-screen\">\n            <div>\n                <Navbar isSolid={true} isFixed={false} />\n\n                <div className=\"max-w-7xl md:pt-24 lg:pt-32 font-montserrat md:text-md flex flex-col gap-8 px-2 py-16 pt-10 mx-auto text-base text-black\">\n                    <div className=\"relative w-full max-w-3xl mx-auto\">\n                        <RelasiSearch\n                            onsubmit={(search) => mFetchSearch(search, 1)}\n                        />\n                    </div>\n                    {searchLoading ? (\n                        <RelasiLoading className=\"min-h-72 w-full\" />\n                    ) : (\n                        <div className=\"w-full max-w-5xl mx-auto\">\n                            <div className=\"place-content-center place-items-center flex\">\n                                <h4 className=\"lg:text-2xl text-lg font-bold text-center\">\n                                    {searchTitle}\n                                </h4>\n                            </div>\n                            {users.length > 0 ? (\n                                <UserList users={users} />\n                            ) : (\n                                <div className=\"text-wrap mx-auto my-16 text-sm text-center\">\n                                    Maaf, kami tidak dapat menemukan Naramuda\n                                    yang kamu cari ðŸ˜•\n                                </div>\n                            )}\n                        </div>\n                    )}\n\n                    <ul className=\"place-content-center flex flex-wrap gap-2 mx-auto\">\n                        <li>\n                            <Button\n                                onClick={() =>\n                                    setCurrentPage(Math.max(currentPage - 1, 1))\n                                }\n                                className=\"bg-gradient-to-br from-jaffa-600 to-jaffa-700 hover:scale-110  transition\"\n                            >\n                                <IconChevronLeft></IconChevronLeft>\n                            </Button>\n                        </li>\n\n                        {getPaginationRange().map((page) => (\n                            <li key={page}>\n                                <Button\n                                    className=\" bg-gradient-to-br from-jaffa-600 to-jaffa-700 hover:scale-110 transition\"\n                                    onClick={() => setCurrentPage(page)}\n                                >\n                                    {page}\n                                </Button>\n                            </li>\n                        ))}\n\n                        <li>\n                            <Button\n                                onClick={() =>\n                                    setCurrentPage(\n                                        Math.min(\n                                            currentPage + 1,\n                                            searchResponse?.last_page ?? 1,\n                                        ),\n                                    )\n                                }\n                                className=\" bg-gradient-to-br from-jaffa-600 to-jaffa-700 hover:scale-110 transition\"\n                            >\n                                <IconChevronRight></IconChevronRight>\n                            </Button>\n                        </li>\n                    </ul>\n                    <p className=\"text-center\">\n                        Halaman {currentPage} dari{\" \"}\n                        {searchResponse?.last_page ?? 1}\n                    </p>\n                </div>\n\n                <Footer />\n            </div>\n\n            <Toaster />\n        </div>\n    );\n}\n\nexport default Page;\n"],"names":["Page","toast","useToast","searchLoading","setSearchLoading","useState","currentPage","setCurrentPage","searchResponse","setSearchResponse","users","setUsers","search","setSearch","searchTitle","setSearchTitle","async","mFetchSearch","mSearch","page","length","title","description","variant","test","url","URL","window","location","href","searchParams","set","history","pushState","toString","response","fetchSearch","data","useEffect","s","URLSearchParams","get","jsxs","className","children","jsx","Navbar","isSolid","isFixed","jsxRuntimeExports","RelasiSearch","onsubmit","RelasiLoading","UserList","Button","onClick","Math","max","IconChevronLeft","range","start","end","min","last_page","i","push","getPaginationRange","map","IconChevronRight","Footer","Toaster"],"mappings":"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"}