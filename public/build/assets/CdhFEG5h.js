import{r as e,j as o}from"./DPkeyV0Z.js";import{c as r,P as t,a as n,b as a,D as s,u as i,e as d}from"./DC8fWKBq.js";import{u as p,S as c,a as u}from"./Ba4YecwC.js";import{h as l,R as f,a as v,F as h,u as m}from"./CErQCflw.js";import{o as g,A as P,p as x,q as C,r as j}from"./Dl7M0piC.js";var O="Popover",[w,b]=r(O,[g]),R=g(),[_,A]=w(O),y=r=>{const{__scopePopover:t,children:n,open:a,defaultOpen:s,onOpenChange:d,modal:p=!1}=r,c=R(t),u=e.useRef(null),[l,f]=e.useState(!1),[v=!1,h]=i({prop:a,defaultProp:s,onChange:d});return o.jsx(j,{...c,children:o.jsx(_,{scope:t,contentId:m(),triggerRef:u,open:v,onOpenChange:h,onOpenToggle:e.useCallback((()=>h((e=>!e))),[h]),hasCustomAnchor:l,onCustomAnchorAdd:e.useCallback((()=>f(!0)),[]),onCustomAnchorRemove:e.useCallback((()=>f(!1)),[]),modal:p,children:n})})};y.displayName=O;var F="PopoverAnchor";e.forwardRef(((r,t)=>{const{__scopePopover:n,...a}=r,s=A(F,n),i=R(n),{onCustomAnchorAdd:d,onCustomAnchorRemove:p}=s;return e.useEffect((()=>(d(),()=>p())),[d,p]),o.jsx(P,{...i,...a,ref:t})})).displayName=F;var D="PopoverTrigger",E=e.forwardRef(((e,r)=>{const{__scopePopover:a,...s}=e,i=A(D,a),d=R(a),c=p(r,i.triggerRef),u=o.jsx(t.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":Z(i.open),...s,ref:c,onClick:n(e.onClick,i.onOpenToggle)});return i.hasCustomAnchor?u:o.jsx(P,{asChild:!0,...d,children:u})}));E.displayName=D;var N="PopoverPortal",[k,I]=w(N,{forceMount:void 0}),M=e=>{const{__scopePopover:r,forceMount:t,children:n,container:s}=e,i=A(N,r);return o.jsx(k,{scope:r,forceMount:t,children:o.jsx(a,{present:t||i.open,children:o.jsx(d,{asChild:!0,container:s,children:n})})})};M.displayName=N;var z="PopoverContent",K=e.forwardRef(((e,r)=>{const t=I(z,e.__scopePopover),{forceMount:n=t.forceMount,...s}=e,i=A(z,e.__scopePopover);return o.jsx(a,{present:n||i.open,children:i.modal?o.jsx(T,{...s,ref:r}):o.jsx(S,{...s,ref:r})})}));K.displayName=z;var T=e.forwardRef(((r,t)=>{const a=A(z,r.__scopePopover),s=e.useRef(null),i=p(t,s),d=e.useRef(!1);return e.useEffect((()=>{const e=s.current;if(e)return l(e)}),[]),o.jsx(f,{as:c,allowPinchZoom:!0,children:o.jsx(q,{...r,ref:i,trapFocus:a.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:n(r.onCloseAutoFocus,(e=>{var o;e.preventDefault(),d.current||null==(o=a.triggerRef.current)||o.focus()})),onPointerDownOutside:n(r.onPointerDownOutside,(e=>{const o=e.detail.originalEvent,r=0===o.button&&!0===o.ctrlKey,t=2===o.button||r;d.current=t}),{checkForDefaultPrevented:!1}),onFocusOutside:n(r.onFocusOutside,(e=>e.preventDefault()),{checkForDefaultPrevented:!1})})})})),S=e.forwardRef(((r,t)=>{const n=A(z,r.__scopePopover),a=e.useRef(!1),s=e.useRef(!1);return o.jsx(q,{...r,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:e=>{var o,t;null==(o=r.onCloseAutoFocus)||o.call(r,e),e.defaultPrevented||(a.current||null==(t=n.triggerRef.current)||t.focus(),e.preventDefault()),a.current=!1,s.current=!1},onInteractOutside:e=>{var o,t;null==(o=r.onInteractOutside)||o.call(r,e),e.defaultPrevented||(a.current=!0,"pointerdown"===e.detail.originalEvent.type&&(s.current=!0));const i=e.target;(null==(t=n.triggerRef.current)?void 0:t.contains(i))&&e.preventDefault(),"focusin"===e.detail.originalEvent.type&&s.current&&e.preventDefault()}})})),q=e.forwardRef(((e,r)=>{const{__scopePopover:t,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:d,onEscapeKeyDown:p,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:l,...f}=e,m=A(z,t),g=R(t);return v(),o.jsx(h,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:o.jsx(s,{asChild:!0,disableOutsidePointerEvents:d,onInteractOutside:l,onEscapeKeyDown:p,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>m.onOpenChange(!1),children:o.jsx(x,{"data-state":Z(m.open),role:"dialog",id:m.contentId,...g,...f,ref:r,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})})),U="PopoverClose";e.forwardRef(((e,r)=>{const{__scopePopover:a,...s}=e,i=A(U,a);return o.jsx(t.button,{type:"button",...s,ref:r,onClick:n(e.onClick,(()=>i.onOpenChange(!1)))})})).displayName=U;function Z(e){return e?"open":"closed"}e.forwardRef(((e,r)=>{const{__scopePopover:t,...n}=e,a=R(t);return o.jsx(C,{...a,...n,ref:r})})).displayName="PopoverArrow";var B=M,G=K;const H=y,J=E,L=e.forwardRef((({className:e,align:r="center",sideOffset:t=4,...n},a)=>o.jsx(B,{children:o.jsx(G,{ref:a,align:r,sideOffset:t,className:u("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})})));L.displayName=G.displayName;export{H as P,J as a,L as b};
