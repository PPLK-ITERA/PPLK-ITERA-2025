{"version":3,"file":"CStyCwcR.js","sources":["../../../resources/js/Pages/Dashboard/cui/Presensi.tsx"],"sourcesContent":["import { useDebouncedCallback } from \"use-debounce\";\n\nimport React, { useEffect, useState } from \"react\";\n\nimport { router, useForm } from \"@inertiajs/react\";\n\nimport { Button } from \"@/Components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/Components/ui/card\";\nimport { Input } from \"@/Components/ui/input\";\n\ntype DataMaba = {\n  message: string;\n  nama: string;\n  nim: string;\n  prodi: string;\n  pita: string;\n  riwayat: string;\n  profil_url: string;\n  qr_code: string;\n};\n\nfunction Presensi({ response }) {\n  const [error, setError] = useState(\"\");\n  const [dataMaba, setDataMaba] = useState<DataMaba | null>(null);\n  const [inputNim, setInputNim] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n\n  const handleSubmit = (e) => {\n    setInputNim(e.target.value);\n    debounced(e.target.value);\n  };\n\n  const handlePresensi = (qr_code: string) => {\n    router.post(route(\"cui.scan\"), {\n      qr_code: qr_code,\n    });\n  };\n\n  const getDataMaba = async (nim: string) => {\n    setLoading(true);\n    await fetch(route(\"dashboard.cui.detail\", { nim: nim }))\n      .then((response) => {\n        if (response.ok) {\n          return response.json();\n        } else {\n          response.json().then((data) => {\n            setError(data.message);\n            setDataMaba(null);\n          });\n        }\n      })\n      .then((json) => {\n        setError(\"\");\n        setDataMaba(json.data);\n      })\n      .finally(() => {\n        setLoading(false);\n      });\n  };\n\n  const debounced = useDebouncedCallback(\n    // function\n    (value) => {\n      getDataMaba(value);\n    },\n    // delay in ms\n    500,\n  );\n\n  // useEffect(() => {\n  //     if (data.qr_code) {\n  //         post(route(\"cui.scan\"));\n  //     }\n  // }, [data.qr_code]);\n  return (\n    <div className=\"space-y-4\">\n      <Card className=\"\">\n        <CardHeader className=\"flex flex-row items-center justify-between w-full pb-2 space-y-0\">\n          <CardTitle className=\"w-full text-lg font-bold text-center\">\n            Absensi CUI Maba\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"flex items-center justify-center mt-2\">\n          <Button onClick={() => router.get(route(\"dashboard.cui.absensi\"))}>\n            Mulai Absen Maba\n          </Button>\n        </CardContent>\n      </Card>\n      <Input\n        disabled={loading}\n        value={inputNim}\n        onChange={handleSubmit}\n        placeholder=\"Cari mahasiswa berdasarkan NIM. cth: \"\n      />\n\n      {error && <p className=\"font-bold text-red-600\">{error}</p>}\n\n      {dataMaba && (\n        <div className=\"w-full\">\n          <p className=\"font-bold text-green-500\">{dataMaba.message}</p>\n          <div className=\"flex w-full gap-5 mt-3\">\n            <div>\n              <img\n                className=\"w-48 h-64 mb-2 bg-cover rounded-lg\"\n                src={dataMaba.profil_url}\n                alt=\"Foto profil\"\n              />\n              {dataMaba.pita === \"hijau\" && (\n                <div className=\"rounded-xl flex items-center justify-center h-10 font-bold text-white bg-green-500\">\n                  Pita Hijau\n                </div>\n              )}\n              {dataMaba.pita === \"kuning\" && (\n                <div>\n                  <div className=\"rounded-xl flex items-center justify-center h-10 font-bold text-white bg-yellow-400\">\n                    Pita Kuning\n                  </div>\n                  <p>Riwayat penyakit: {dataMaba.riwayat}</p>\n                </div>\n              )}\n              {dataMaba.pita === \"merah\" && (\n                <div>\n                  <div className=\"rounded-xl flex items-center justify-center h-10 font-bold text-white bg-red-600\">\n                    Pita Merah\n                  </div>\n                  <p>Riwayat penyakit: {dataMaba.riwayat}</p>\n                </div>\n              )}\n            </div>\n            <div>\n              <div className=\"ring-1 ring-black/30 rounded-xl  p-2 text-xl\">\n                <p className=\"font-bold\">{dataMaba.nama}</p>\n                <p>{dataMaba.prodi}</p>\n                <p>{dataMaba.nim}</p>\n              </div>\n              <Button\n                onClick={() => handlePresensi(dataMaba.qr_code)}\n                className=\"w-full mt-2\"\n              >\n                Presensi\n              </Button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default Presensi;\n"],"names":["Presensi","response","error","setError","useState","dataMaba","setDataMaba","inputNim","setInputNim","loading","setLoading","debounced","useDebouncedCallback","value","async","nim","fetch","route","then","ok","json","data","message","finally","getDataMaba","jsxs","className","children","Card","jsx","CardHeader","CardTitle","CardContent","Button","onClick","router","get","jsxRuntimeExports","Input","disabled","onChange","e","target","placeholder","src","profil_url","alt","pita","riwayat","nama","prodi","handlePresensi","qr_code","yt","post"],"mappings":"mOAqBA,SAASA,GAASC,SAAEA,IAClB,MAAOC,EAAOC,GAAYC,WAAS,KAC5BC,EAAUC,GAAeF,WAA0B,OACnDG,EAAUC,GAAeJ,WAAS,KAClCK,EAASC,GAAcN,YAAS,GAmCjCO,EAAYC,GAEfC,IAxBiBC,OAAOC,IACzBL,GAAW,SACLM,MAAMC,MAAM,uBAAwB,CAAEF,SACzCG,MAAMjB,IACL,GAAIA,EAASkB,GACX,OAAOlB,EAASmB,OAEhBnB,EAASmB,OAAOF,MAAMG,IACpBlB,EAASkB,EAAKC,SACdhB,EAAY,KAAI,GAEpB,IAEDY,MAAME,IACLjB,EAAS,IACTG,EAAYc,EAAKC,KAAI,IAEtBE,SAAQ,KACPb,GAAW,EAAK,GACjB,EAMDc,CAAYX,EAAK,GAGnB,KASA,SAAAY,KAAC,MAAI,CAAAC,UAAU,YACbC,SAAA,GAACF,KAAAG,EAAA,CAAKF,UAAU,GACdC,SAAA,GAACE,IAAAC,EAAA,CAAWJ,UAAU,mEACpBC,SAAAE,EAAAA,IAACE,GAAUL,UAAU,uCAAuCC,gCAI7DE,EAAAA,IAAAG,EAAA,CAAYN,UAAU,wCACrBC,eAACM,EAAO,CAAAC,QAAS,IAAMC,EAAOC,IAAInB,MAAM,0BAA2BU,mCAKvEU,EAAAR,IAACS,EAAA,CACCC,SAAU9B,EACVI,MAAON,EACPiC,SAhEgBC,IACRjC,EAAAiC,EAAEC,OAAO7B,OACXF,EAAA8B,EAAEC,OAAO7B,MAAK,EA+DpB8B,YAAY,0CAGbzC,KAAS2B,IAAC,IAAE,CAAAH,UAAU,yBAA0BC,SAAMzB,IAEtDG,GACCgC,EAAAZ,KAAC,MAAI,CAAAC,UAAU,SACbC,SAAA,CAAAE,EAAAA,IAAC,IAAE,CAAAH,UAAU,2BAA4BC,SAAAtB,EAASiB,YAClDG,KAAC,MAAI,CAAAC,UAAU,yBACbC,SAAA,QAAC,MACC,CAAAA,SAAA,CAAAU,EAAAR,IAAC,MAAA,CACCH,UAAU,qCACVkB,IAAKvC,EAASwC,WACdC,IAAI,gBAEa,UAAlBzC,EAAS0C,YACP,MAAI,CAAArB,UAAU,qFAAqFC,SAEpG,eAEiB,WAAlBtB,EAAS0C,QACRtB,KAAC,MACC,CAAAE,SAAA,CAACE,EAAAA,IAAA,MAAA,CAAIH,UAAU,sFAAsFC,SAErG,uBACC,IAAE,CAAAA,SAAA,CAAA,qBAAmBtB,EAAS2C,cAGhB,UAAlB3C,EAAS0C,QACRtB,KAAC,MACC,CAAAE,SAAA,CAACE,EAAAA,IAAA,MAAA,CAAIH,UAAU,mFAAmFC,SAElG,sBACC,IAAE,CAAAA,SAAA,CAAA,qBAAmBtB,EAAS2C,wBAIpC,MACC,CAAArB,SAAA,GAACF,KAAA,MAAA,CAAIC,UAAU,+CACbC,SAAA,CAAAE,EAAAA,IAAC,IAAE,CAAAH,UAAU,YAAaC,SAAAtB,EAAS4C,SACnCpB,IAAC,IAAG,CAAAF,SAAAtB,EAAS6C,UACbrB,IAAC,IAAG,CAAAF,SAAAtB,EAASU,SAEfsB,EAAAR,IAACI,EAAA,CACCC,QAAS,KAAMiB,OAxGLC,EAwGoB/C,EAAS+C,aAvG5CC,EAAAC,KAAKrC,MAAM,YAAa,CAC7BmC,YAFmB,IAACA,CAwGoC,EAC9C1B,UAAU,cACXC,SAAA,wBASf"}