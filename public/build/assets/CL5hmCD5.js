import{r as e,j as a}from"./DGfyeAXc.js";import{N as s,M as r}from"./Bbk2Pt1N.js";import{C as t}from"./Cow1EMoh.js";import{b as n}from"./COCsfmfx.js";import"./CcXxkEUG.js";import"./CbGBZsHV.js";import"./DX6VY3wX.js";import"./DKXWPAFQ.js";import"./CX_mcOTR.js";import"./Detfl0eK.js";import"./z08mKKfS.js";const l={id:0,nomor:0,tipe:"mendatar",pertanyaan:"",jawaban:"",start_row:0,start_col:0},o=()=>{const[o,d]=e.useState([]),[i,c]=e.useState(l),[m,x]=e.useState(!1),[p,h]=e.useState(""),j=async()=>{const e=await fetch("/api/tesla/"),a=await e.json();d(a.data||[])};e.useEffect((()=>{j()}),[]);const u=e=>{const{name:a,value:s}=e.target;if("nomor"===a){const e=Number(s);c((a=>({...a,nomor:e,tipe:e%2==0?"menurun":"mendatar"})))}else c({...i,[a]:"nomor"===a||"start_row"===a||"start_col"===a?Number(s):s})};return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:`url(${n})`},children:a.jsx("div",{className:"absolute inset-0 bg-[#BF4000] mix-blend-multiply pointer-events-none"})}),a.jsx(s,{isFixed:!0}),a.jsxs(r,{className:"py-8 mt-20 relative z-10",children:[a.jsxs(t,{className:"p-6 mb-8 bg-white/90",children:[a.jsx("h3",{className:"text-xl font-semibold mb-4",children:m?"Edit Soal":"Tambah Soal"}),a.jsxs("form",{onSubmit:async e=>{var a;e.preventDefault(),h("");const s=m?"PUT":"POST",r=m?`/api/tesla/${i.id}`:"/api/tesla/",t={...i,nomor:Number(i.nomor),start_row:Number(i.start_row),start_col:Number(i.start_col)},n=await fetch(r,{method:s,headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":(null==(a=document.querySelector('meta[name="csrf-token"]'))?void 0:a.content)||""},body:JSON.stringify(t)}),o=await n.json();n.ok?(h(o.message),c(l),x(!1),j()):h(o.message||"Gagal menyimpan data")},className:"flex flex-col gap-3",children:[a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"mr-2",children:"Tipe:"}),a.jsxs("select",{name:"tipe",value:i.tipe,onChange:u,className:"border rounded px-2 py-1 w-40 h-10",children:[a.jsx("option",{value:"mendatar",children:"Mendatar"}),a.jsx("option",{value:"menurun",children:"Menurun"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"mr-2",children:"Nomor:"}),a.jsx("input",{name:"nomor",type:"number",value:i.nomor,onChange:u,className:"border rounded px-2 py-1 w-40 h-10",required:!0})]})]}),a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{className:"mr-2",children:"Pertanyaan:"}),a.jsx("input",{name:"pertanyaan",type:"text",value:i.pertanyaan,onChange:u,className:"border rounded px-2 py-1 w-full h-10",required:!0})]}),a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{className:"mr-2",children:"Jawaban:"}),a.jsx("input",{name:"jawaban",type:"text",value:i.jawaban,onChange:u,className:"border rounded px-2 py-1 w-full h-10",required:!0})]})]}),a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"mr-2",children:"Start Row:"}),a.jsx("input",{name:"start_row",type:"number",value:i.start_row,onChange:u,className:"border rounded px-2 py-1 w-40 h-10",min:0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"mr-2",children:"Start Col:"}),a.jsx("input",{name:"start_col",type:"number",value:i.start_col,onChange:u,className:"border rounded px-2 py-1 w-40 h-10",min:0})]}),a.jsx("span",{className:"text-xs text-gray-500 mt-2",children:"(Boleh dikosongkan untuk auto)"})]}),a.jsxs("div",{children:[a.jsx("button",{type:"submit",className:"bg-[#FF6B20] hover:bg-[#e65a00] text-white px-4 py-2 rounded h-10",children:m?"Update":"Tambah"}),m&&a.jsx("button",{type:"button",className:"ml-2 px-4 py-2 rounded border h-10",onClick:()=>{c(l),x(!1)},children:"Batal"})]}),p&&a.jsx("div",{className:"text-green-600",children:p})]})]}),a.jsxs(t,{className:"p-6 bg-white/90",children:[a.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Daftar Soal"}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full border",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{className:"border px-2 py-1",children:"Nomor"}),a.jsx("th",{className:"border px-2 py-1",children:"Tipe"}),a.jsx("th",{className:"border px-2 py-1",children:"Pertanyaan"}),a.jsx("th",{className:"border px-2 py-1",children:"Jawaban"}),a.jsx("th",{className:"border px-2 py-1",children:"Start Row"}),a.jsx("th",{className:"border px-2 py-1",children:"Start Col"}),a.jsx("th",{className:"border px-2 py-1",children:"Aksi"})]})}),a.jsx("tbody",{children:o.map((e=>a.jsxs("tr",{children:[a.jsx("td",{className:"border px-2 py-1",children:e.nomor}),a.jsx("td",{className:"border px-2 py-1",children:e.tipe}),a.jsx("td",{className:"border px-2 py-1",children:e.pertanyaan}),a.jsx("td",{className:"border px-2 py-1",children:e.jawaban}),a.jsx("td",{className:"border px-2 py-1",children:e.start_row}),a.jsx("td",{className:"border px-2 py-1",children:e.start_col}),a.jsxs("td",{className:"border px-2 py-1",children:[a.jsx("button",{className:"text-blue-600 mr-2",onClick:()=>(e=>{c(e),x(!0)})(e),children:"Edit"}),a.jsx("button",{className:"text-red-600",onClick:()=>(async e=>{var a;await fetch(`/api/tesla/${e}`,{method:"DELETE",headers:{"X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":(null==(a=document.querySelector('meta[name="csrf-token"]'))?void 0:a.content)||""}}),j()})(e.id),children:"Hapus"})]})]},e.id)))})]})})]})]})]})};export{o as default};
