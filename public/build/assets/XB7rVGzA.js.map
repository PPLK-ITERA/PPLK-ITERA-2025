{"version":3,"file":"XB7rVGzA.js","sources":["../../../resources/js/Components/dashboard/materi/MateriForm.tsx","../../../resources/js/Components/dashboard/materi/MateriCellActions.tsx","../../../resources/js/Pages/Dashboard/materi/Page.tsx"],"sourcesContent":["import { useDebouncedCallback } from \"use-debounce\";\n\nimport React, { FormEvent, useEffect, useState } from \"react\";\n\nimport { useForm } from \"@inertiajs/react\";\n\nimport { Button } from \"@/Components/ui/button\";\nimport { Input } from \"@/Components/ui/input\";\nimport { Label } from \"@/Components/ui/label\";\nimport { toast } from \"@/Components/ui/use-toast\";\n\nimport { Materi } from \"@/lib/types/Materi\";\n\ntype Props = {\n    materi?: Materi;\n};\n\nfunction MateriForm({ materi }: Props) {\n    const { data, setData, post, put, processing, errors } =\n        useForm<Materi>(materi);\n    const [urlError, setUrlError] = useState<string | null>(null);\n    const [error, setError] = useState<string | null>(null);\n\n    const validateUrl = useDebouncedCallback(async () => {\n        if (\n            !/^https:\\/\\/(www\\.)?\\w+\\.google\\.com\\/.*$/g.test(data.link_materi)\n        ) {\n            setUrlError(\"link harus dari Google Drive\");\n            return;\n        }\n\n        let id = data.link_materi.split(\"/\")[5];\n        let response = await fetch(\n            `https://www.googleapis.com/drive/v2/files/${id}?key=${import.meta.env.VITE_GOOGLE_API_KEY}`,\n        );\n\n        if (!response.ok) {\n            setUrlError(\"Link drive belum publik, silahkan coba lagi\");\n            return;\n        }\n\n        setUrlError(\"\");\n    }, 200);\n\n    function onSubmit() {\n        toast({\n            title: \"Mohon tunggu sebentar...\",\n            description: \"Sedang mengupload Materi...\",\n        });\n\n        if (materi) {\n            console.log(data);\n            put(route(\"dashboard.materi.update\"), {\n                onError: () => {\n                    toast({\n                        title: \"Uh oh! Gagal mengupdate Materi.\",\n                        description: errors.nama_materi || errors.link_materi,\n                    });\n                },\n                onSuccess: () => {\n                    toast({\n                        title: \"Berhasil!\",\n                        description: \"Materi berhasil diupdate.\",\n                    });\n                },\n            });\n            window.location.reload();\n        } else {\n            post(route(\"dashboard.materi.store\"), {\n                onError: () => {\n                    toast({\n                        title: \"Uh oh! Gagal mengupload Materi.\",\n                        description: errors.nama_materi || errors.link_materi,\n                    });\n                },\n                onSuccess: () => {\n                    toast({\n                        title: \"Berhasil!\",\n                        description: \"Materi berhasil diupload.\",\n                    });\n                },\n            });\n            window.location.reload();\n        }\n    }\n\n    return (\n        <form\n            aria-describedby=\"form\"\n            className=\"grid gap-4 py-4\"\n            onSubmit={(e: FormEvent) => {\n                e.preventDefault();\n                onSubmit();\n            }}\n        >\n            <div className=\"grid items-center grid-cols-4 gap-4\">\n                <Label htmlFor=\"nama_materi\" className=\"text-right\">\n                    Nama Materi\n                </Label>\n                <Input\n                    id=\"nama_materi\"\n                    name=\"nama_materi\"\n                    required\n                    type=\"text\"\n                    value={data.nama_materi}\n                    maxLength={500}\n                    className=\"col-span-3\"\n                    onChange={(e) => setData(\"nama_materi\", e.target.value)}\n                />\n            </div>\n            <div className=\"grid items-center grid-cols-4 gap-4\">\n                <Label htmlFor=\"hari\" className=\"text-right\">\n                    Hari Ke-\n                </Label>\n                <Input\n                    id=\"hari\"\n                    name=\"hari\"\n                    required\n                    type=\"text\"\n                    value={data.hari}\n                    maxLength={1}\n                    className=\"col-span-3\"\n                    onChange={(e) => {\n                        setData(\"hari\", e.target.value);\n                    }}\n                />\n            </div>\n            <div className=\"grid items-center grid-cols-4 gap-4\">\n                <Label htmlFor=\"link_materi\" className=\"text-right\">\n                    Link Google Drive Materi\n                </Label>\n                <Input\n                    id=\"link_materi\"\n                    name=\"link_materi\"\n                    required\n                    type=\"text\"\n                    value={data.link_materi}\n                    maxLength={500}\n                    className=\"col-span-3\"\n                    onChange={(e) => {\n                        setData(\"link_materi\", e.target.value);\n                        validateUrl();\n                    }}\n                />\n            </div>\n\n            <div className=\"place-content-center flex items-center justify-between gap-4 text-right\">\n                <Button\n                    className=\"bg-orange-500\"\n                    size={\"sm\"}\n                    type=\"button\"\n                    onClick={validateUrl}\n                >\n                    Refresh Link\n                </Button>\n                {!!urlError ? (\n                    <p className=\"text-sm text-red-500\">{urlError}</p>\n                ) : urlError === \"\" ? (\n                    <p className=\"text-sm text-green-500\">Link valid</p>\n                ) : null}\n            </div>\n            <div className=\"place-content-center flex items-center justify-between gap-4 mt-4 text-right\">\n                <Button\n                    size={\"sm\"}\n                    type={\"submit\"}\n                    className={`w-full`}\n                    disabled={!!urlError || !!error}\n                >\n                    {materi ? \"Perbarui\" : \"Tambahkan\"} Materi\n                </Button>\n            </div>\n        </form>\n    );\n}\n\nexport default MateriForm;\n","\"use client\";\n\nimport { DialogClose } from \"@radix-ui/react-dialog\";\n\nimport { FormEvent, useEffect, useState } from \"react\";\n\nimport { router, useForm } from \"@inertiajs/react\";\n\nimport { IconTrashFilled } from \"@tabler/icons-react\";\n\nimport MateriForm from \"@/Components/dashboard/materi/MateriForm\";\nimport { Button } from \"@/Components/ui/button\";\nimport {\n    Dialog,\n    DialogContent,\n    DialogHeader,\n    DialogTitle,\n    DialogTrigger,\n} from \"@/Components/ui/dialog\";\nimport { toast } from \"@/Components/ui/use-toast\";\n\nimport { Materi } from \"@/lib/types/Materi\";\n\ninterface MateriActionProps {\n    materi: Materi;\n}\n\nexport const MateriCellActions: React.FC<MateriActionProps> = ({ materi }) => {\n    const {\n        data,\n        setData,\n        delete: del,\n        processing,\n        errors,\n    } = useForm<Materi>(materi);\n    const [deleteDialogOpen, setDeleteDialogOpen] = useState(false);\n    const [editDialogOpen, setEditDialogOpen] = useState(false);\n\n    useEffect(() => {\n        if (deleteDialogOpen || editDialogOpen) {\n            setData(materi);\n        }\n    }, [deleteDialogOpen, editDialogOpen, materi, setData]);\n\n    function onDelete() {\n        del(route(\"dashboard.materi.destroy\"), {\n            onError: () => {\n                toast({\n                    title: \"Uh oh! Gagal menghapus Materi.\",\n                    description: errors.nama_materi || errors.link_materi,\n                });\n            },\n            onSuccess: () => {\n                toast({\n                    title: \"Berhasil!\",\n                    description: \"Materi berhasil dihapus.\",\n                });\n            },\n        });\n        window.location.reload();\n    }\n\n    return (\n        <>\n            <div className=\"flex gap-1 p-2\">\n                <Dialog\n                    open={deleteDialogOpen}\n                    onOpenChange={setDeleteDialogOpen}\n                >\n                    <DialogTrigger asChild>\n                        <Button\n                            className=\"bg-red-500\"\n                            onClick={() => setDeleteDialogOpen(true)}\n                        >\n                            <IconTrashFilled size={18} />\n                            <span>Hapus</span>\n                        </Button>\n                    </DialogTrigger>\n                    <DialogContent className=\"sm:max-w-[425px]\">\n                        <DialogHeader>\n                            <DialogTitle>Hapus Materi</DialogTitle>\n                        </DialogHeader>\n                        <div>\n                            <p>\n                                Apakah anda yakin ingin menghapus materi{\" \"}\n                                {materi.nama_materi}?\n                            </p>\n                            <div className=\"flex justify-end gap-2 mt-4\">\n                                <DialogClose asChild>\n                                    <Button>Batal</Button>\n                                </DialogClose>\n                                <Button\n                                    onClick={onDelete}\n                                    className=\"bg-red-500\"\n                                >\n                                    Hapus\n                                </Button>\n                            </div>\n                        </div>\n                    </DialogContent>\n                </Dialog>\n\n                <Dialog open={editDialogOpen} onOpenChange={setEditDialogOpen}>\n                    <DialogTrigger asChild>\n                        <Button onClick={() => setEditDialogOpen(true)}>\n                            <span>Edit</span>\n                        </Button>\n                    </DialogTrigger>\n                    <DialogContent className=\"sm:max-w-[425px]\">\n                        <DialogHeader>\n                            <DialogTitle>Edit Materi</DialogTitle>\n                        </DialogHeader>\n                        <MateriForm materi={materi} />\n                    </DialogContent>\n                </Dialog>\n            </div>\n        </>\n    );\n};\n","import { ColumnDef } from \"@tanstack/react-table\";\n\nimport { IconPlus } from \"@tabler/icons-react\";\n\nimport DashboardLayout from \"@/Layouts/DashboardLayout\";\n\nimport { MateriCellActions } from \"@/Components/dashboard/materi/MateriCellActions\";\nimport MateriForm from \"@/Components/dashboard/materi/MateriForm\";\nimport { Breadcrumbs } from \"@/Components/ui/breadcrumbs\";\nimport { Button } from \"@/Components/ui/button\";\nimport { DataTable } from \"@/Components/ui/data-table\";\nimport {\n    Dialog,\n    DialogContent,\n    DialogHeader,\n    DialogTitle,\n    DialogTrigger,\n} from \"@/Components/ui/dialog\";\nimport { Toaster } from \"@/Components/ui/toaster\";\n\nimport { Materi } from \"@/lib/types/Materi\";\n\nconst breadcrumbItems = [\n    { title: \"Dashboard\", link: \"/dashboard\" },\n    { title: \"Materi\", link: \"/dashboard/materi\" },\n];\n\ninterface MateriDataResponse {\n    no: number;\n    materi: Materi;\n}\n\nexport default function Page({ auth, response }) {\n    const columns: ColumnDef<MateriDataResponse>[] = [\n        {\n            id: \"no\",\n            header: \"No\",\n            cell: ({ row }) => row.index + 1,\n        },\n        {\n            id: \"nama_materi\",\n            accessorKey: \"materi.nama_materi\",\n            header: \"Nama\",\n        },\n        {\n            id: \"link_materi\",\n            accessorKey: \"materi.link_materi\",\n            header: \"Link Materi\",\n        },\n        {\n            id: \"hari\",\n            accessorKey: \"materi.hari\",\n            header: \"Hari Ke\",\n        },\n        {\n            id: \"action\",\n            header: \"Aksi\",\n            cell: ({ row }) => {\n                return <MateriCellActions materi={row.original.materi} />;\n            },\n        },\n    ];\n\n    return (\n        <DashboardLayout user={auth.user}>\n            <Breadcrumbs items={breadcrumbItems} />\n            <h2 className=\"text-3xl font-bold tracking-tight\">Atur Materi</h2>\n\n            <div className=\"place-content-start flex w-full\">\n                {/* add dialog */}\n                <Dialog>\n                    <DialogTrigger asChild>\n                        <Button>\n                            <IconPlus size={18} />\n                            <span>Tambah Materi</span>\n                        </Button>\n                    </DialogTrigger>\n                    <DialogContent>\n                        <DialogHeader>\n                            <DialogTitle>Tambah Materi</DialogTitle>\n                        </DialogHeader>\n                        <MateriForm />\n                    </DialogContent>\n                </Dialog>\n            </div>\n\n            <DataTable\n                searchKey=\"name\"\n                columns={columns}\n                apiEndpoint={route(\"dashboard.materi.data\")}\n                title={\"Data Materi\"}\n                description={\"Data Materi yang telah diupload.\"}\n            />\n            <Toaster />\n        </DashboardLayout>\n    );\n}\n"],"names":["MateriForm","materi","data","setData","post","put","processing","errors","useForm","urlError","setUrlError","useState","error","setError","validateUrl","useDebouncedCallback","async","test","link_materi","id","split","fetch","ok","jsxRuntimeExports","jsxs","className","onSubmit","e","preventDefault","toast","title","description","console","log","route","onError","nama_materi","onSuccess","window","location","reload","children","jsx","Label","htmlFor","Input","name","required","type","value","maxLength","onChange","target","hari","Button","size","onClick","disabled","MateriCellActions","delete","del","deleteDialogOpen","setDeleteDialogOpen","editDialogOpen","setEditDialogOpen","useEffect","Fragment","Dialog","open","onOpenChange","DialogTrigger","asChild","IconTrashFilled","DialogContent","DialogHeader","DialogTitle","DialogClose","breadcrumbItems","link","Page","auth","response","columns","header","cell","row","index","accessorKey","original","DashboardLayout","user","Breadcrumbs","items","IconPlus","DataTable","searchKey","apiEndpoint","Toaster"],"mappings":"0zBAiBA,SAASA,GAAWC,OAAEA,IACZ,MAAAC,KAAEA,UAAMC,EAASC,KAAAA,EAAAC,IAAMA,aAAKC,EAAYC,OAAAA,GAC1CC,EAAgBP,IACbQ,EAAUC,GAAeC,WAAwB,OACjDC,EAAOC,GAAYF,WAAwB,MAE5CG,EAAcC,GAAqBC,UACrC,IACK,4CAA4CC,KAAKf,EAAKgB,aAGvD,YADAR,EAAY,gCAIhB,IAAIS,EAAKjB,EAAKgB,YAAYE,MAAM,KAAK,UAChBC,MACjB,6CAA6CF,kDAGnCG,GAKdZ,EAAY,IAJRA,EAAY,8CAIF,GACf,KA6CC,OAAAa,EAAAC,KAAC,OAAA,CACG,mBAAiB,OACjBC,UAAU,kBACVC,SAAWC,IACPA,EAAEC,iBA9CJC,EAAA,CACFC,MAAO,2BACPC,YAAa,gCAGb9B,GACA+B,QAAQC,IAAI/B,GACRG,EAAA6B,MAAM,2BAA4B,CAClCC,QAAS,KACCN,EAAA,CACFC,MAAO,kCACPC,YAAaxB,EAAO6B,aAAe7B,EAAOW,aAC7C,EAELmB,UAAW,KACDR,EAAA,CACFC,MAAO,YACPC,YAAa,6BAChB,IAGTO,OAAOC,SAASC,WAEXpC,EAAA8B,MAAM,0BAA2B,CAClCC,QAAS,KACCN,EAAA,CACFC,MAAO,kCACPC,YAAaxB,EAAO6B,aAAe7B,EAAOW,aAC7C,EAELmB,UAAW,KACDR,EAAA,CACFC,MAAO,YACPC,YAAa,6BAChB,IAGTO,OAAOC,SAASC,WAahBC,SAAA,GAACjB,KAAA,MAAA,CAAIC,UAAU,sCACXgB,SAAA,CAAAC,MAACC,EAAM,CAAAC,QAAQ,cAAcnB,UAAU,aAAagB,SAEpD,gBACAlB,EAAAmB,IAACG,EAAA,CACG1B,GAAG,cACH2B,KAAK,cACLC,UAAQ,EACRC,KAAK,OACLC,MAAO/C,EAAKkC,YACZc,UAAW,IACXzB,UAAU,aACV0B,SAAWxB,GAAMxB,EAAQ,cAAewB,EAAEyB,OAAOH,cAGxDzB,KAAA,MAAI,CAAAC,UAAU,sCACXgB,SAAA,CAAAC,MAACC,EAAM,CAAAC,QAAQ,OAAOnB,UAAU,aAAagB,SAE7C,aACAlB,EAAAmB,IAACG,EAAA,CACG1B,GAAG,OACH2B,KAAK,OACLC,UAAQ,EACRC,KAAK,OACLC,MAAO/C,EAAKmD,KACZH,UAAW,EACXzB,UAAU,aACV0B,SAAWxB,IACCxB,EAAA,OAAQwB,EAAEyB,OAAOH,MAAK,SAIzCzB,KAAA,MAAI,CAAAC,UAAU,sCACXgB,SAAA,CAAAC,MAACC,EAAM,CAAAC,QAAQ,cAAcnB,UAAU,aAAagB,SAEpD,6BACAlB,EAAAmB,IAACG,EAAA,CACG1B,GAAG,cACH2B,KAAK,cACLC,UAAQ,EACRC,KAAK,OACLC,MAAO/C,EAAKgB,YACZgC,UAAW,IACXzB,UAAU,aACV0B,SAAWxB,IACCxB,EAAA,cAAewB,EAAEyB,OAAOH,mBAM3CzB,KAAA,MAAI,CAAAC,UAAU,0EACXgB,SAAA,CAAAlB,EAAAmB,IAACY,EAAA,CACG7B,UAAU,gBACV8B,KAAM,KACNP,KAAK,SACLQ,QAAS1C,EACZ2B,SAAA,iBAGEhC,EACEiC,EAAAA,IAAA,IAAA,CAAEjB,UAAU,uBAAwBgB,SAAAhC,IACxB,KAAbA,QACC,IAAA,CAAEgB,UAAU,yBAAyBgB,wBACtC,UAEPC,IAAA,MAAI,CAAAjB,UAAU,+EACXgB,SAAAlB,EAAAC,KAAC8B,EAAA,CACGC,KAAM,KACNP,KAAM,SACNvB,UAAW,SACXgC,WAAYhD,KAAcG,EAEzB6B,SAAA,CAAAxC,EAAS,WAAa,YAAY,iBAKvD,CClJO,MAAMyD,EAAiD,EAAGzD,aACvD,MAAAC,KACFA,EAAAC,QACAA,EACAwD,OAAQC,EAAAtD,WACRA,EAAAC,OACAA,GACAC,EAAgBP,IACb4D,EAAkBC,GAAuBnD,YAAS,IAClDoD,EAAgBC,GAAqBrD,YAAS,GA0BrD,OAxBAsD,EAAAA,WAAU,MACFJ,GAAoBE,IACpB5D,EAAQF,EACZ,GACD,CAAC4D,EAAkBE,EAAgB9D,EAAQE,IAsBtCoB,EAAAmB,IAAAwB,WAAA,CAAAzB,SAAAjB,EAAAA,KAAC,MAAI,CAAAC,UAAU,iBACXgB,SAAA,CAAAlB,EAAAC,KAAC2C,EAAA,CACGC,KAAMP,EACNQ,aAAcP,EAEdrB,SAAA,GAACC,IAAA4B,EAAA,CAAcC,SAAO,EAClB9B,SAAAlB,EAAAC,KAAC8B,EAAA,CACG7B,UAAU,aACV+B,QAAS,IAAMM,GAAoB,GAEnCrB,SAAA,GAACC,IAAA8B,EAAA,CAAgBjB,KAAM,OACvBb,IAAC,QAAKD,SAAK,iBAGnBjB,KAACiD,EAAc,CAAAhD,UAAU,mBACrBgB,SAAA,OAACiC,EACG,CAAAjC,SAAAC,EAAAA,IAACiC,EAAY,CAAAlC,SAAA,0BAEhB,MACG,CAAAA,SAAA,QAAC,IAAE,CAAAA,SAAA,CAAA,2CAC0C,IACxCxC,EAAOmC,YAAY,SAExBZ,KAAC,MAAI,CAAAC,UAAU,8BACXgB,SAAA,CAAAC,EAAAA,IAACkC,GAAYL,SAAO,EAChB9B,eAACa,EAAA,CAAOb,qBAEZlB,EAAAmB,IAACY,EAAA,CACGE,QAhDhC,WACQI,EAAA1B,MAAM,4BAA6B,CACnCC,QAAS,KACCN,EAAA,CACFC,MAAO,iCACPC,YAAaxB,EAAO6B,aAAe7B,EAAOW,aAC7C,EAELmB,UAAW,KACDR,EAAA,CACFC,MAAO,YACPC,YAAa,4BAChB,IAGTO,OAAOC,SAASC,QACpB,EAiCgCf,UAAU,aACbgB,SAAA,sBAQhBjB,EAAAA,KAAA2C,EAAA,CAAOC,KAAML,EAAgBM,aAAcL,EACxCvB,SAAA,CAAAC,MAAC4B,EAAc,CAAAC,SAAO,EAClB9B,SAAAlB,EAAAmB,IAACY,GAAOE,QAAS,IAAMQ,GAAkB,GACrCvB,SAAAC,EAAAA,IAAC,OAAK,CAAAD,SAAA,eAGdjB,KAACiD,EAAc,CAAAhD,UAAU,mBACrBgB,SAAA,OAACiC,EACG,CAAAjC,SAAAC,EAAAA,IAACiC,EAAY,CAAAlC,SAAA,wBAEhBzC,GAAWC,qBAI5B,EC9FF4E,EAAkB,CACpB,CAAE/C,MAAO,YAAagD,KAAM,cAC5B,CAAEhD,MAAO,SAAUgD,KAAM,sBAQ7B,SAAwBC,GAAKC,KAAEA,EAAMC,SAAAA,IACjC,MAAMC,EAA2C,CAC7C,CACI/D,GAAI,KACJgE,OAAQ,KACRC,KAAM,EAAGC,SAAUA,EAAIC,MAAQ,GAEnC,CACInE,GAAI,cACJoE,YAAa,qBACbJ,OAAQ,QAEZ,CACIhE,GAAI,cACJoE,YAAa,qBACbJ,OAAQ,eAEZ,CACIhE,GAAI,OACJoE,YAAa,cACbJ,OAAQ,WAEZ,CACIhE,GAAI,SACJgE,OAAQ,OACRC,KAAM,EAAGC,SACG3C,EAAAA,IAAAgB,EAAA,CAAkBzD,OAAQoF,EAAIG,SAASvF,WAK3D,SACKuB,KAAAiE,EAAA,CAAgBC,KAAMV,EAAKU,KACxBjD,SAAA,GAACC,IAAAiD,EAAA,CAAYC,MAAOf,IACnBnC,EAAAA,IAAA,KAAA,CAAGjB,UAAU,oCAAoCgB,SAAW,gBAE5DC,MAAA,MAAA,CAAIjB,UAAU,kCAEXgB,gBAAC0B,EACG,CAAA1B,SAAA,CAAAC,MAAC4B,EAAc,CAAAC,SAAO,EAClB9B,SAAAlB,EAAAC,KAAC8B,EACG,CAAAb,SAAA,GAACC,IAAAmD,EAAA,CAAStC,KAAM,OAChBb,IAAC,QAAKD,SAAa,8BAG1BgC,EACG,CAAAhC,SAAA,OAACiC,EACG,CAAAjC,SAAAC,EAAAA,IAACiC,EAAY,CAAAlC,SAAA,0BAEhBzC,EAAW,YAKxBuB,EAAAmB,IAACoD,EAAA,CACGC,UAAU,OACVb,UACAc,YAAa9D,MAAM,yBACnBJ,MAAO,cACPC,YAAa,2CAEhBkE,EAAQ,MAGrB"}