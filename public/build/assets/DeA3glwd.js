import{W as e,R as a,j as l,r as s,q as i}from"./BkIss81D.js";import{Q as t}from"./D32HZ0ZI.js";import{D as r}from"./BIsLNgKW.js";import{C as o,a as n,B as d}from"./DxqUrwa-.js";import{B as m}from"./csYYLMtM.js";import{P as c,a as x,b as p,C as h,c as u,d as f,e as j,f as v}from"./BVklXhgC.js";import{I as b}from"./CKk3M30F.js";import{L as g}from"./B6wB_56h.js";import{S as N,a as k}from"./DLMshidK.js";import{S as w,a as _,b as y,c as C,d as P,e as F,f as S}from"./DcpfJe-0.js";import{T as D}from"./D0MeK_U1.js";import{P as U}from"./D_XeKy0C.js";import{a as B}from"./40mWbfTR.js";import{c as G}from"./Bt8xBVJb.js";import{D as I,f as L,a as R,b as K,c as E,g as M,e as z}from"./SvokFcO8.js";import{T}from"./DnLgy7eu.js";import{u as Q}from"./tyXeoQjo.js";import{l as $}from"./BZtDV8eV.js";import{I as q}from"./DYzCf-6v.js";import"./BFSfD8zZ.js";import"./BFmsOwHv.js";import"./CYYuBjBZ.js";import"./Dt3uUqLY.js";import"./D7FRFEIm.js";import"./BEqwDVof.js";import"./BAAXcZSz.js";import"./COHDAjS6.js";import"./BGXVNWhb.js";import"./DoQTxwu1.js";import"./DPdBf6DS.js";import"./BrjccYWb.js";const J=({currentUser:s})=>{var i,t,r;const{data:d,setData:G,put:I}=e({id:s.id,name:s.name,email:s.email,nim:s.nim,prodi_id:s.prodi_id,pita:null==(i=s.penyakit)?void 0:i.pita,ket_penyakit:null==(t=s.penyakit)?void 0:t.ket_penyakit,bio:s.bio,_method:"put"}),[L,R]=a.useState(!1),[K,E]=a.useState(""),M=U.find((e=>{if(e.id===s.prodi_id)return e.value}));return l.jsxs("div",{className:"h-fit flex-1 w-full p-4 space-y-5 border rounded-md shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold tracking-tight",children:"Informasi Umum"}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx(g,{htmlFor:"nama-maba",className:"text-left",children:"Nama"}),l.jsx(b,{type:"text",id:"nama-maba",value:d.name,onChange:e=>G("name",e.target.value),placeholder:"Chandra Budi Wijaya",className:"mt-1"})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx(g,{htmlFor:"email-maba",className:"text-left",children:"Email"}),l.jsx(b,{type:"email",id:"email-maba",onChange:e=>G("email",e.target.value),value:d.email,placeholder:"12.chandra.099@pplkitera.com",className:"mt-1"})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx(g,{htmlFor:"nim-maba",className:"text-left",children:"NIM"}),l.jsx(b,{type:"text",id:"nim-maba",value:d.nim,onChange:e=>G("nim",e.target.value),placeholder:"124290020",className:"mt-1"})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx(g,{htmlFor:"prodi-maba",className:"text-left",children:"Prodi"}),l.jsxs(c,{open:L,onOpenChange:R,children:[l.jsx(x,{asChild:!0,children:l.jsxs(m,{variant:"outline",role:"combobox","aria-expanded":L,className:"justify-between w-full mt-1 font-normal",children:[K?null==(r=U.find((e=>e.value===K)))?void 0:r.label:`${(null==M?void 0:M.label)||"Pilih Prodi"}`,l.jsx(o,{className:"shrink-0 w-4 h-4 ml-2 opacity-50"})]})}),l.jsx(p,{children:l.jsxs(h,{children:[l.jsx(u,{placeholder:"Cari Prodi...",className:"h-9"}),l.jsx(f,{children:"Data prodi tidak ada."}),l.jsx(j,{children:l.jsxs(N,{className:"h-[calc(100vh-64px)]",children:[U.map((e=>l.jsxs(v,{value:e.value,onSelect:a=>{E(a===K?"":a),G("prodi_id",e.id),R(!1)},children:[e.label,l.jsx(n,{className:B("ml-auto h-4 w-4",K===e.value?"opacity-100":"opacity-0")})]},e.value))),l.jsx(k,{orientation:"vertical"})]})})]})})]})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx(g,{htmlFor:"bio-maba",className:"text-left",children:"Bio"}),l.jsx(D,{id:"bio-maba",value:d.bio,onChange:e=>G("bio",e.target.value),placeholder:"Pucuk ubi pucuk kangkung",className:"mt-1"})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx(g,{htmlFor:"pita-maba",className:"text-left",children:"Pita"}),l.jsxs(w,{defaultValue:d.pita||"",onValueChange:e=>{G("pita",e)},children:[l.jsx(_,{className:"w-full mt-1",children:l.jsx(y,{placeholder:"Pilih Pita"})}),l.jsx(C,{children:l.jsxs(P,{children:[l.jsx(F,{children:"Warna Pita"}),l.jsx(S,{value:"hijau",onClick:()=>{G("pita","hijau")},className:"text-green-600",children:"Hijau"}),l.jsx(S,{value:"kuning",onClick:()=>{G("pita","kuning")},className:"text-yellow-600",children:"Kuning"}),l.jsx(S,{value:"merah",onClick:()=>{G("pita","merah")},className:"text-red-600",children:"Merah"})]})})]})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx(g,{htmlFor:"riwayat-penyakit-maba",className:"text-left",children:"Riwayat Penyakit"}),l.jsx(b,{type:"text",id:"riwayat-penyakit-maba",value:d.ket_penyakit,onChange:e=>G("ket_penyakit",e.target.value),placeholder:"GERD (Gastroesophageal Reflux Disease)",className:"mt-1 capitalize"})]}),l.jsx("div",{className:"flex justify-end",children:l.jsx(m,{onClick:()=>{I(route("dashboard.user.edit-profil"))},children:"Simpan Data"})})]})},W=({currentUser:a})=>{const{data:s,setData:i,put:t}=e({id:a.id,new_password:"",confirm_new_password:"",_method:"put"});return l.jsxs("div",{className:"h-fit w-full p-4 space-y-5 border rounded-md shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold tracking-tight",children:"Reset Password"}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx(g,{htmlFor:"nama-maba",className:"text-left",children:"Password Baru"}),l.jsx(b,{type:"text",id:"nama-maba",value:s.new_password,onChange:e=>i("new_password",e.target.value),placeholder:"ex. 1234@Jamal#GG",className:"mt-1"})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx(g,{htmlFor:"email-maba",className:"text-left",children:"Konfirmasi Password"}),l.jsx(b,{type:"email",id:"email-maba",value:s.confirm_new_password,onChange:e=>i("confirm_new_password",e.target.value),placeholder:"ex. 1234@Jamal#GG",className:"mt-1"})]}),l.jsx("div",{className:"flex justify-end",children:l.jsx(m,{onClick:()=>{t(route("dashboard.user.edit-password"))},children:"Ubah Password"})})]})},O=({currentUser:a})=>{const{data:s,setData:i,put:t}=e({id:a.id,instagram_url:a.instagram_url,linkedin_url:a.linkedin_url,_method:"put"});return l.jsxs("div",{className:"p-4 space-y-5 border rounded-md shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold tracking-tight",children:"Sosial Media"}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx(g,{htmlFor:"instagram-maba",className:"text-left",children:"Instagram"}),l.jsx(b,{type:"text",id:"instagram-maba",value:s.instagram_url,onChange:e=>i("instagram_url",e.target.value),placeholder:"https://instagram.com/...",className:"mt-1"})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx(g,{htmlFor:"linkedin-maba",className:"text-left",children:"LinkedIn"}),l.jsx(b,{type:"text",id:"linkedin-maba",value:s.linkedin_url,onChange:e=>i("linkedin_url",e.target.value),placeholder:"https://linkedin.com/in/...",className:"mt-1"})]}),l.jsx("div",{className:"flex justify-end",children:l.jsx(m,{onClick:()=>{t(route("dashboard.user.edit-sosmed"))},children:"Simpan Data"})})]})},V=({currentUser:a})=>{const[i,t]=s.useState(null);console.log(a);const{data:r,setData:o,put:n}=e({id:a.id,sertif:"",_method:"put"}),d=G((async()=>{if(!/^https:\/\/(www\.)?\w+\.google\.com\/.*$/g.test(r.sertif))return void t("link harus dari Google Drive");let e=r.sertif.split("/")[5];(await fetch(`https://www.googleapis.com/drive/v2/files/${e}?key=AIzaSyB4-JCqVpt3dC5MlC0Q6yQOSYG0uysdvwc`)).ok?t(""):t("Link drive belum publik, silahkan coba lagi")}),100);return l.jsxs("div",{className:"p-4 space-y-5 border rounded-md shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold tracking-tight",children:"Tentang PPLK"}),a.kelompok?l.jsxs("div",{className:"flex w-full gap-2",children:[l.jsxs("div",{className:"flex flex-col w-full",children:[l.jsx(g,{htmlFor:"nama-kelompok-maba",className:"text-left",children:"Nama Kelompok"}),l.jsx(b,{type:"text",id:"nama-kelompok-maba",value:a.kelompok.nama_kelompok,disabled:!0,placeholder:"Nawasena",className:"mt-1"})]}),l.jsxs("div",{className:"flex flex-col w-full",children:[l.jsx(g,{htmlFor:"nomor-kelompok-maba",className:"text-left",children:"Nomor Kelompok"}),l.jsx(b,{type:"number",id:"nomor-kelompok-maba",value:a.kelompok.no_kelompok,disabled:!0,placeholder:"73",className:"mt-1 [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"})]})]}):null,l.jsxs("div",{className:"flex flex-col w-full",children:[l.jsx(g,{htmlFor:"score-game-individu-maba",className:"text-left",children:"Score Game Individu"}),l.jsx(b,{type:"number",id:"score-game-individu-maba",value:a.score,disabled:!0,placeholder:"73",className:"mt-1 [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"})]}),l.jsxs("div",{className:"flex flex-col w-full",children:[l.jsx(g,{htmlFor:"pilar-maba",className:"text-left",children:"Pilar"}),l.jsx(b,{type:"text",id:"pilar-maba",value:a.pilar?a.pilar.pilar_name:"Belum ada pilar",disabled:!0,placeholder:"Pilar User",className:"mt-1"})]}),l.jsxs("div",{className:"flex flex-col w-full",children:[l.jsx(g,{htmlFor:"serti-kelulusan-pplk-maba",className:"text-left",children:"Sertifikat Kelulusan PPLK"}),l.jsx(b,{type:"text",id:"serti-kelulusan-pplk-maba",value:a.link_sertif?a.link_sertif:r.sertif,placeholder:"https://drive.google.com/....",className:"mt-1",onChange:e=>{o("sertif",e.target.value),d()}}),i?l.jsx("span",{className:"text-red-500 text-[12px]",children:i}):""===i?l.jsx("span",{className:"text-[12px] text-green-500",children:"Link valid"}):null]}),l.jsx("div",{className:"flex justify-end",children:l.jsx(m,{onClick:()=>{n(route("dashboard.user.edit-sertif"))},disabled:!!i||!r.sertif,children:"Simpan Sertifikat"})})]})};function A({response:a}){const{toast:o}=Q(),{auth:n}=i().props,{flash:c}=i().props;s.useEffect((()=>{c.response&&(200===c.response.status?o({title:"Berhasil",description:c.response.message,variant:"default"}):o({title:"Gagal",description:c.response.message,variant:"destructive"}))}),[c,o]);const x=[{title:"Dashboard",link:"/dashboard"},{title:"Edit Data User",link:route("dashboard.user.edit",a.data.id)}],p=a.data,[h,u]=s.useState(null),[f,j]=s.useState(""),{data:v,setData:N,post:k}=e({id:p.id,photo:null,_method:"put"});return console.log(p.photo_profile_url),l.jsxs(l.Fragment,{children:[l.jsxs(r,{user:n.user,children:[l.jsx(d,{items:x}),l.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Edit Data User"}),l.jsxs("div",{className:"md:flex-row flex flex-col gap-2",children:[l.jsxs("div",{className:"md:mx-0 mx-auto",children:[l.jsx("div",{className:"w-[200px] h-[220px] border rounded-sm overflow-hidden",children:l.jsx("img",{src:p.photo_profile_url?p.photo_profile_url:$,alt:`${p.name} photo profile`,className:"w-full h-full bg-center bg-cover"})}),l.jsxs(I,{children:[l.jsx(L,{asChild:!0,children:l.jsx(m,{variant:"outline",className:"w-[200px] py-2 border mt-3",children:"Edit Foto Profile"})}),l.jsxs(R,{className:"sm:max-w-[425px]",children:[l.jsx(K,{children:l.jsxs(E,{children:["Edit Foto Profil ",p.name]})}),l.jsx("div",{className:"grid gap-4 py-4",children:l.jsxs("div",{className:"relative flex items-center justify-center mx-auto rounded-full",children:[l.jsx("div",{className:"w-36 h-36 flex items-center justify-center overflow-hidden border rounded-full",children:f?l.jsx("img",{src:f,alt:"preview-image-kelompok",className:"object-cover object-center w-full h-full"}):l.jsx("img",{src:p.photo_profile_url?p.photo_profile_url:$,alt:`${p.name} photo profile`,className:"object-cover object-center w-full h-full"})}),l.jsx(g,{htmlFor:"upload-logo-kelompok",children:l.jsx(q,{size:32,color:"black",className:"-mt-[1px] cursor-pointer absolute bottom-1 right-1 border shadow-lg bg-white rounded-full p-1"})}),l.jsx(b,{type:"file",onChange:e=>{const a=e.target.files[0];if(a){if(!a.type.startsWith("image"))return o({title:"Invalid File Type",description:"Tolong pilih file gambar.",variant:"destructive"}),u(null),N("photo",null),void j("");if(a.size>2048e3)return o({title:"File Too Large",description:"Pilih foto yang berukuran dibawah 2MB.",variant:"destructive"}),u(null),N("photo",null),void j("");u(a),j(URL.createObjectURL(a)),N("photo",a)}else u(null),N("photo",null),j("")},accept:"image/*",className:"hidden",id:"upload-logo-kelompok"})]})}),l.jsxs(M,{children:[l.jsx(z,{asChild:!0,children:l.jsx(m,{variant:"outline",children:"Batalkan"})}),l.jsx(z,{asChild:!0,children:l.jsx(m,{onClick:()=>{k(route("dashboard.user.edit-foto"))},children:"Simpan"})})]})]})]}),l.jsxs("div",{className:"w-[200px] mt-5",children:[l.jsx("h2",{className:"font-semibold text-center",children:"Kode QR"}),l.jsx("div",{className:"border",children:p.qrcode?l.jsx(t,{value:p.qrcode.code,size:200,includeMargin:!0,level:"H",width:500,height:500}):null})]})]}),l.jsxs("div",{className:"md:flex-row flex flex-col w-full gap-2",children:[l.jsxs("div",{className:"md:w-1/2 flex flex-col w-full gap-2",children:[l.jsx(J,{currentUser:p}),l.jsx(W,{currentUser:p})]}),l.jsxs("div",{className:"md:w-1/2 flex flex-col w-full gap-2",children:[1===p.role_id||2===p.role_id||3===p.role_id||4===p.role_id?l.jsx(O,{currentUser:p}):null,1===p.role_id||2===p.role_id||3===p.role_id||4===p.role_id?l.jsx(V,{currentUser:p}):null]})]})]}),l.jsx("div",{})]}),l.jsx(T,{})]})}export{A as default};
