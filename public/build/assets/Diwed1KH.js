import{r as e,e as t,j as a,Y as s,R as n}from"./B12UpaeG.js";import{D as r}from"./D_32WszD.js";import"./CR3KFVpn.js";import"./CiA0ZMBH.js";import"./BqwgHmnG.js";import"./xyeNXEpY.js";import"./CD8_GYEo.js";import"./CJzLH5NW.js";import"./8ZhlyoIR.js";import"./DQGzsZvF.js";import"./z08mKKfS.js";import"./C0u18CNn.js";function l(){var l;const[o,i]=e.useState("Petunjuk Soal"),[d,c]=e.useState(!1),[m,x]=e.useState(!1),[h,u]=e.useState(!1),[g,w]=e.useState(!1),[f,p]=e.useState(!1),[b,j]=e.useState(null),[v,y]=e.useState(null),[N,k]=e.useState("across"),[C,S]=e.useState({across:[],down:[]}),[W,R]=e.useState([]),[$,A]=e.useState(0),[L,E]=e.useState(!0),[H,T]=e.useState(""),[M,_]=e.useState(""),[P,B]=e.useState({correct:0,wrong:0}),[z,I]=e.useState(!0),[D,F]=e.useState(!1),[J,O]=e.useState({}),[X,Y]=e.useState([]),K=e.useRef(null),[U,G]=e.useState({across:[],down:[]}),[q,Q]=e.useState([]);e.useEffect((()=>{(async()=>{I(!0);try{const e=(await t.get("/api/admin/tesla/")).data.data;let a=0,s=0;e.forEach((e=>{var t,n;"mendatar"===e.tipe?(a=Math.max(a,e.start_row),s=Math.max(s,e.start_col+((null==(t=e.jawaban)?void 0:t.length)||0)-1)):"menurun"===e.tipe&&(a=Math.max(a,e.start_row+((null==(n=e.jawaban)?void 0:n.length)||0)-1),s=Math.max(s,e.start_col))}));const n=Math.max(a+1,s+1,10),r=e.filter((e=>"mendatar"===e.tipe)).map((e=>({number:e.nomor,clue:e.pertanyaan,answer:e.jawaban,direction:"across",startRow:e.start_row,startCol:e.start_col,isAnswered:!1}))),l=e.filter((e=>"menurun"===e.tipe)).map((e=>({number:e.nomor,clue:e.pertanyaan,answer:e.jawaban,direction:"down",startRow:e.start_row,startCol:e.start_col,isAnswered:!1}))),o=Array(n).fill(null).map((()=>Array(n).fill(null).map((()=>({letter:"",isBlack:!1,isSelected:!1,isHighlighted:!1,isCorrect:!1,isWrong:!1})))));e.forEach((e=>{e.start_row>=0&&e.start_row<n&&e.start_col>=0&&e.start_col<n&&(o[e.start_row][e.start_col].number=e.nomor)})),G({across:r,down:l}),Q(o)}catch{G({across:[],down:[]}),Q([])}I(!1)})()}),[]),e.useEffect((()=>{D&&(V(),E(!0),A(0))}),[D]),e.useEffect((()=>{if(!D)return;const e=setInterval((()=>{L&&A((e=>e+1))}),1e3);return()=>clearInterval(e)}),[L,D]);const V=()=>{I(!0),S({across:U.across.map((e=>({...e,isAnswered:!1}))),down:U.down.map((e=>({...e,isAnswered:!1})))}),R(q.map((e=>e.map((e=>({...e,letter:"",isSelected:!1,isHighlighted:!1,isCorrect:!1,isWrong:!1})))))),I(!1)},Z=()=>{const e=W.map((e=>e.map((e=>e.isWrong?{...e,letter:""}:e))));R(e),O({})},ee=e=>{const t=W.map((e=>e.map((e=>({...e,isHighlighted:!1,isSelected:!1,isWrong:!1})))));if("across"===e.direction){for(let a=e.startCol;a<e.startCol+e.answer.length;a++)a<t[e.startRow].length&&(t[e.startRow][a].isHighlighted=!0);t[e.startRow][e.startCol].isSelected=!0,j({row:e.startRow,col:e.startCol})}else{for(let a=e.startRow;a<e.startRow+e.answer.length;a++)a<t.length&&(t[a][e.startCol].isHighlighted=!0);t[e.startRow][e.startCol].isSelected=!0,j({row:e.startRow,col:e.startCol})}y(e),R(t)},te=async()=>{if(!H||!M||!v)return;const e=M.toUpperCase();if(e.length!==v.answer.length)return;let a="salah";try{const e=await t.post(`/api/admin/tesla/${v.number}`,{jawaban:M});a=e.data.hasil}catch{a="salah"}let s=[...W.map((e=>[...e]))],n=s.length,r=!1;if("across"===v.direction){v.startCol+v.answer.length-1>=n&&(r=!0)}else{v.startRow+v.answer.length-1>=n&&(r=!0)}if("benar"===a&&r){const e=Math.max("across"===v.direction?v.startCol+v.answer.length:n,"down"===v.direction?v.startRow+v.answer.length:n,n+1),t=()=>({letter:"",isBlack:!1,isSelected:!1,isHighlighted:!1,isCorrect:!1,isWrong:!1});for(;s.length<e;)s.push(Array(e).fill(null).map(t));for(let a=0;a<s.length;a++)for(;s[a].length<e;)s[a].push(t());n=e}if("across"===v.direction)for(let t=0;t<v.answer.length;t++){const e=v.startCol+t;e>=s[v.startRow].length||(s[v.startRow][e].isCorrect||(s[v.startRow][e].isWrong=!1,"salah"===a&&(s[v.startRow][e].letter="")))}else for(let t=0;t<v.answer.length;t++){const e=v.startRow+t;e>=s.length||(s[e][v.startCol].isCorrect||(s[e][v.startCol].isWrong=!1,"salah"===a&&(s[e][v.startCol].letter="")))}if("across"===v.direction)for(let t=0;t<v.answer.length;t++){const n=v.startCol+t;n>=s[v.startRow].length||("benar"===a?(s[v.startRow][n].letter=e[t]||"",s[v.startRow][n].isCorrect=!0,s[v.startRow][n].isWrong=!1):s[v.startRow][n].isCorrect||(s[v.startRow][n].letter="",s[v.startRow][n].isWrong=!0))}else for(let t=0;t<v.answer.length;t++){const n=v.startRow+t;n>=s.length||("benar"===a?(s[n][v.startCol].letter=e[t]||"",s[n][v.startCol].isCorrect=!0,s[n][v.startCol].isWrong=!1):s[n][v.startCol].isCorrect||(s[n][v.startCol].letter="",s[n][v.startCol].isWrong=!0))}S((e=>"across"===v.direction?{...e,across:e.across.map((e=>e.number===v.number?{...e,isAnswered:"benar"===a}:e))}:{...e,down:e.down.map((e=>e.number===v.number?{...e,isAnswered:"benar"===a}:e))})),R(s),O((e=>{const t=H;if("salah"===a)return{...e,[t]:""};{const a={...e};return delete a[t],a}})),_(""),T(""),y(null)},ae=e=>{const t=e%60;return`${Math.floor(e/60).toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`},se=(()=>{const e=C.across.length+C.down.length;if(!D||0===e)return{percentage:0,answered:0,total:e};const t=[...C.across,...C.down].filter((e=>{const t=e.answer;let a=!0;for(let s=0;s<t.length;s++){const n="across"===e.direction?e.startRow:e.startRow+s,r="across"===e.direction?e.startCol+s:e.startCol;if(!(n>=W.length||r>=W[0].length)&&W[n][r].letter!==t[s]){a=!1;break}}return a})).length;return{percentage:Math.round(t/e*100),answered:t,total:e}})(),ne=({isOpen:e,onClose:t})=>e?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4 md:hidden",children:a.jsxs("div",{className:"bg-white w-full max-w-sm rounded-lg overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-b from-[#BF4000] to-[#591E00] text-white",children:[a.jsx("h3",{className:"font-medium",children:"Progress"}),a.jsx("button",{onClick:t,className:"text-white text-xl font-bold",children:"×"})]}),a.jsxs("div",{className:"p-4",children:[a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-4",children:a.jsx("div",{className:"bg-orange-500 h-2 rounded-full",style:{width:`${se.percentage}%`}})}),a.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"font-bold text-gray-800",children:ae($)}),a.jsx("div",{children:"Waktu"})]}),a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"font-bold text-gray-800",children:[se.percentage,"%"]}),a.jsx("div",{children:"Selesai"})]}),a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"font-bold text-gray-800",children:[se.answered,"/",se.total]}),a.jsx("div",{children:"Pertanyaan"})]})]})]})]})}):null,re=({isOpen:e,onClose:t,correct:s,wrong:n})=>e?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-start justify-center p-4 pt-[15vh]",children:a.jsxs("div",{className:"bg-white w-full max-w-md mx-auto rounded-lg overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-b from-[#BF4000] to-[#591E00] text-white",children:[a.jsx("h3",{className:"font-medium",children:"Hasil Pemeriksaan"}),a.jsx("button",{onClick:t,className:"text-white text-xl font-bold",children:"×"})]}),a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex justify-between mb-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-green-600",children:s}),a.jsx("div",{className:"text-sm text-gray-600",children:"Benar"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-red-600",children:n}),a.jsx("div",{className:"text-sm text-gray-600",children:"Salah"})]})]}),a.jsx("div",{className:"text-center mt-4",children:a.jsx("div",{className:"text-lg font-medium text-gray-800",children:s===se.total?"Selamat! Anda telah menyelesaikan semua soal dengan benar!":s>n?"Bagus! Tingkatkan lagi jawaban yang salah!":"Coba periksa kembali jawaban Anda!"})}),a.jsx("button",{onClick:t,className:"mt-6 w-full bg-orange-500 text-white py-2 rounded-md hover:bg-orange-600",children:"Tutup"})]})]})}):null,le=()=>U.across.length>0?{clue:U.across[0],key:`across-${U.across[0].number}`}:U.down.length>0?{clue:U.down[0],key:`down-${U.down[0].number}`}:null,oe=async()=>{var e;try{const e=await t.get("/api/progres/");Array.isArray(e.data.data)&&Y(e.data.data.map((e=>({time:e.waktu,percentage:e.selesai,answered:parseInt(e.jawaban.split("/")[0]),total:parseInt(e.jawaban.split("/")[1]),date:new Date(e.tanggal).toLocaleString(),score:e.skor}))))}catch(a){401===(null==(e=null==a?void 0:a.response)?void 0:e.status)&&alert("Anda belum login. Silakan login untuk melihat progres Anda.")}},ie=e=>{if(!e)return null;const t=[...C.across,...C.down].sort(((e,t)=>e.number-t.number));for(let a=t.findIndex((t=>t.direction===e.direction&&t.number===e.number))+1;a<t.length;a++)if(!t[a].isAnswered)return t[a];for(let a=0;a<t.length;a++)if(!t[a].isAnswered)return t[a];return t[0]||null},[de,ce]=e.useState("DAY ?");e.useEffect((()=>{t.get("/api/day/").then((e=>{var t,a,s;"string"==typeof e.data?ce(e.data):(null==(t=e.data)?void 0:t.day)?ce(e.data.day):(null==(s=null==(a=e.data)?void 0:a.data)?void 0:s.change_day)&&ce(e.data.data.change_day)})).catch((()=>ce("DAY 1")))}),[]);const[me,xe]=e.useState(!1),he=e.useRef(null);return e.useEffect((()=>{if(!me)return;const e=e=>{he.current&&!he.current.contains(e.target)&&xe(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}),[me]),a.jsxs(a.Fragment,{children:[a.jsx(s,{title:"Tesla"}),a.jsxs(r,{children:[a.jsx("style",{children:"\n                html, body {\n                    overflow-x: hidden !important;\n                    width: 100% !important;\n                    max-width: 100vw !important;\n                    position: relative;\n                }\n                #app, #root {\n                    width: 100% !important;\n                    max-width: 100vw !important;\n                    overflow-x: hidden !important;\n                }\n            "}),a.jsx("div",{className:"fixed inset-0 z-0 bg-cover bg-center bg-no-repeat overflow-x-hidden",style:{backgroundImage:"url(/build/assets/CvYg2ffC.png)",width:"100vw",maxWidth:"100vw",left:0,right:0},children:a.jsx("div",{className:"absolute inset-0 bg-[#BF400099] mix-blend-multiply pointer-events-none"})}),a.jsxs("div",{className:"relative z-10 my-4 md:my-40 md:mx-auto w-full overflow-x-hidden",style:{maxWidth:1092,marginLeft:"auto",marginRight:"auto"},children:[a.jsx("div",{className:"bg-[#b84c19] w-full text-white p-3 md:p-4 md:mt-0 mt-32 rounded-lg mb-4 relative",style:{maxWidth:1092,marginLeft:"auto",marginRight:"auto"},children:a.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between w-full",children:a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:space-x-8 w-full",children:[a.jsxs("div",{className:"flex flex-row flex-wrap items-center justify-between w-full md:w-auto md:justify-start md:space-x-8 gap-y-2",style:{position:"relative",top:0,left:0},children:[a.jsx("div",{className:"flex flex-col items-center justify-center w-24",children:a.jsx("div",{className:"text-2xl md:text-3xl font-bold leading-tight",children:de})}),a.jsxs("div",{className:"flex flex-col items-center justify-center w-24",children:[a.jsx("div",{className:"text-2xl md:text-3xl font-bold leading-tight",children:10*se.answered}),a.jsx("div",{className:"text-xs md:text-sm",children:"Skor"})]}),a.jsxs("div",{className:"flex flex-col items-center justify-center w-24",children:[a.jsx("div",{className:"text-2xl md:text-3xl font-bold leading-tight",children:ae($)}),a.jsx("div",{className:"text-xs md:text-sm",children:"Waktu"})]}),a.jsxs("div",{className:"flex flex-col items-center justify-center w-24",children:[a.jsxs("div",{className:"text-2xl md:text-3xl font-bold leading-tight",children:[se.answered,"/",se.total]}),a.jsx("div",{className:"text-xs md:text-sm",children:"Pertanyaan"})]}),a.jsxs("div",{className:"flex flex-col items-center justify-center w-24",children:[a.jsxs("div",{className:"text-2xl md:text-3xl font-bold leading-tight",children:[se.percentage,"%"]}),a.jsx("div",{className:"text-xs md:text-sm",children:"Selesai"})]})]}),a.jsxs("div",{className:"flex flex-row flex-wrap items-center justify-center md:justify-end gap-2 md:space-x-5 mt-4 md:mt-0 w-full md:w-auto",children:[a.jsx("button",{onClick:D?()=>{const e=[...W];let t=0,a=0;const s={...C};for(const n of["across","down"])s[n]=s[n].map((s=>{let n=!0;const r=s.answer;for(let t=0;t<r.length;t++){const a="across"===s.direction?s.startRow:s.startRow+t,n="across"===s.direction?s.startCol+t:s.startCol;a>=e.length||n>=e[0].length||(e[a][n].isCorrect||(e[a][n].isWrong=!1))}for(let t=0;t<r.length;t++){const a="across"===s.direction?s.startRow:s.startRow+t,l="across"===s.direction?s.startCol+t:s.startCol;a>=e.length||l>=e[0].length||(e[a][l].letter!==r[t]?(e[a][l].isCorrect||(e[a][l].isWrong=!0),n=!1):(e[a][l].isCorrect=!0,e[a][l].isWrong=!1))}return n?t++:a++,{...s,isAnswered:n}}));R(e),S(s),B({correct:t,wrong:a}),u(!0)}:void 0,className:`bg-white shadow-lg text-orange-600 px-4 py-2 rounded text-xs md:text-sm font-medium transition-all duration-150\n                                        ${D?"hover:scale-105 hover:bg-orange-100":"opacity-50 cursor-not-allowed"}\n                                    `,style:{minWidth:110,minHeight:40},disabled:!D,children:"Cek Jawaban"}),a.jsx("button",{onClick:()=>w(!0),className:"bg-white shadow-lg text-orange-600 px-4 py-2 rounded text-xs md:text-sm font-medium transition-all duration-150 hover:scale-105 hover:bg-orange-100",style:{minWidth:110,minHeight:40},children:"Petunjuk"}),a.jsx("button",{onClick:()=>{oe(),p(!0)},className:"bg-white shadow-lg text-orange-600 px-4 py-2 rounded text-xs md:text-sm font-medium transition-all duration-150 hover:scale-105 hover:bg-orange-100",style:{minWidth:110,minHeight:40},children:"Riwayat"})]})]})})}),a.jsx("div",{className:"flex flex-col md:flex-row gap-4 w-full max-w-full overflow-x-hidden",children:a.jsxs("div",{className:"flex-1 order-2 md:order-1 mx-auto max-w-5xl md:w-full w-full overflow-x-hidden",children:[a.jsx("div",{className:"p-2 md:p-4 rounded-lg mb-4 w-full max-w-full overflow-x-hidden",children:D&&a.jsxs("div",{className:"w-full max-w-full overflow-x-hidden",style:{maxWidth:1092,marginLeft:"auto",marginRight:"auto"},children:[a.jsx("div",{className:"mb-4 bg-white p-4 rounded-lg shadow w-full",style:{maxWidth:"100%"},children:a.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[a.jsxs("div",{className:"flex-1 min-w-[220px] w-full",style:{maxWidth:"100%",position:"relative"},children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pilih Soal"}),a.jsxs("div",{className:"relative",ref:he,children:[a.jsxs("button",{type:"button",className:"w-full border border-gray-300 rounded-md px-3 py-2 bg-white text-left focus:outline-none focus:ring-2 focus:ring-orange-500 flex justify-between items-center",onClick:()=>xe((e=>!e)),children:[a.jsx("span",{children:H?(()=>{const[e,t]=H.split("-"),a=parseInt(t),s=("across"===e?C.across:C.down).find((e=>e.number===a));return s?`${s.number}. ${s.clue} (${s.answer.length} huruf)`:"-- Pilih Soal --"})():"-- Pilih Soal --"}),a.jsx("svg",{className:"w-4 h-4 ml-2 transition-transform "+(me?"rotate-180":""),fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})})]}),me&&a.jsx("div",{className:"absolute left-0 mt-2 w-full bg-white border border-gray-200 rounded-md shadow-lg z-30 max-h-72 overflow-y-auto animate-dropdown",style:{minWidth:220,boxShadow:"0 8px 24px 0 rgba(191,64,0,0.10)"},children:a.jsxs("div",{className:"py-1",children:[a.jsx("div",{className:"px-3 py-1 text-xs font-semibold text-orange-700 bg-orange-50 rounded-t",children:"Mendatar"}),0===C.across.length&&a.jsx("div",{className:"px-4 py-2 text-gray-400 text-sm",children:"Tidak ada soal mendatar"}),C.across.map((e=>a.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm hover:bg-orange-100 transition rounded "+(H===`across-${e.number}`?"bg-orange-50 font-semibold text-orange-700":""),onClick:()=>{T(`across-${e.number}`),y(e),k("across"),_(""),Z(),ee(e),xe(!1),setTimeout((()=>{K.current&&K.current.focus()}),0)},children:[e.number,". ",e.clue," ",a.jsxs("span",{className:"text-gray-400",children:["(",e.answer.length," huruf)"]})]},`across-${e.number}`))),a.jsx("div",{className:"px-3 py-1 text-xs font-semibold text-orange-700 bg-orange-50 mt-2 rounded-t",children:"Menurun"}),0===C.down.length&&a.jsx("div",{className:"px-4 py-2 text-gray-400 text-sm",children:"Tidak ada soal menurun"}),C.down.map((e=>a.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm hover:bg-orange-100 transition rounded "+(H===`down-${e.number}`?"bg-orange-50 font-semibold text-orange-700":""),onClick:()=>{T(`down-${e.number}`),y(e),k("down"),_(""),Z(),ee(e),xe(!1),setTimeout((()=>{K.current&&K.current.focus()}),0)},children:[e.number,". ",e.clue," ",a.jsxs("span",{className:"text-gray-400",children:["(",e.answer.length," huruf)"]})]},`down-${e.number}`)))]})}),a.jsx("style",{children:"\n                                                        @keyframes dropdown {\n                                                            0% { opacity: 0; transform: translateY(-10px);}\n                                                            100% { opacity: 1; transform: translateY(0);}\n                                                        }\n                                                        .animate-dropdown {\n                                                            animation: dropdown 0.18s cubic-bezier(.4,0,.2,1);\n                                                        }\n                                                    "})]})]}),H&&v&&a.jsxs("div",{className:"flex-1 min-w-[180px] w-full",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Jawaban (",v.answer.length," huruf)"]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{ref:K,type:"text",value:M,onChange:e=>_(e.target.value.toUpperCase()),maxLength:v.answer.length,className:"flex-1 border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-orange-500 uppercase bg-white",placeholder:`Masukkan ${v.answer.length} huruf`,onKeyDown:async e=>{if("Enter"===e.key&&M.length===v.answer.length){let e="salah";try{e=(await t.post(`/api/admin/tesla/${v.number}`,{jawaban:M})).data.hasil}catch{e="salah"}if(await te(),"benar"===e){const e=ie(v);e&&(T(`${e.direction}-${e.number}`),y(e),_(""),ee(e),setTimeout((()=>{K.current&&K.current.focus()}),0))}else T(`${v.direction}-${v.number}`),y(v),setTimeout((()=>{K.current&&K.current.focus()}),0)}}}),a.jsx("button",{onClick:async()=>{let e="salah";try{e=(await t.post(`/api/admin/tesla/${v.number}`,{jawaban:M})).data.hasil}catch{e="salah"}if(await te(),"benar"===e){const e=ie(v);e&&(T(`${e.direction}-${e.number}`),y(e),_(""),ee(e),setTimeout((()=>{K.current&&K.current.focus()}),0))}else T(`${v.direction}-${v.number}`),y(v),setTimeout((()=>{K.current&&K.current.focus()}),0)},className:"bg-orange-500 text-white px-4 py-2 rounded-md hover:bg-orange-600 transition-all duration-150",children:"Submit"})]})]})]})}),!z&&a.jsxs("div",{className:"bg-white rounded-lg shadow w-full max-w-full overflow-x-auto",style:{border:"1px solid #e5e7eb",display:"block",minWidth:0,width:"100%",padding:0,maxWidth:"100%",WebkitOverflowScrolling:"touch",overflowX:"auto"},onMouseDown:e=>{const t=e.currentTarget;let a=e.pageX-t.offsetLeft,s=t.scrollLeft;const n=e=>{const n=e.pageX-t.offsetLeft;t.scrollLeft=s-(n-a)},r=()=>{window.removeEventListener("mousemove",n),window.removeEventListener("mouseup",r)};window.addEventListener("mousemove",n),window.addEventListener("mouseup",r)},onTouchStart:e=>{const t=e.currentTarget;let a=e.touches[0].pageX-t.offsetLeft,s=t.scrollLeft;const n=e=>{const n=e.touches[0].pageX-t.offsetLeft;t.scrollLeft=s-(n-a)},r=()=>{window.removeEventListener("touchmove",n),window.removeEventListener("touchend",r)};window.addEventListener("touchmove",n),window.addEventListener("touchend",r)},children:[a.jsx("div",{className:"grid gap-0",style:{gridTemplateColumns:(null==(l=W[0])?void 0:l.length)?`repeat(${W[0].length}, 1fr)`:void 0,width:"100%",maxWidth:"100%"},children:(W.length>0?W:[]).map(((e,t)=>a.jsx(n.Fragment,{children:(e||[]).map(((e,s)=>a.jsxs("div",{className:`\n                                                                    border border-gray-400\n                                                                    flex items-center justify-center relative\n                                                                    text-xs md:text-base\n                                                                    transition-all\n                                                                    ${(null==e?void 0:e.isBlack)?"bg-black":""}\n                                                                    ${(null==e?void 0:e.isCorrect)?"bg-green-200":(null==e?void 0:e.isWrong)?"bg-red-200":(null==e?void 0:e.isSelected)?"bg-yellow-200":(null==e?void 0:e.isHighlighted)?"bg-yellow-100":"bg-gray-50"}\n                                                                    ${(null==e?void 0:e.letter)?"font-bold":""}\n                                                                    select-none\n                                                                `,style:{width:"100%",aspectRatio:"1 / 1",minWidth:32,minHeight:32,maxWidth:"100%",maxHeight:"100%",padding:0,boxSizing:"border-box",cursor:(null==e?void 0:e.number)?"pointer":"default",borderRadius:4,borderWidth:1,borderColor:(null==e?void 0:e.isCorrect)?"#22c55e":(null==e?void 0:e.isWrong)?"#ef4444":"#a3a3a3",backgroundColor:(null==e?void 0:e.isBlack)?"#000":(null==e?void 0:e.isCorrect)?"#bbf7d0":(null==e?void 0:e.isWrong)?"#fecaca":(null==e?void 0:e.isSelected)?"#fef08a":(null==e?void 0:e.isHighlighted)?"#fef9c3":"#f9fafb"},children:[(null==e?void 0:e.number)&&a.jsx("span",{className:"absolute top-0 left-0 text-[10px] text-gray-800 pl-0.5 pt-0.5 leading-none cursor-pointer select-none",style:{zIndex:2,background:"rgba(255,255,255,0.7)",borderRadius:2,minWidth:12,textAlign:"left",pointerEvents:"auto"},onClick:()=>{if(!D)return;const e=((e,t)=>{let a=C.across.find((a=>a.startRow===e&&a.startCol===t));return a||(a=C.down.find((a=>a.startRow===e&&a.startCol===t)),a||null)})(t,s);e&&(T(`${e.direction}-${e.number}`),ee(e))},children:e.number}),a.jsx("span",{className:""+((null==e?void 0:e.isSelected)?"text-black font-bold":"text-gray-800"),style:{zIndex:1,width:"100%",textAlign:"center",fontSize:"1rem",lineHeight:"1.5rem",position:"relative"},children:(null==e?void 0:e.letter)||""})]},`${t}-${s}`)))},t)))}),a.jsx("style",{children:"\n                                                .grid::-webkit-scrollbar {\n                                                    display: none !important;\n                                                    width: 0 !important;\n                                                    height: 0 !important;\n                                                    background: transparent !important;\n                                                }\n                                                /* Hide scrollbar for the board container */\n                                                .bg-white.rounded-lg.shadow::-webkit-scrollbar {\n                                                    display: none !important;\n                                                    width: 0 !important;\n                                                    height: 0 !important;\n                                                    background: transparent !important;\n                                                }\n                                                .bg-white.rounded-lg.shadow {\n                                                    -ms-overflow-style: none;  /* IE and Edge */\n                                                    scrollbar-width: none;     /* Firefox */\n                                                }\n                                                "})]})]})}),a.jsxs("div",{className:"flex flex-row flex-wrap gap-2 justify-center items-center",children:[D?a.jsx("button",{onClick:()=>{S({across:U.across.map((e=>({...e,isAnswered:!1}))),down:U.down.map((e=>({...e,isAnswered:!1})))}),R(q.map((e=>e.map((e=>({...e,letter:"",isSelected:!1,isHighlighted:!1,isCorrect:!1,isWrong:!1})))))),j(null),y(null),T(""),_(""),A(0),E(!0),F(!0),O({}),B({correct:0,wrong:0});const e=le();e?(T(e.key),y(e.clue),setTimeout((()=>{ee(e.clue),K.current&&K.current.focus()}),0)):(T(""),y(null))},className:"bg-white shadow-lg text-orange-600 px-4 py-2 rounded text-xs md:text-sm font-medium transition-all duration-150 hover:scale-105 hover:bg-orange-100",style:{minWidth:110,minHeight:40,transition:"transform 0.15s",fontWeight:500,boxShadow:"0 2px 8px 0 rgba(191,64,0,0.08)"},children:"Mulai Dari Awal"}):a.jsx("button",{onClick:()=>{if(z)return;S({across:U.across.map((e=>({...e,isAnswered:!1}))),down:U.down.map((e=>({...e,isAnswered:!1})))}),R(q.map((e=>e.map((e=>({...e,letter:"",isSelected:!1,isHighlighted:!1,isCorrect:!1,isWrong:!1})))))),F(!0),A(0),E(!0),j(null),y(null),_("");const e=le();e?(T(e.key),y(e.clue),setTimeout((()=>{ee(e.clue)}),0)):(T(""),y(null))},className:"bg-gradient-to-r from-orange-500 to-[#b84c19] text-white font-bold text-lg rounded-xl shadow-lg px-10 py-3 transition-all duration-200 hover:scale-105 hover:from-orange-600 hover:to-[#a03c15] focus:outline-none"+(z?" opacity-50 cursor-not-allowed":""),style:{minWidth:180,minHeight:56,letterSpacing:1,margin:"0 auto",display:"block"},disabled:z,children:"Mulai"}),D&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>{E((e=>!e))},className:"bg-white shadow-lg text-orange-600 px-4 py-2 rounded text-xs md:text-sm font-medium transition-all duration-150 hover:scale-105 hover:bg-orange-100",style:{minWidth:110,minHeight:40,transition:"transform 0.15s",fontWeight:500,boxShadow:"0 2px 8px 0 rgba(191,64,0,0.08)"},children:L?"Pause":"Lanjutkan"}),a.jsx("button",{onClick:async()=>{var e;try{await t.post("/api/progres/",{tanggal:(new Date).toISOString(),waktu:$,selesai:se.percentage,jawaban:`${se.answered}/${se.total}`,skor:10*se.answered})}catch(a){401===(null==(e=null==a?void 0:a.response)?void 0:e.status)&&alert("Anda belum login. Silakan login untuk menyimpan progres.")}Y((e=>[{time:$,percentage:se.percentage,answered:se.answered,total:se.total,date:(new Date).toLocaleString(),score:10*se.answered},...e].slice(0,6))),await oe(),F(!1),A(0),E(!0),j(null),y(null),T(""),_(""),R([]),S({across:[],down:[]}),O({})},className:"bg-white shadow-lg text-orange-600 px-4 py-2 rounded text-xs md:text-sm font-medium transition-all duration-150 hover:scale-105 hover:bg-orange-100",style:{minWidth:110,minHeight:40,transition:"transform 0.15s",fontWeight:500,boxShadow:"0 2px 8px 0 rgba(191,64,0,0.08)"},children:"Simpan Progres"})]})]})]})})]}),a.jsx(ne,{isOpen:m,onClose:()=>x(!1)}),a.jsx(re,{isOpen:h,onClose:()=>u(!1),correct:P.correct,wrong:P.wrong}),g&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-start justify-center p-4 pt-[15vh]",children:a.jsxs("div",{className:"bg-white w-full max-w-md mx-auto rounded-lg overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-b from-[#BF4000] to-[#591E00] text-white",children:[a.jsx("h3",{className:"font-medium",children:"Petunjuk Bermain"}),a.jsx("button",{onClick:()=>w(!1),className:"text-white text-xl font-bold",children:"×"})]}),a.jsx("div",{className:"p-6",children:a.jsxs("ol",{className:"list-decimal pl-5 space-y-2 text-sm text-gray-700",children:[a.jsx("li",{children:"Pilih soal dari dropdown atau daftar soal"}),a.jsx("li",{children:"Masukkan jawaban pada kolom input"}),a.jsx("li",{children:"Tekan Submit untuk mengisi jawaban"}),a.jsx("li",{children:"Jawaban benar akan berwarna hijau"}),a.jsx("li",{children:"Jawaban salah akan berwarna merah"}),a.jsx("li",{children:'Tekan "Check Jawaban" untuk memeriksa semua jawaban'}),a.jsx("li",{children:'Tekan "Simpan Progres" untuk menyimpan progres permainan'})]})})]})}),f&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-start justify-center p-4 pt-[15vh]",children:a.jsxs("div",{className:"bg-white w-full max-w-md mx-auto rounded-lg overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-b from-[#BF4000] to-[#591E00] text-white",children:[a.jsx("h3",{className:"font-medium",children:"Riwayat Progres"}),a.jsx("button",{onClick:()=>p(!1),className:"text-white text-xl font-bold",children:"×"})]}),a.jsx("div",{className:"p-6",children:X.length>0?a.jsxs("div",{className:"overflow-y-auto",style:{maxHeight:320,overflowX:"auto"},children:[a.jsxs("table",{className:"min-w-full text-sm text-gray-700 table-auto",style:{width:"100%"},children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-2 py-1 text-left whitespace-nowrap",children:"Tanggal"}),a.jsx("th",{className:"px-2 py-1 text-left whitespace-nowrap",children:"Waktu"}),a.jsx("th",{className:"px-2 py-1 text-left whitespace-nowrap",children:"Selesai"}),a.jsx("th",{className:"px-2 py-1 text-left whitespace-nowrap",children:"Jawaban"}),a.jsx("th",{className:"px-2 py-1 text-left whitespace-nowrap",children:"Skor"})]})}),a.jsx("tbody",{children:X.map(((e,t)=>a.jsxs("tr",{className:"border-t",children:[a.jsx("td",{className:"px-2 py-1 break-words","data-label":"Tanggal",children:e.date}),a.jsx("td",{className:"px-2 py-1 break-words","data-label":"Waktu",children:ae(e.time)}),a.jsxs("td",{className:"px-2 py-1 break-words","data-label":"Selesai",children:[e.percentage,"%"]}),a.jsxs("td",{className:"px-2 py-1 break-words","data-label":"Jawaban",children:[e.answered,"/",e.total]}),a.jsx("td",{className:"px-2 py-1 break-words","data-label":"Skor",children:"number"==typeof e.score?e.score:10*e.answered})]},t)))})]}),a.jsx("style",{children:'\n            @media (max-width: 640px) {\n                table, thead, tbody, th, td, tr {\n                    display: block;\n                    width: 100%;\n                }\n                thead {\n                    display: none;\n                }\n                tbody tr {\n                    margin-bottom: 12px;\n                    border: none;\n                    background: #fff;\n                    box-shadow: 0 1px 4px rgba(0,0,0,0.04);\n                    border-radius: 8px;\n                    padding: 8px 0;\n                }\n                td {\n                    padding: 8px 12px;\n                    border: none;\n                    position: relative;\n                    min-width: 0;\n                    word-break: break-word;\n                }\n                td[data-label]:before {\n                    content: attr(data-label) ": ";\n                    font-weight: 600;\n                    color: #b84c19;\n                    display: inline;\n                    margin-right: 4px;\n                    font-size: 0.95em;\n                }\n            }\n        '})]}):a.jsx("div",{className:"text-center text-gray-500",children:"Belum ada history progress."})}),"                    "]})})]})]})}export{l as default};
