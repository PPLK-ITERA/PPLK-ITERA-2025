{"version":3,"file":"B19DtDkY.js","sources":["../../../resources/js/Pages/Dashboard/cui/izin/Page.tsx"],"sourcesContent":["import { format } from \"date-fns\";\nimport { PageProps } from \"vendor/laravel/breeze/stubs/inertia-react-ts/resources/js/types\";\n\nimport React, { useEffect, useState } from \"react\";\n\nimport { router, useForm, usePage } from \"@inertiajs/react\";\n\nimport { ArrowLeft } from \"lucide-react\";\n\nimport DashboardLayout from \"@/Layouts/DashboardLayout\";\n\nimport { Breadcrumbs } from \"@/Components/ui/breadcrumbs\";\nimport { Button } from \"@/Components/ui/button\";\nimport { Input } from \"@/Components/ui/input\";\nimport { Separator } from \"@/Components/ui/separator\";\nimport { Toaster } from \"@/Components/ui/toaster\";\nimport { useToast } from \"@/Components/ui/use-toast\";\n\nimport { checkImageExists } from \"@/lib/utils\";\n\nconst breadcrumbItems = [\n  { title: \"Dashboard\", link: \"/dashboard\" },\n  { title: \"CUI\", link: \"/dashboard/cui\" },\n  { title: \"Izin\", link: \"/dashboard/cui/izin\" },\n];\n\nfunction TextBox({ value, label }: { value: string; label: string }) {\n  return (\n    <div className=\"flex items-center gap-2\">\n      <p className=\"outline outline-1 px-2 py-1 rounded-full\">{label}</p>\n      <p className=\"outline outline-1 px-2 py-1 rounded-full\">{value}</p>\n    </div>\n  );\n}\n\nfunction DateTimeBox({ value, label }: { value: string; label: string }) {\n  return (\n    <div className=\" flex items-center gap-2\">\n      <div className=\"outline outline-1 outline-black/30 w-40 px-2 py-1 font-medium bg-gray-200 rounded-md\">\n        {label}\n      </div>\n      {value ? format(value, \"dd/MM/yyyy HH:mm\") : \"-\"}\n    </div>\n  );\n}\n\nfunction StatusPita({ pita, riwayat }: { pita: string; riwayat: string }) {\n  return (\n    <>\n      {pita === \"hijau\" ? (\n        <div className=\"flex items-center justify-center p-2 bg-green-500 rounded-lg\">\n          <p className=\"text-lg font-bold text-white\">Pita Hijau</p>\n        </div>\n      ) : pita === \"kuning\" ? (\n        <div className=\"flex items-center justify-center p-2 bg-yellow-500 rounded-lg\">\n          <p className=\"text-lg font-bold text-white\">Pita Kuning</p>\n        </div>\n      ) : (\n        <div className=\"flex items-center justify-center p-2 bg-red-500 rounded-lg\">\n          <p className=\"text-lg font-bold text-white\">Pita Merah</p>\n        </div>\n      )}{\" \"}\n      <div className=\" flex items-center gap-2\">\n        <div className=\"outline outline-1 outline-black/30 w-40 px-2 py-1 font-medium bg-gray-200 rounded-md\">\n          Riwayat Penyakit\n        </div>\n        {riwayat}\n      </div>\n    </>\n  );\n}\n\nfunction Page({ auth, data, flash }) {\n  const {\n    data: formData,\n    setData: setFormData,\n    post,\n    patch,\n    processing,\n  } = useForm({\n    ket_izin: \"\",\n  });\n  const { toast } = useToast();\n  const [imageSrc, setImageSrc] = useState<string | null>(null);\n\n  const testImage = async () => {\n    const url = data.photo_profile_url; // Replace with your image URL\n    const defaultUrl =\n      \"https://upload.wikimedia.org/wikipedia/commons/7/7c/Profile_avatar_placeholder_large.png\"; // Replace with your default image URL\n    const finalUrl = await checkImageExists(url, defaultUrl);\n    setImageSrc(finalUrl as string);\n  };\n\n  React.useEffect(() => {\n    if (flash.response) {\n      if (flash.response.status === 200) {\n        toast({\n          title: \"Berhasil\",\n          description: flash.response.message,\n          variant: \"default\",\n        });\n      } else {\n        toast({\n          title: \"Gagal\",\n          description: flash.response.message,\n          variant: \"destructive\",\n        });\n      }\n      setFormData(\"ket_izin\", \"\");\n    }\n  }, [flash, toast]);\n\n  useEffect(() => {\n    testImage();\n  }, []);\n\n  const handleIzin = () => {\n    post(route(\"cui.izin\", data.qr_code));\n  };\n\n  const handleCabutIzin = () => {\n    patch(route(\"cui.destroy\", data.qr_code));\n  };\n\n  return (\n    <>\n      <DashboardLayout user={auth.user}>\n        <div className=\"flex items-center justify-between space-y-2\">\n          <h2 className=\"text-3xl font-bold tracking-tight\">\n            Izin Peserta CUI\n          </h2>\n        </div>\n\n        <Breadcrumbs items={breadcrumbItems} />\n        <Separator />\n        <Button\n          variant=\"outline\"\n          onClick={() => router.replace(route(\"dashboard.cui\"))}\n        >\n          <ArrowLeft className=\"mr-2\" /> Kembali\n        </Button>\n        <div className=\"md:flex-row md:items-start flex flex-col items-center justify-center gap-4\">\n          <img\n            className=\"h-96 drop-shadow-lg object-cover w-64 rounded-lg\"\n            src={\n              imageSrc ??\n              \"https://upload.wikimedia.org/wikipedia/commons/7/7c/Profile_avatar_placeholder_large.png\"\n            }\n            alt=\"Foto Profil\"\n          />\n          <div className=\"outline outline-1 outline-black/30 flex flex-col w-full gap-2 p-2 ml-3 rounded-md\">\n            <p className=\"text-lg font-bold\">Deskripsi</p>\n            <TextBox value={data.nama} label=\"Nama\" />\n            <TextBox value={data.nim} label=\"NIM\" />\n            <TextBox value={data.prodi} label=\"Prodi\" />\n            <Separator />\n\n            <div className=\"flex items-center gap-2\">\n              <p className=\"text-lg font-bold\">Status</p>\n              <p className=\"outline bg-slate-200 outline-black/30 outline-1 px-2 font-medium uppercase rounded-md\">\n                {data.status}\n              </p>\n            </div>\n            <StatusPita pita={data.pita} riwayat={data.riwayat} />\n            <DateTimeBox label={\"Waktu Hadir\"} value={data.waktu_hadir} />\n            <DateTimeBox label={\"Waktu Izin\"} value={data.waktu_izin} />\n            <DateTimeBox\n              label={\"Waktu Selesai Izin\"}\n              value={data.selesai_izin}\n            />\n          </div>\n\n          <div className=\"outline outline-1 outline-black/30 flex flex-col w-full gap-2 p-2 ml-3 rounded-md\">\n            <p className=\"text-lg font-bold\">Atur Izin</p>\n            <Separator />\n            {data.status === \"hadir\" ? (\n              <div className=\"flex flex-col gap-2\">\n                <Input\n                  onChange={(e) => setFormData(\"ket_izin\", e.target.value)}\n                  value={formData.ket_izin}\n                  placeholder=\"Keterangan\"\n                />\n\n                <Button\n                  className=\"w-full\"\n                  disabled={processing}\n                  onClick={handleIzin}\n                >\n                  Submit\n                </Button>\n              </div>\n            ) : (\n              <div>\n                <p>\n                  <span className=\"font-medium\">Keterangan izin</span>\n                  <br />\n                  {data.ket_izin}\n                </p>\n                <Separator className=\"my-3\" />\n                <Button\n                  className=\"w-full\"\n                  disabled={processing}\n                  onClick={handleCabutIzin}\n                >\n                  Cabut Izin\n                </Button>\n              </div>\n            )}\n          </div>\n        </div>\n      </DashboardLayout>\n      <Toaster />\n    </>\n  );\n}\n\nexport default Page;\n"],"names":["breadcrumbItems","title","link","TextBox","value","label","jsxs","className","children","jsx","DateTimeBox","format","StatusPita","pita","riwayat","Fragment","Page","auth","data","flash","formData","setData","setFormData","post","patch","processing","useForm","ket_izin","toast","useToast","imageSrc","setImageSrc","useState","React","useEffect","response","status","description","message","variant","async","url","photo_profile_url","finalUrl","checkImageExists","testImage","DashboardLayout","user","Breadcrumbs","items","Separator","Button","onClick","router","replace","route","ArrowLeft","src","alt","nama","nim","prodi","waktu_hadir","waktu_izin","selesai_izin","Input","onChange","e","target","placeholder","disabled","qr_code","Toaster"],"mappings":"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"}