{"version":3,"file":"BLlZX-hk.js","sources":["../../../resources/js/Components/dashboard/game-offline/Dapmen.tsx","../../../resources/js/Pages/Dashboard/game-offline/Page.tsx"],"sourcesContent":["import { QRCodeSVG } from \"qrcode.react\";\n\nimport React, { useState } from \"react\";\n\nimport { useForm } from \"@inertiajs/react\";\n\nimport { Button } from \"@/Components/ui/button\";\n\ninterface DapmenProps {\n    userId?: number;\n    score?: number;\n}\n\nexport default function Dapmen({ userId, score }: DapmenProps) {\n    const [loading, setLoading] = useState(false);\n    const { data, setData } = useForm({\n        code: \"\",\n        qrUrl: \"\",\n    });\n\n    const fetchQR = async () => {\n        setLoading(true);\n\n        const response = await fetch(route(\"dashboard.poin.qrcode\", userId));\n        const json = await response.json();\n        setData(json.data);\n\n        setLoading(false);\n    };\n\n    return (\n        <>\n            <p>\n                Gunakan fitur ini untuk generate QR kelompok anda untuk di scan\n                oleh <span className=\"font-bold\">Korlap</span>\n            </p>\n\n            <div className=\"w-fit p-2 text-white bg-green-600 rounded-md\">\n                <p>Score Kelompok : {score}</p>\n            </div>\n\n            <div className=\"flex flex-col items-center w-full gap-10\">\n                <div className=\"w-fit\">\n                    <p className=\"text-center\">\n                        Tunjukkan QR Code ini ke{\" \"}\n                        <span className=\"font-bold\">Korlap</span>\n                    </p>\n\n                    <div className=\"aspect-square bg-white border flex justify-center items-center mt-5 w-[300px] h-[300px] rounded-md\">\n                        {data.qrUrl === \"\" ? null : loading ? (\n                            <p>Loading...</p>\n                        ) : (\n                            // <QRCode size={256} value={data.code} />\n                            <QRCodeSVG\n                                value={data.code}\n                                // imageSettings={{\n                                //     src: \"https://kartatera.my.id/build/assets/D98J2HoG.png\",\n                                //     height: 60,\n                                //     width: 60,\n                                //     excavate: true,\n                                // }}\n                                size={256}\n                                includeMargin={false}\n                            />\n                        )}\n                    </div>\n                </div>\n\n                <Button\n                    onClick={() => {\n                        fetchQR();\n                    }}\n                >\n                    Generate QR Kelompok\n                </Button>\n            </div>\n        </>\n    );\n}\n","import { IDetectedBarcode, Scanner, outline } from \"@yudiel/react-qr-scanner\";\n\nimport React, { useEffect, useState } from \"react\";\n\nimport { useForm } from \"@inertiajs/react\";\n\nimport DashboardLayout from \"@/Layouts/DashboardLayout\";\n\nimport Dapmen from \"@/Components/dashboard/game-offline/Dapmen\";\nimport { Breadcrumbs } from \"@/Components/ui/breadcrumbs\";\nimport { Button } from \"@/Components/ui/button\";\nimport { Toaster } from \"@/Components/ui/toaster\";\n\nimport { useFlashToast } from \"@/lib/hooks/useFlashToast\";\n\nconst breadcrumbItems = [\n    { title: \"Dashboard\", link: \"/dashboard\" },\n    { title: \"Game Offline\", link: \"/dashboard/game-offline\" },\n];\n\nexport default function Page({ auth, response }) {\n    const [score, setScore] = useState(0);\n\n    const { data, setData, post, processing } = useForm({\n        qr_code: \"\",\n    });\n\n    const [loading, setLoading] = useState(false);\n\n    useFlashToast();\n\n    const handleScan = (data: string) => {\n        if (data) {\n            setData(\"qr_code\", data);\n        }\n    };\n\n    const getDataScore = async () => {\n        const response = await fetch(route(\"dashboard.poin.score\"), {\n            method: \"GET\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n            },\n        });\n\n        const getResult = await response.json();\n        setScore(getResult.response.data.total_score);\n    };\n\n    useEffect(() => {\n        getDataScore();\n    }, []);\n\n    useEffect(() => {\n        if (data.qr_code) {\n            post(route(\"dashboard.poin.store\"));\n        }\n    }, [data.qr_code]);\n\n    return (\n        <>\n            <DashboardLayout user={auth.user}>\n                <Breadcrumbs items={breadcrumbItems} />\n                <h2 className=\"text-3xl font-bold tracking-tight\">\n                    Game Offline\n                </h2>\n\n                {auth.user.role_id === 2 ||\n                auth.user.role_id === 3 ||\n                auth.user.role_id === 4 ? (\n                    <>\n                        {score ? (\n                            <Dapmen userId={auth.user.id} score={score} />\n                        ) : null}\n                    </>\n                ) : null}\n\n                {auth.user.role_id === 6 ? (\n                    <>\n                        <p>\n                            Gunakan fitur ini untuk scan QR kelompok dari{\" \"}\n                            <span className=\"font-bold\">Dapmen</span> yang\n                            menang pada game offline\n                        </p>\n\n                        <div className=\"flex flex-col items-center justify-center w-full\">\n                            <div className=\"md:w-96 border\">\n                                <Scanner\n                                    onScan={function (\n                                        detectedCodes: IDetectedBarcode[],\n                                    ): void {\n                                        handleScan(\n                                            detectedCodes.at(-1)?.rawValue ||\n                                                \"\",\n                                        );\n                                    }}\n                                    components={{\n                                        finder: true,\n                                        tracker: outline,\n                                        zoom: true,\n                                        torch: true,\n                                    }}\n                                    allowMultiple={true}\n                                    scanDelay={2000}\n                                    paused={loading}\n                                    styles={{\n                                        container: {\n                                            width: \"100%\",\n                                        },\n                                    }}\n                                />\n                            </div>\n\n                            <Button className=\"mt-5\">Scan QR Kelompok</Button>\n                        </div>\n                    </>\n                ) : null}\n            </DashboardLayout>\n\n            <Toaster />\n        </>\n    );\n}\n"],"names":["Dapmen","userId","score","loading","setLoading","useState","data","setData","useForm","code","qrUrl","jsxRuntimeExports","jsxs","Fragment","children","jsx","className","QRCodeSVG","value","size","includeMargin","Button","onClick","async","response","fetch","route","json","breadcrumbItems","title","link","Page","auth","setScore","post","processing","qr_code","useEffect","method","headers","getResult","total_score","DashboardLayout","user","Breadcrumbs","items","role_id","id","Scanner","onScan","detectedCodes","_a","at","rawValue","components","finder","tracker","outline","zoom","torch","allowMultiple","scanDelay","paused","styles","container","width","Toaster"],"mappings":"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"}