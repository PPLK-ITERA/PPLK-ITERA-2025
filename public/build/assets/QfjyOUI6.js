import{W as e,R as a,j as l,r as s,q as t}from"./DRj7zCk5.js";import{Q as i}from"./CpMpw2Nu.js";import{D as r}from"./DqEJDm8Y.js";import{C as o,a as n,B as d}from"./LAGLuRE0.js";import{B as m}from"./DmFNtMt-.js";import{P as c,a as x,b as h,C as p,c as u,d as f,e as j,f as b}from"./Rxmovb5F.js";import{I as g}from"./CcBQjGmC.js";import{L as v}from"./v9q0UlpS.js";import{S as w,a as N}from"./BCp3v9py.js";import{S as k,a as _,b as y,c as C,d as F,e as E,f as P}from"./Cl-eSBhv.js";import{T as D}from"./D2CuH27Z.js";import{P as S}from"./CXoqpdji.js";import{a as U}from"./CO9J5KBW.js";import{c as B}from"./B5m-u2oH.js";import{D as L,f as G,a as I,b as K,c as R,g as T,e as $}from"./OT69iqhp.js";import{T as M}from"./C8STEURr.js";import{u as z}from"./BDMF9HX3.js";import{u as W}from"./Qi31zJ-b.js";import{l as H}from"./z08mKKfS.js";import{I as J}from"./CQGzpCJP.js";import"./C7v3s08o.js";import"./BRJeEc08.js";import"./fJglnZgp.js";import"./DExNkz5Y.js";import"./CFUqI47n.js";import"./BQfcUBB5.js";import"./Ule_K5uO.js";import"./Dp938rFo.js";import"./C0u18CNn.js";import"./BSbnqClG.js";import"./DPdBf6DS.js";const V=({currentUser:s})=>{var t,i,r;const{data:d,setData:B,put:L}=e({id:s.id,name:s.name,email:s.email,nim:s.nim,prodi_id:s.prodi_id,pita:null==(t=s.penyakit)?void 0:t.pita,ket_penyakit:null==(i=s.penyakit)?void 0:i.ket_penyakit,bio:s.bio,_method:"put"}),[G,I]=a.useState(!1),[K,R]=a.useState(""),T=S.find((e=>{if(e.id===s.prodi_id)return e.value}));return l.jsxs("div",{className:"h-fit flex-1 w-full p-4 space-y-5 rounded-xl shadow-md bg-[linear-gradient(137.47deg,_#E06C32_11.08%,_#FD8E57_42.04%,_#BE3F00_95.9%)]",children:[l.jsx("h2",{className:"text-xl font-semibold text-white tracking-tight",children:"Informasi Umum"}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx(v,{htmlFor:"nama-maba",className:"text-left text-white",children:"Nama"}),l.jsx(g,{type:"text",id:"nama-maba",value:d.name,onChange:e=>B("name",e.target.value),placeholder:"Chandra Budi Wijaya",className:"mt-1"})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx(v,{htmlFor:"email-maba",className:"text-left text-white",children:"Email"}),l.jsx(g,{type:"email",id:"email-maba",onChange:e=>B("email",e.target.value),value:d.email,placeholder:"12.chandra.099@pplkitera.com",className:"mt-1"})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx(v,{htmlFor:"nim-maba",className:"text-left text-white",children:"NIM"}),l.jsx(g,{type:"text",id:"nim-maba",value:d.nim,onChange:e=>B("nim",e.target.value),placeholder:"124290020",className:"mt-1"})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx(v,{htmlFor:"prodi-maba",className:"text-left text-white",children:"Prodi"}),l.jsxs(c,{open:G,onOpenChange:I,children:[l.jsx(x,{asChild:!0,children:l.jsxs(m,{variant:"outline",role:"combobox","aria-expanded":G,className:"justify-between w-full mt-1 font-normal",children:[K?null==(r=S.find((e=>e.value===K)))?void 0:r.label:`${(null==T?void 0:T.label)||"Pilih Prodi"}`,l.jsx(o,{className:"shrink-0 w-4 h-4 ml-2 opacity-50"})]})}),l.jsx(h,{children:l.jsxs(p,{children:[l.jsx(u,{placeholder:"Cari Prodi...",className:"h-9"}),l.jsx(f,{children:"Data prodi tidak ada."}),l.jsx(j,{children:l.jsxs(w,{className:"h-[calc(100vh-64px)]",children:[S.map((e=>l.jsxs(b,{value:e.value,onSelect:a=>{R(a===K?"":a),B("prodi_id",e.id),I(!1)},children:[e.label,l.jsx(n,{className:U("ml-auto h-4 w-4",K===e.value?"opacity-100":"opacity-0")})]},e.value))),l.jsx(N,{orientation:"vertical"})]})})]})})]})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx(v,{htmlFor:"bio-maba",className:"text-left text-white",children:"Bio"}),l.jsx(D,{id:"bio-maba",value:d.bio,onChange:e=>B("bio",e.target.value),placeholder:"Dingin tetapi tidak kejam",className:"mt-1 max-h-[150px] bg-white"})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx(v,{htmlFor:"pita-maba",className:"text-left text-white",children:"Pita"}),l.jsxs(k,{defaultValue:d.pita||"",onValueChange:e=>{B("pita",e)},children:[l.jsx(_,{className:"w-full mt-1",children:l.jsx(y,{placeholder:"Pilih Pita"})}),l.jsx(C,{children:l.jsxs(F,{children:[l.jsx(E,{children:"Warna Pita"}),l.jsx(P,{value:"hijau",onClick:()=>{B("pita","hijau")},className:"text-green-600",children:"Hijau"}),l.jsx(P,{value:"kuning",onClick:()=>{B("pita","kuning")},className:"text-yellow-600",children:"Kuning"}),l.jsx(P,{value:"merah",onClick:()=>{B("pita","merah")},className:"text-red-600",children:"Merah"})]})})]})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx(v,{htmlFor:"riwayat-penyakit-maba",className:"text-left text-white",children:"Riwayat Penyakit"}),l.jsx(g,{type:"text",id:"riwayat-penyakit-maba",value:d.ket_penyakit,onChange:e=>B("ket_penyakit",e.target.value),placeholder:"GERD (Gastroesophageal Reflux Disease)",className:"mt-1 capitalize"})]}),l.jsx("div",{className:"flex justify-end",children:l.jsx(m,{onClick:()=>{L(route("dashboard.user.edit-profil"))},className:"bg-[#E58025] hover:bg-[#E58025]",children:"Simpan Data"})})]})},q=({currentUser:a})=>{const{data:s,setData:t,put:i}=e({id:a.id,new_password:"",confirm_new_password:"",_method:"put"});return l.jsxs("div",{className:"h-fit w-full p-4 space-y-5 border rounded-xl shadow-md bg-[linear-gradient(137.47deg,_#E06C32_11.08%,_#FD8E57_42.04%,_#BE3F00_95.9%)]",children:[l.jsx("h2",{className:"text-xl text-white font-semibold tracking-tight",children:"Reset Password"}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx(v,{htmlFor:"nama-maba",className:"text-left text-white",children:"Password Baru"}),l.jsx(g,{type:"text",id:"nama-maba",value:s.new_password,onChange:e=>t("new_password",e.target.value),placeholder:"ex. 1234@Jamal#GG",className:"mt-1"})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx(v,{htmlFor:"email-maba",className:"text-left text-white",children:"Konfirmasi Password"}),l.jsx(g,{type:"email",id:"email-maba",value:s.confirm_new_password,onChange:e=>t("confirm_new_password",e.target.value),placeholder:"ex. 1234@Jamal#GG",className:"mt-1"})]}),l.jsx("div",{className:"flex justify-end",children:l.jsx(m,{onClick:()=>{i(route("dashboard.user.edit-password")),s.new_password="",s.confirm_new_password=""},className:"bg-[#E58025] hover:bg-[#E58025]",children:"Ubah Password"})})]})},O=({currentUser:a})=>{const{data:s,setData:t,put:i}=e({id:a.id,instagram_url:a.instagram_url,linkedin_url:a.linkedin_url,_method:"put"});return l.jsxs("div",{className:"p-4 space-y-5 border rounded-xl shadow-md bg-[linear-gradient(137.47deg,_#E06C32_11.08%,_#FD8E57_42.04%,_#BE3F00_95.9%)]",children:[l.jsx("h2",{className:"text-xl text-white font-semibold tracking-tight",children:"Sosial Media"}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx(v,{htmlFor:"instagram-maba",className:"text-left text-white",children:"Instagram"}),l.jsx(g,{type:"text",id:"instagram-maba",value:s.instagram_url,onChange:e=>t("instagram_url",e.target.value),placeholder:"https://instagram.com/...",className:"mt-1"})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx(v,{htmlFor:"linkedin-maba",className:"text-left text-white",children:"LinkedIn"}),l.jsx(g,{type:"text",id:"linkedin-maba",value:s.linkedin_url,onChange:e=>t("linkedin_url",e.target.value),placeholder:"https://linkedin.com/in/...",className:"mt-1"})]}),l.jsx("div",{className:"flex justify-end",children:l.jsx(m,{onClick:()=>{i(route("dashboard.user.edit-sosmed"))},className:"bg-[#E58025] hover:bg-[#E58025]",children:"Simpan Data"})})]})},Q=({currentUser:a})=>{const[t,i]=s.useState(null),{data:r,setData:o,put:n}=e({id:a.id,sertif:"",_method:"put"}),d=B((async()=>{if(!/^https:\/\/(www\.)?\w+\.google\.com\/.*$/g.test(r.sertif))return void i("link harus dari Google Drive");let e=r.sertif.split("/")[5];(await fetch(`https://www.googleapis.com/drive/v2/files/${e}?key=undefined`)).ok?i(""):i("Link drive belum publik, silahkan coba lagi")}),100);return l.jsxs("div",{className:"p-4 space-y-5 border rounded-xl shadow-md bg-[linear-gradient(137.47deg,_#E06C32_11.08%,_#FD8E57_42.04%,_#BE3F00_95.9%)]",children:[l.jsx("h2",{className:"text-xl text-white font-semibold tracking-tight",children:"Tentang PPLK"}),a.kelompok?l.jsxs("div",{className:"flex w-full gap-2",children:[l.jsxs("div",{className:"flex flex-col w-full",children:[l.jsx(v,{htmlFor:"nama-kelompok-maba",className:"text-left text-white",children:"Nama Kelompok"}),l.jsx(g,{type:"text",id:"nama-kelompok-maba",value:a.kelompok.nama_kelompok,disabled:!0,placeholder:"Nawasena",className:"mt-1"})]}),l.jsxs("div",{className:"flex flex-col w-full",children:[l.jsx(v,{htmlFor:"nomor-kelompok-maba",className:"text-left text-white",children:"Nomor Kelompok"}),l.jsx(g,{type:"number",id:"nomor-kelompok-maba",value:a.kelompok.no_kelompok,disabled:!0,placeholder:"73",className:"mt-1 [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"})]})]}):null,l.jsxs("div",{className:"flex flex-col w-full",children:[l.jsx(v,{htmlFor:"score-game-individu-maba",className:"text-left text-white",children:"Score Game Individu"}),l.jsx(g,{type:"number",id:"score-game-individu-maba",value:a.score,disabled:!0,placeholder:"73",className:"mt-1 [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"})]}),l.jsxs("div",{className:"flex flex-col w-full",children:[l.jsx(v,{htmlFor:"pilar-maba",className:"text-left text-white",children:"Pilar"}),l.jsx(g,{type:"text",id:"pilar-maba",value:a.pilar?a.pilar.pilar_name:"Belum ada pilar",disabled:!0,placeholder:"Pilar User",className:"mt-1"})]}),l.jsxs("div",{className:"flex flex-col w-full",children:[l.jsx(v,{htmlFor:"serti-kelulusan-pplk-maba",className:"text-left text-white",children:"Sertifikat Kelulusan PPLK"}),l.jsx(g,{type:"text",id:"serti-kelulusan-pplk-maba",value:a.link_sertif?a.link_sertif:r.sertif,placeholder:"https://drive.google.com/....",className:"mt-1",onChange:e=>{o("sertif",e.target.value),d()}}),t?l.jsx("span",{className:"text-red-500 text-[12px]",children:t}):""===t?l.jsx("span",{className:"text-[12px] text-green-500",children:"Link valid"}):null]}),l.jsx("div",{className:"flex justify-end",children:l.jsx(m,{onClick:()=>{n(route("dashboard.user.edit-sertif"))},disabled:!!t||!r.sertif,className:"bg-[#E58025] hover:bg-[#E58025]",children:"Simpan Sertifikat"})})]})};function A({response:a}){const{auth:o}=t().props,{toast:n}=z();W();const c=[{title:"Ellysion Panel",link:"/dashboard"},{title:"Edit Data User",link:route("dashboard.user.edit",a.data.id)}],x=a.data,[h,p]=s.useState(null),[u,f]=s.useState(""),{setData:j,post:b}=e({id:x.id,photo:null,_method:"put"});return l.jsxs(l.Fragment,{children:[l.jsxs(r,{user:o.user,children:[l.jsx(d,{items:c}),l.jsx("h2",{className:"text-3xl font-semibold font-inter tracking-tight",children:"Edit Data User"}),l.jsxs("div",{className:"md:flex-row font-inter flex flex-col gap-2",children:[l.jsxs("div",{className:"md:mx-0 mx-auto",children:[l.jsx("div",{className:"w-[200px] h-[220px] border border-[#C2C2C2] rounded-lg overflow-hidden",children:l.jsx("img",{src:x.photo_profile_url?x.photo_profile_url:H,alt:`${x.name} photo profile`,className:"w-full h-full bg-center bg-cover"})}),l.jsxs(L,{children:[l.jsx(G,{asChild:!0,children:l.jsx(m,{variant:"outline",className:"w-[200px] py-2 border mt-3 bg-white",children:"Edit Foto"})}),l.jsxs(I,{className:"sm:max-w-[425px]",children:[l.jsx(K,{children:l.jsxs(R,{children:["Edit Foto Profil ",x.name]})}),l.jsx("div",{className:"grid gap-4 py-4",children:l.jsxs("div",{className:"relative flex items-center justify-center mx-auto rounded-full",children:[l.jsx("div",{className:"w-36 h-36 flex items-center justify-center overflow-hidden border rounded-full",children:u?l.jsx("img",{src:u,alt:"preview-image-kelompok",className:"object-cover object-center w-full h-full"}):l.jsx("img",{src:x.photo_profile_url?x.photo_profile_url:H,alt:`${x.name} photo profile`,className:"object-cover object-center w-full h-full"})}),l.jsx(v,{htmlFor:"upload-logo-kelompok",children:l.jsx(J,{size:32,color:"black",className:"-mt-[1px] cursor-pointer absolute bottom-1 right-1 border shadow-lg bg-white rounded-full p-1"})}),l.jsx(g,{type:"file",onChange:e=>{const a=e.target.files[0];if(a){if(!a.type.startsWith("image"))return n({title:"Invalid File Type",description:"Tolong pilih file gambar.",variant:"destructive"}),p(null),j("photo",null),void f("");if(a.size>2048e3)return n({title:"File Too Large",description:"Pilih foto yang berukuran dibawah 2MB.",variant:"destructive"}),p(null),j("photo",null),void f("");p(a),f(URL.createObjectURL(a)),j("photo",a)}else p(null),j("photo",null),f("")},accept:"image/*",className:"hidden",id:"upload-logo-kelompok"})]})}),l.jsxs(T,{children:[l.jsx($,{asChild:!0,children:l.jsx(m,{variant:"outline",children:"Batalkan"})}),l.jsx($,{asChild:!0,children:l.jsx(m,{onClick:()=>{b(route("dashboard.user.edit-foto"))},children:"Simpan"})})]})]})]}),l.jsxs("div",{className:"w-[200px] mt-5",children:[l.jsx("h2",{className:"font-semibold text-center",children:"Kode QR"}),l.jsx("div",{className:"border",children:x.qrcode?l.jsx(i,{value:x.qrcode.code,size:200,includeMargin:!0,level:"H",width:500,height:500}):null})]})]}),l.jsxs("div",{className:"md:flex-row flex flex-col w-full gap-2",children:[l.jsxs("div",{className:"md:w-1/2 flex flex-col w-full gap-2",children:[l.jsx(V,{currentUser:x}),l.jsx(q,{currentUser:x})]}),l.jsxs("div",{className:"md:w-1/2 flex flex-col gap-2",children:[1===x.role_id||2===x.role_id||3===x.role_id||4===x.role_id?l.jsx(O,{currentUser:x}):null,1===x.role_id||2===x.role_id||3===x.role_id||4===x.role_id?l.jsx(Q,{currentUser:x}):null]})]})]}),l.jsx("div",{})]}),l.jsx(M,{})]})}export{A as default};
