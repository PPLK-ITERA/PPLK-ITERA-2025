import{r as e,j as s}from"./Beb12r60.js";import{B as t,b as a}from"./FvtM2sin.js";import{H as r}from"./CWQM_pa4.js";import{I as l}from"./DCI1HIR_.js";import{S as o,a as n}from"./BfALzaFH.js";import{u as i,f as c,g as d}from"./CiacsUY3.js";import{c as m}from"./DBPhEQNF.js";import{P as h,a as x,b as j,c as p,d as f}from"./BdW1Rjfy.js";import{T as u,a as g,b as N,c as y,d as w,e as S}from"./C12zfJUI.js";import{C as b}from"./DCl5qb8D.js";import{l as C}from"./CUnTowtg.js";function M({columns:M,searchKey:$,apiEndpoint:v,title:k,description:A}){const[E,P]=e.useState([]),[R,T]=e.useState(!1),[D,F]=e.useState(1),[I,z]=e.useState(10),[H,B]=e.useState(0),[G,K]=e.useState(""),L=Math.max(1,Math.ceil(H/I))||1;e.useEffect((()=>{(async()=>{T(!0);try{const e=await fetch(`${v}?page=${D}&perPage=${I}&search=${G}`),s=await e.json();console.log("API Response:",s);const t=Array.isArray(s.data)?s.data:[],a="number"!=typeof s.total||isNaN(s.total)?t.length:s.total;P(t),B(a),console.log("Set data:",t,"Set total:",a)}catch(e){console.error("Error fetching data:",e),P([]),B(0)}finally{T(!1)}})()}),[v,D,I,G]);const V=i({data:E,columns:M,getCoreRowModel:d(),state:{pagination:{pageIndex:D-1,pageSize:I}}}),q=m((e=>{K(e),F(1)}),500),J=(()=>{const e="number"!=typeof H||isNaN(H)?0:H,s="number"==typeof I&&!isNaN(I)&&I>0?I:10,t="number"==typeof D&&!isNaN(D)&&D>0?D:1;if(0===e)return{from:0,to:0,total:0,displayText:"No entries found"};const a=(t-1)*s+1,r=Math.min(t*s,e);return{from:a,to:r,total:e,displayText:`Showing ${a} to ${r} of ${e} entries`}})();return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"md:flex font-inter justify-between",children:[s.jsx(r,{title:`${k}`,description:A}),s.jsx(l,{placeholder:`Search ${$}...`,onChange:e=>{q(e.target.value)},className:"md:max-w-sm w-full my-2"})]}),s.jsxs(o,{className:"max-w-7xl h-[calc(80vh-220px)] rounded-md border",children:[s.jsxs(u,{className:"md:w-full relative",children:[s.jsx(g,{children:V.getHeaderGroups().map((e=>s.jsx(N,{children:e.headers.map((e=>s.jsx(y,{children:e.isPlaceholder?null:c(e.column.columnDef.header,e.getContext())},e.id)))},e.id)))}),s.jsx(w,{children:R?s.jsx(N,{children:s.jsx(S,{colSpan:M.length,className:"text-center",children:"Loading..."})}):V.getRowModel().rows.length>0?V.getRowModel().rows.map((e=>s.jsx(N,{children:e.getVisibleCells().map((e=>s.jsx(S,{children:s.jsx("div",{className:"line-clamp-2",children:c(e.column.columnDef.cell,e.getContext())})},e.id)))},e.id))):s.jsx(N,{children:s.jsx(S,{colSpan:M.length,className:"text-center",children:"No results."})})})]}),s.jsx(n,{orientation:"horizontal"})]}),s.jsx("div",{className:"flex items-center justify-between",children:s.jsx("div",{className:"text-sm text-gray-700",children:J.displayText})}),H>0&&s.jsx(h,{children:s.jsxs(x,{children:[s.jsx(j,{children:s.jsx(t,{disabled:1===D,onClick:()=>F(Math.max(D-1,1)),children:s.jsx(b,{})})}),D>2&&s.jsxs(s.Fragment,{children:[s.jsx(j,{className:"cursor-pointer",children:s.jsx(p,{onClick:()=>F(1),children:"1"})}),s.jsx(j,{children:s.jsx(f,{})})]}),(()=>{const e=Math.max(1,D-Math.floor(1)),s=Math.min(L,e+2-1),t=[];for(let a=e;a<=s;a++)t.push(a);return t})().map((e=>s.jsx(j,{children:s.jsx(p,{isActive:D===e,onClick:()=>F(e),className:D===e?`${a()} cursor-default hover:text-white`:"cursor-pointer",children:e})},e))),D<L-1&&L>1&&s.jsxs(s.Fragment,{children:[s.jsx(j,{children:s.jsx(f,{})}),s.jsx(j,{className:"cursor-pointer",children:s.jsx(p,{onClick:()=>F(L),children:L})})]}),s.jsx(j,{children:s.jsx(t,{disabled:D===L||L<=1,onClick:()=>F(Math.min(D+1,L)),children:s.jsx(C,{})})})]})})]})}export{M as D};
