import{a as e,j as n,r as t,S as r}from"./BJ63vrvw.js";var i,a={},o={},u={};var s,l={},c={};function d(){return s||(s=1,Object.defineProperty(c,"__esModule",{value:!0}),c.UnityLoaderStatus=void 0,(n=e||(c.UnityLoaderStatus=e={})).Idle="Idle",n.Loading="Loading",n.Loaded="Loaded",n.Error="Error"),c;var e,n}var f,v,y={};function U(){return f||(f=1,Object.defineProperty(y,"__esModule",{value:!0}),y.isBrowserEnvironment=void 0,y.isBrowserEnvironment="undefined"!=typeof window&&"undefined"!=typeof document),y}function b(){if(v)return l;v=1;var n=l&&l.__awaiter||function(e,n,t,r){return new(t||(t=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(n){a(n)}}function u(e){try{s(r.throw(e))}catch(n){a(n)}}function s(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(o,u)}s((r=r.apply(e,n||[])).next())}))},t=l&&l.__generator||function(e,n){var t,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(s){return function(u){if(t)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(o=0)),o;)try{if(t=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==u[0]&&2!==u[0])){o=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){o.label=u[1];break}if(6===u[0]&&o.label<i[1]){o.label=i[1],i=u;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(u);break}i[2]&&o.ops.pop(),o.trys.pop();continue}u=n.call(e,o)}catch(s){u=[6,s],r=0}finally{t=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}};Object.defineProperty(l,"__esModule",{value:!0}),l.useUnityInstance=void 0;var r=e(),i=d(),a=U();return l.useUnityInstance=function(e,o,u,s){(0,r.useEffect)((function(){n(void 0,void 0,void 0,(function(){var n,r;return t(this,(function(t){switch(t.label){case 0:if(!1===a.isBrowserEnvironment)return[2];if(e!==i.UnityLoaderStatus.Loaded||null===o)return s.setUnityInstance(null),s.setInitialisationError(null),[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,window.createUnityInstance(o,u,s.setLoadingProgression)];case 2:return n=t.sent(),s.setUnityInstance(n),s.setInitialisationError(null),[3,4];case 3:return r=t.sent(),s.setUnityInstance(null),s.setInitialisationError(r),[3,4];case 4:return[2]}}))}))}),[e,o,u,s])},l}var m,p={};var g,w,L={};function h(){if(w)return o;w=1,Object.defineProperty(o,"__esModule",{value:!0}),o.Unity=void 0;var n=e(),t=e(),r=function(){if(i)return u;i=1,Object.defineProperty(u,"__esModule",{value:!0}),u.useUnityCanvasId=void 0;var n=e(),t=0,r="react-unity-webgl-canvas";return u.useUnityCanvasId=function(e){return void 0!==e.id?e.id:(0,n.useMemo)((function(){return[r,++t].join("-")}),[])},u}(),a=b(),s=function(){if(m)return p;m=1,Object.defineProperty(p,"__esModule",{value:!0}),p.useUnityArguments=void 0;var n=e();return p.useUnityArguments=function(e){return(0,n.useMemo)((function(){return{dataUrl:e.unityProvider.unityConfig.dataUrl,frameworkUrl:e.unityProvider.unityConfig.frameworkUrl,codeUrl:e.unityProvider.unityConfig.codeUrl,streamingAssetsUrl:e.unityProvider.unityConfig.streamingAssetsUrl,memoryUrl:e.unityProvider.unityConfig.memoryUrl,symbolsUrl:e.unityProvider.unityConfig.symbolsUrl,companyName:e.unityProvider.unityConfig.companyName,productName:e.unityProvider.unityConfig.productName,productVersion:e.unityProvider.unityConfig.productVersion,webglContextAttributes:e.unityProvider.unityConfig.webglContextAttributes||{},cacheControl:e.unityProvider.unityConfig.cacheControl||function(){return"must-revalidate"},devicePixelRatio:e.devicePixelRatio||1,matchWebGLToCanvasSize:"boolean"!=typeof e.matchWebGLToCanvasSize||e.matchWebGLToCanvasSize,disabledCanvasEvents:e.disabledCanvasEvents||["contextmenu","dragstart"],print:function(e){},printErr:function(e){}}}),[])},p}(),l=function(){if(g)return L;g=1,Object.defineProperty(L,"__esModule",{value:!0}),L.useUnityLoader=void 0;var n=e(),t=U(),r=d();return L.useUnityLoader=function(e){var i=(0,n.useState)(r.UnityLoaderStatus.Loading),a=i[0],o=i[1];return(0,n.useEffect)((function(){if(!1!==t.isBrowserEnvironment){if(null!==e.loaderUrl){var n=window.document.querySelector('script[src="'.concat(e.loaderUrl,'"]'));null===n?((n=window.document.createElement("script")).type="text/javascript",n.src=e.loaderUrl,n.async=!0,n.setAttribute("data-status","loading"),window.document.body.appendChild(n),n.addEventListener("load",(function(){return null==n?void 0:n.setAttribute("data-status","loaded")})),n.addEventListener("error",(function(){return null==n?void 0:n.setAttribute("data-status","error")}))):o("loaded"===n.getAttribute("data-status")?r.UnityLoaderStatus.Loaded:r.UnityLoaderStatus.Error);var i=function(e){return o("load"===e.type?r.UnityLoaderStatus.Loaded:r.UnityLoaderStatus.Error)};return n.addEventListener("load",i),n.addEventListener("error",i),function(){null!==n&&(n.removeEventListener("load",i),n.removeEventListener("error",i),window.document.body.removeChild(n))}}o(r.UnityLoaderStatus.Idle)}}),[e.loaderUrl]),a},L}(),c=(0,t.forwardRef)((function(e,i){var o=(0,t.useRef)(null),u=(0,r.useUnityCanvasId)(e),c=(0,s.useUnityArguments)(e),d=(0,l.useUnityLoader)(e.unityProvider.unityConfig);return(0,a.useUnityInstance)(d,o.current,c,e.unityProvider),(0,n.useImperativeHandle)(i,(function(){return o.current})),(0,n.createElement)("canvas",{ref:o,id:u,style:e.style,className:e.className,tabIndex:e.tabIndex})}));return o.Unity=c,o}var C,E={},P={};function I(){if(C)return P;C=1,Object.defineProperty(P,"__esModule",{value:!0}),P.errorMessages=void 0;return P.errorMessages={genericNoUnityInstance:"No Unity Instance found.",requestFullscreenNoUnityInstance:"Unable to Set Fullscreen while Unity is not Instantiated.",requestPointerLockNoUnityInstanceOrCanvas:"Unable to Request Pointer Lock while Unity is not Instantiated or the Canvas is not found.",sendMessageNoUnityInstance:"Unable to Send Message while Unity is not Instantiated.",quitNoUnityInstance:"Unable to Quit Unity while Unity is not Instantiated.",screenshotNoUnityInstanceOrCanvas:"Unable to Take Screenshot while Unity is not Instantiated or Canvas is not available.",noEventListener:"Unable to find Event Listener in Event System for Event"},P}var _,S={};var x,M,N,k={};function j(){if(M)return E;M=1,Object.defineProperty(E,"__esModule",{value:!0}),E.useUnityContext=void 0;var n=e(),t=I(),r=function(){if(_)return S;_=1;var n=S&&S.__spreadArray||function(e,n,t){if(t||2===arguments.length)for(var r,i=0,a=n.length;i<a;i++)!r&&i in n||(r||(r=Array.prototype.slice.call(n,0,i)),r[i]=n[i]);return e.concat(r||Array.prototype.slice.call(n))};Object.defineProperty(S,"__esModule",{value:!0}),S.useEventSystem=void 0;var t=e(),r=I(),i=U(),a=[];return!0===i.isBrowserEnvironment&&(window.dispatchReactUnityEvent=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=void 0;return a.forEach((function(r){i=r.apply(void 0,n([e],t,!1))})),i}),S.useEventSystem=function(){var e=(0,t.useRef)([]),i=(0,t.useCallback)((function(t,r){e.current=n(n([],e.current,!0),[{eventName:t,callback:r}],!1)}),[e]),o=(0,t.useCallback)((function(n,t){e.current=e.current.filter((function(e){return e.eventName!==n&&e.callback!==t}))}),[e]),u=(0,t.useCallback)((function(n){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];var a=e.current.find((function(e){return e.eventName===n}));if(void 0!==a)return a.callback.apply(a,t);console.warn(r.errorMessages.noEventListener,{eventName:n})}),[e]);return(0,t.useEffect)((function(){return a.push(u),function(){a.splice(a.indexOf(u),1)}}),[u]),{addEventListener:i,removeEventListener:o}},S}(),i=function(){if(x)return k;x=1,Object.defineProperty(k,"__esModule",{value:!0}),k.useNullableState=void 0;var n=e();return k.useNullableState=function(e){return(0,n.useState)(e||null)},k}();return E.useUnityContext=function(e){var a=(0,i.useNullableState)(),o=a[0],u=a[1],s=(0,n.useState)(0),l=s[0],c=s[1],d=(0,n.useState)(!1),f=d[0],v=d[1],y=(0,i.useNullableState)(),U=y[0],b=y[1],m=(0,r.useEventSystem)(),p=(0,n.useRef)({setLoadingProgression:c,setInitialisationError:b,setUnityInstance:u,setIsLoaded:v,unityConfig:e}),g=(0,n.useCallback)((function(e){null!==o?o.SetFullscreen(!0===e?1:0):console.warn(t.errorMessages.requestFullscreenNoUnityInstance)}),[o]),w=(0,n.useCallback)((function(){if(null!==o&&void 0!==o.Module.canvas)return o.Module.canvas.requestPointerLock();console.warn(t.errorMessages.requestPointerLockNoUnityInstanceOrCanvas)}),[o]),L=(0,n.useCallback)((function(e,n,r){null!==o?o.SendMessage(e,n,r):console.warn(t.errorMessages.sendMessageNoUnityInstance)}),[o]),h=(0,n.useCallback)((function(e,n){if(null!==o&&void 0!==o.Module.canvas)return o.Module.canvas.toDataURL(e,n);console.warn(t.errorMessages.screenshotNoUnityInstanceOrCanvas)}),[o]),C=(0,n.useCallback)((function(){return null===o?(console.warn(t.errorMessages.quitNoUnityInstance),Promise.reject()):o.Quit()}),[o]);return(0,n.useEffect)((function(){v(1===l)}),[l]),{unityProvider:p.current,loadingProgression:l,initialisationError:U,isLoaded:f,UNSAFE__unityInstance:o,requestFullscreen:g,requestPointerLock:w,sendMessage:L,unload:C,takeScreenshot:h,addEventListener:m.addEventListener,removeEventListener:m.removeEventListener}},E}var O=(N||(N=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.useUnityContext=e.Unity=void 0;var n=h();Object.defineProperty(e,"Unity",{enumerable:!0,get:function(){return n.Unity}});var t=j();Object.defineProperty(e,"useUnityContext",{enumerable:!0,get:function(){return t.useUnityContext}})}(a)),a);function A(){const{unityProvider:e,loadingProgression:i,isLoaded:a}=O.useUnityContext({loaderUrl:"/naramuda_explorer/Build/naramuda_explorer.loader.js",dataUrl:"/naramuda_explorer/Build/naramuda_explorer.data",frameworkUrl:"/naramuda_explorer/Build/naramuda_explorer.framework.js",codeUrl:"/naramuda_explorer/Build/naramuda_explorer.wasm"});return n.jsxs(t.Fragment,{children:[n.jsx(r,{title:"Game"}),!a&&n.jsxs("p",{children:["Loading Application... ",Math.round(100*i),"%"]}),n.jsx(O.Unity,{className:"w-screen h-screen",unityProvider:e,style:{visibility:a?"visible":"hidden"}})]})}export{A as default};
