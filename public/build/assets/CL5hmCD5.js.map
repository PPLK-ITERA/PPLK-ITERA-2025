{"version":3,"file":"CL5hmCD5.js","sources":["../../../resources/js/Pages/Tesla/AdminPage.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport Navbar from \"@/Components/Navbar\";\nimport { Card } from \"@/Components/ui/card\";\nimport MaxWidthWrapper from \"@/Components/MaxWidthWrapper\";\nimport bg_1 from \"!assets/tesla/bg-1.png\";\n\ntype Soal = {\n    id: number;\n    nomor: number;\n    tipe: string;\n    pertanyaan: string;\n    jawaban: string;\n    start_row: number;\n    start_col: number;\n};\n\nconst emptySoal: Soal = { id: 0, nomor: 0, tipe: \"mendatar\", pertanyaan: \"\", jawaban: \"\", start_row: 0, start_col: 0 };\n\nconst AdminPage: React.FC = () => {\n    const [soals, setSoals] = useState<Soal[]>([]);\n    const [form, setForm] = useState<Soal>(emptySoal);\n    const [editing, setEditing] = useState(false);\n    const [message, setMessage] = useState(\"\");\n\n    const fetchSoals = async () => {\n        // Ganti endpoint ke /api/tesla/ agar sesuai dengan BACKEND API ROUTES (CRUD)\n        const res = await fetch(\"/api/tesla/\");\n        const result = await res.json();\n        setSoals(result.data || []);\n    };\n\n    useEffect(() => {\n        fetchSoals();\n    }, []);\n\n    const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>) => {\n        const { name, value } = e.target;\n        if (name === \"nomor\") {\n            const nomor = Number(value);\n            setForm(prev => ({\n                ...prev,\n                nomor,\n                tipe: nomor % 2 === 0 ? \"menurun\" : \"mendatar\" // otomatis set tipe berdasarkan ganjil/genap\n            }));\n        } else {\n            setForm({ ...form, [name]: name === \"nomor\" || name === \"start_row\" || name === \"start_col\" ? Number(value) : value });\n        }\n    };\n\n    const handleSubmit = async (e: React.FormEvent) => {\n        e.preventDefault();\n        setMessage(\"\");\n        const method = editing ? \"PUT\" : \"POST\";\n        // Ganti endpoint ke /api/tesla/ agar sesuai dengan BACKEND API ROUTES (CRUD)\n        const url = editing ? `/api/tesla/${form.id}` : \"/api/tesla/\";\n        const payload = { ...form, nomor: Number(form.nomor), start_row: Number(form.start_row), start_col: Number(form.start_col) };\n        const res = await fetch(url, {\n            method,\n            headers: {\n                \"Content-Type\": \"application/json\",\n                \"X-Requested-With\": \"XMLHttpRequest\",\n                \"X-CSRF-TOKEN\": (document.querySelector('meta[name=\"csrf-token\"]') as HTMLMetaElement)?.content || \"\",\n            },\n            body: JSON.stringify(payload),\n        });\n        const data = await res.json();\n        if (!res.ok) {\n            setMessage(data.message || \"Gagal menyimpan data\");\n            return;\n        }\n        setMessage(data.message);\n        setForm(emptySoal);\n        setEditing(false);\n        fetchSoals();\n    };\n\n    const handleEdit = (soal: Soal) => {\n        setForm(soal);\n        setEditing(true);\n    };\n\n    const handleDelete = async (id: number) => {\n        // Ganti endpoint ke /api/tesla/ agar sesuai dengan BACKEND API ROUTES (CRUD)\n        await fetch(`/api/tesla/${id}`, {\n            method: \"DELETE\",\n            headers: {\n                \"X-Requested-With\": \"XMLHttpRequest\",\n                \"X-CSRF-TOKEN\": (document.querySelector('meta[name=\"csrf-token\"]') as HTMLMetaElement)?.content || \"\",\n            },\n        });\n        fetchSoals();\n    };\n\n    return (\n        <>\n            {/* Background Tesla */}\n            <div\n                className=\"fixed inset-0 z-0 bg-cover bg-center bg-no-repeat\"\n                style={{\n                    backgroundImage: `url(${bg_1})`,\n                }}\n            >\n                <div className=\"absolute inset-0 bg-[#BF4000] mix-blend-multiply pointer-events-none\"></div>\n            </div>\n            <Navbar isFixed={true} />\n            <MaxWidthWrapper className=\"py-8 mt-20 relative z-10\">\n                <Card className=\"p-6 mb-8 bg-white/90\">\n                    <h3 className=\"text-xl font-semibold mb-4\">{editing ? \"Edit Soal\" : \"Tambah Soal\"}</h3>\n                    <form onSubmit={handleSubmit} className=\"flex flex-col gap-3\">\n                        <div className=\"flex gap-4\">\n                            <div>\n                                <label className=\"mr-2\">Tipe:</label>\n                                <select\n                                    name=\"tipe\"\n                                    value={form.tipe}\n                                    onChange={handleChange}\n                                    className=\"border rounded px-2 py-1 w-40 h-10\"\n                                >\n                                    <option value=\"mendatar\">Mendatar</option>\n                                    <option value=\"menurun\">Menurun</option>\n                                </select>\n                            </div>\n                            <div>\n                                <label className=\"mr-2\">Nomor:</label>\n                                <input\n                                    name=\"nomor\"\n                                    type=\"number\"\n                                    value={form.nomor}\n                                    onChange={handleChange}\n                                    className=\"border rounded px-2 py-1 w-40 h-10\"\n                                    required\n                                />\n                            </div>\n                        </div>\n                        <div className=\"flex gap-4\">\n                            <div className=\"flex-1\">\n                                <label className=\"mr-2\">Pertanyaan:</label>\n                                <input\n                                    name=\"pertanyaan\"\n                                    type=\"text\"\n                                    value={form.pertanyaan}\n                                    onChange={handleChange}\n                                    className=\"border rounded px-2 py-1 w-full h-10\"\n                                    required\n                                />\n                            </div>\n                            <div className=\"flex-1\">\n                                <label className=\"mr-2\">Jawaban:</label>\n                                <input\n                                    name=\"jawaban\"\n                                    type=\"text\"\n                                    value={form.jawaban}\n                                    onChange={handleChange}\n                                    className=\"border rounded px-2 py-1 w-full h-10\"\n                                    required\n                                />\n                            </div>\n                        </div>\n                        <div className=\"flex gap-4\">\n                            <div>\n                                <label className=\"mr-2\">Start Row:</label>\n                                <input\n                                    name=\"start_row\"\n                                    type=\"number\"\n                                    value={form.start_row}\n                                    onChange={handleChange}\n                                    className=\"border rounded px-2 py-1 w-40 h-10\"\n                                    min={0}\n                                />\n                            </div>\n                            <div>\n                                <label className=\"mr-2\">Start Col:</label>\n                                <input\n                                    name=\"start_col\"\n                                    type=\"number\"\n                                    value={form.start_col}\n                                    onChange={handleChange}\n                                    className=\"border rounded px-2 py-1 w-40 h-10\"\n                                    min={0}\n                                />\n                            </div>\n                            <span className=\"text-xs text-gray-500 mt-2\">(Boleh dikosongkan untuk auto)</span>\n                        </div>\n                        <div>\n                            <button type=\"submit\" className=\"bg-[#FF6B20] hover:bg-[#e65a00] text-white px-4 py-2 rounded h-10\">\n                                {editing ? \"Update\" : \"Tambah\"}\n                            </button>\n                            {editing && (\n                                <button type=\"button\" className=\"ml-2 px-4 py-2 rounded border h-10\" onClick={() => { setForm(emptySoal); setEditing(false); }}>\n                                    Batal\n                                </button>\n                            )}\n                        </div>\n                        {message && <div className=\"text-green-600\">{message}</div>}\n                    </form>\n                </Card>\n                <Card className=\"p-6 bg-white/90\">\n                    <h3 className=\"text-xl font-semibold mb-4\">Daftar Soal</h3>\n                    <div className=\"overflow-x-auto\">\n                        <table className=\"w-full border\">\n                            <thead>\n                                <tr>\n                                    {/* <th className=\"border px-2 py-1\">ID</th> */}\n                                    <th className=\"border px-2 py-1\">Nomor</th>\n                                    <th className=\"border px-2 py-1\">Tipe</th>\n                                    <th className=\"border px-2 py-1\">Pertanyaan</th>\n                                    <th className=\"border px-2 py-1\">Jawaban</th>\n                                    <th className=\"border px-2 py-1\">Start Row</th>\n                                    <th className=\"border px-2 py-1\">Start Col</th>\n                                    <th className=\"border px-2 py-1\">Aksi</th>\n                                </tr>\n                            </thead>\n                            <tbody>\n                                {soals.map(soal => (\n                                    <tr key={soal.id}>\n                                        {/* <td className=\"border px-2 py-1\">{soal.id}</td> */}\n                                        <td className=\"border px-2 py-1\">{soal.nomor}</td>\n                                        <td className=\"border px-2 py-1\">{soal.tipe}</td>\n                                        <td className=\"border px-2 py-1\">{soal.pertanyaan}</td>\n                                        <td className=\"border px-2 py-1\">{soal.jawaban}</td>\n                                        <td className=\"border px-2 py-1\">{soal.start_row}</td>\n                                        <td className=\"border px-2 py-1\">{soal.start_col}</td>\n                                        <td className=\"border px-2 py-1\">\n                                            <button className=\"text-blue-600 mr-2\" onClick={() => handleEdit(soal)}>Edit</button>\n                                            <button className=\"text-red-600\" onClick={() => handleDelete(soal.id)}>Hapus</button>\n                                        </td>\n                                    </tr>\n                                ))}\n                            </tbody>\n                        </table>\n                    </div>\n                </Card>\n            </MaxWidthWrapper>\n        </>\n    );\n};\n\nexport default AdminPage;\n"],"names":["emptySoal","id","nomor","tipe","pertanyaan","jawaban","start_row","start_col","AdminPage","soals","setSoals","useState","form","setForm","editing","setEditing","message","setMessage","fetchSoals","async","res","fetch","result","json","data","useEffect","handleChange","e","name","value","target","Number","prev","jsxRuntimeExports","jsxs","Fragment","children","jsx","className","style","backgroundImage","bg_1","Navbar","isFixed","MaxWidthWrapper","Card","onSubmit","preventDefault","method","url","payload","headers","_a","document","querySelector","content","body","JSON","stringify","ok","onChange","type","required","min","onClick","map","soal","handleEdit","handleDelete"],"mappings":"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"}