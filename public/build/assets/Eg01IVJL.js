import{r as t,W as s,j as a,a as e,y as o}from"./DC6m5fxZ.js";import{c as r}from"./Vr4_5iVq.js";import{D as i}from"./BKkWCyQT.js";import{M as n}from"./7OEnSrNq.js";import{b as l,B as c}from"./eCUVu0Ub.js";import{I as m}from"./V1bxGyBr.js";import{L as d}from"./D_u_jg3I.js";import{C as p}from"./DqI9-jNe.js";import"./7zUHnb4R.js";import"./ByKTIQIh.js";import"./BZtDV8eV.js";import"./FKrtAZ_w.js";import"./BIV4RXrC.js";import"./YCL8n3XI.js";import"./DEf7FhSo.js";import"./Dieba0GV.js";import"./BeryW3Yn.js";import"./BZfwMT3k.js";function u({id:u}){const[h,g]=t.useState(null),[j,f]=t.useState(null),[x,w]=t.useState(""),[v,k]=t.useState(0),[y,b]=t.useState(!1),{data:T,setData:N,post:S,put:C,processing:E,errors:D}=s({tugas_id:0,url:""});t.useEffect((()=>{(async()=>{try{const t=await fetch(route("mading.tugas",{id:u}),{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok)throw new Error("HTTP status "+t.status);const s=await t.json();g(s.tugas),b(s.isSubmitted),console.log("tugasData",h)}catch(t){console.log("Error: ",t)}})();(async()=>{try{const t=await fetch(route("csrf")),s=await t.json();w(s.csrfToken)}catch(t){console.error("Error fetching CSRF token:",t)}})()}),[]);const F=r((async()=>{if(!/^https:\/\/(www\.)?\w+\.google\.com\/.*$/g.test(T.url))return void f("link harus dari Google Drive");let t=T.url.split("/")[5];(await fetch(`https://www.googleapis.com/drive/v2/files/${t}?key=AIzaSyB4-JCqVpt3dC5MlC0Q6yQOSYG0uysdvwc`)).ok?f(""):f("Link drive belum publik, silahkan coba lagi")}),100);return a.jsx(a.Fragment,{children:a.jsx(i,{isSolid:!0,children:a.jsx("div",{className:"bg-pattern-white pt-28",children:a.jsx(n,{className:"min-h-screen",children:a.jsxs("div",{className:"px-2.5 bg-white/80 py-5 rounded-md md:px-5 lg:px-10 xl:px-28",children:[a.jsxs(e,{href:route("mading"),className:`${l({variant:"outline"})} bg-transparent hover:bg-transparent shadow-none items-center border-none flex gap-2 -ml-5`,children:[a.jsx(p,{}),a.jsx("span",{children:"Kembali"})]}),a.jsxs("h2",{"data-aos":"fade-down","data-aos-duration":"1000",className:"font-montserrat font-bold text-jaffa-700 w-fit pt-[30px] text-3xl",children:["Pengumpulan Tugas Day - ",u]}),a.jsxs("div",{className:"flex flex-col mt-10",children:[null==h?void 0:h.tugas.map(((t,s)=>a.jsxs("div",{className:"flex flex-col",children:[a.jsxs(d,{htmlFor:"input-tugas",className:"text-left",children:["Link"," ","1"===u||"2"===u?"TikTok":"3"===u?"G-Drive":"4"===u?"Instagram":"5"===u?"TikTok":"G-Drive"]}),a.jsx(m,{type:"text",id:"input-tugas",value:T.url,onChange:s=>{N("url",s.target.value),F(),k(t.id)},placeholder:"1"===u||"2"===u?"https://www.tiktok.com/...":"3"===u?"https://drive.google.com/...":"4"===u?"https://www.instagram.com/...":"5"===u?"https://www.tiktok.com/...":"https://drive.google.com/...",className:"mt-2"}),j?a.jsx("span",{className:"text-red-500 text-[12px]",children:j}):""===j?a.jsx("span",{className:"text-[12px] text-green-500",children:"Link valid"}):null]},s))),a.jsxs(c,{onClick:async()=>{try{const t=await fetch(route("mading.store"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":x},body:JSON.stringify({tugas_id:v,jawaban:T.url})});if(!t.ok)throw new Error("HTTP status "+t.status);o.replace(route("mading"))}catch(t){console.log("Error: ",t)}},disabled:!!j||!T.url,className:"bg-jaffa-700 hover:bg-jaffa-700/90 w-full mt-5 transition duration-200 ease-in-out",children:["Submit Tugas ",u]})]})]})})})})})}export{u as default};
