{"version":3,"file":"DRXSD0Ll.js","sources":["../../../resources/js/Pages/Tesla/AdminPage.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport Navbar from \"@/Components/Navbar\";\nimport { Card } from \"@/Components/ui/card\";\nimport MaxWidthWrapper from \"@/Components/MaxWidthWrapper\";\n\ntype Soal = {\n    id: number;\n    nomor: number;\n    tipe: string;\n    pertanyaan: string;\n    jawaban: string;\n};\n\nconst emptySoal = { id: 0, nomor: 0, tipe: \"mendatar\", pertanyaan: \"\", jawaban: \"\" };\n\nconst AdminPage: React.FC = () => {\n    const [soals, setSoals] = useState<Soal[]>([]);\n    const [form, setForm] = useState<Soal>(emptySoal);\n    const [editing, setEditing] = useState(false);\n    const [message, setMessage] = useState(\"\");\n\n    const fetchSoals = async () => {\n        const res = await fetch(\"/api/tesla/\");\n        const result = await res.json();\n        setSoals(result.data || []);\n    };\n\n    useEffect(() => {\n        fetchSoals();\n    }, []);\n\n    const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>) => {\n        setForm({ ...form, [e.target.name]: e.target.value });\n    };\n\n    const handleSubmit = async (e: React.FormEvent) => {\n        e.preventDefault();\n        setMessage(\"\");\n        const method = editing ? \"PUT\" : \"POST\";\n        const url = editing ? `/api/tesla/${form.id}` : \"/api/tesla/\";\n        const payload = { ...form, nomor: Number(form.nomor) };\n        const res = await fetch(url, {\n            method,\n            headers: {\n                \"Content-Type\": \"application/json\",\n                \"X-Requested-With\": \"XMLHttpRequest\",\n                \"X-CSRF-TOKEN\": (document.querySelector('meta[name=\"csrf-token\"]') as HTMLMetaElement)?.content || \"\",\n            },\n            body: JSON.stringify(payload),\n        });\n        const data = await res.json();\n        if (!res.ok) {\n            setMessage(data.message || \"Gagal menyimpan data\");\n            return;\n        }\n        setMessage(data.message);\n        setForm(emptySoal);\n        setEditing(false);\n        fetchSoals();\n    };\n\n    const handleEdit = (soal: Soal) => {\n        setForm(soal);\n        setEditing(true);\n    };\n\n    const handleDelete = async (id: number) => {\n        if (!confirm(\"Yakin hapus soal ini?\")) return;\n        await fetch(`/api/tesla/${id}`, {\n            method: \"DELETE\",\n            headers: {\n                \"X-Requested-With\": \"XMLHttpRequest\",\n                \"X-CSRF-TOKEN\": (document.querySelector('meta[name=\"csrf-token\"]') as HTMLMetaElement)?.content || \"\",\n            },\n        });\n        fetchSoals();\n    };\n\n    return (\n        <>\n            <Navbar isFixed={true} />\n            <MaxWidthWrapper className=\"py-8 mt-20\">\n                <h2 className=\"text-3xl font-bold mb-6 text-center text-jaffa-700\">Admin TTS Tesla</h2>\n                <Card className=\"p-6 mb-8\">\n                    <h3 className=\"text-xl font-semibold mb-4\">{editing ? \"Edit Soal\" : \"Tambah Soal\"}</h3>\n                    <form onSubmit={handleSubmit} className=\"flex flex-col gap-3\">\n                        <div>\n                            <label className=\"mr-2\">Tipe:</label>\n                            <select name=\"tipe\" value={form.tipe} onChange={handleChange} className=\"border rounded px-2 py-1\">\n                                <option value=\"mendatar\">Mendatar</option>\n                                <option value=\"menurun\">Menurun</option>\n                            </select>\n                        </div>\n                        <div>\n                            <label className=\"mr-2\">Nomor:</label>\n                            <input name=\"nomor\" type=\"number\" value={form.nomor} onChange={handleChange} className=\"border rounded px-2 py-1\" required />\n                        </div>\n                        <div>\n                            <label className=\"mr-2\">Pertanyaan:</label>\n                            <input name=\"pertanyaan\" type=\"text\" value={form.pertanyaan} onChange={handleChange} className=\"border rounded px-2 py-1 w-full\" required />\n                        </div>\n                        <div>\n                            <label className=\"mr-2\">Jawaban:</label>\n                            <input name=\"jawaban\" type=\"text\" value={form.jawaban} onChange={handleChange} className=\"border rounded px-2 py-1 w-full\" required />\n                        </div>\n                        <div>\n                            <button type=\"submit\" className=\"bg-jaffa-500 hover:bg-jaffa-600 text-white px-4 py-2 rounded\">\n                                {editing ? \"Update\" : \"Tambah\"}\n                            </button>\n                            {editing && (\n                                <button type=\"button\" className=\"ml-2 px-4 py-2 rounded border\" onClick={() => { setForm(emptySoal); setEditing(false); }}>\n                                    Batal\n                                </button>\n                            )}\n                        </div>\n                        {message && <div className=\"text-green-600\">{message}</div>}\n                    </form>\n                </Card>\n                <Card className=\"p-6\">\n                    <h3 className=\"text-xl font-semibold mb-4\">Daftar Soal</h3>\n                    <table className=\"w-full border\">\n                        <thead>\n                            <tr>\n                                <th className=\"border px-2 py-1\">ID</th>\n                                <th className=\"border px-2 py-1\">Nomor</th>\n                                <th className=\"border px-2 py-1\">Tipe</th>\n                                <th className=\"border px-2 py-1\">Pertanyaan</th>\n                                <th className=\"border px-2 py-1\">Jawaban</th>\n                                <th className=\"border px-2 py-1\">Aksi</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            {soals.map(soal => (\n                                <tr key={soal.id}>\n                                    <td className=\"border px-2 py-1\">{soal.id}</td>\n                                    <td className=\"border px-2 py-1\">{soal.nomor}</td>\n                                    <td className=\"border px-2 py-1\">{soal.tipe}</td>\n                                    <td className=\"border px-2 py-1\">{soal.pertanyaan}</td>\n                                    <td className=\"border px-2 py-1\">{soal.jawaban}</td>\n                                    <td className=\"border px-2 py-1\">\n                                        <button className=\"text-blue-600 mr-2\" onClick={() => handleEdit(soal)}>Edit</button>\n                                        <button className=\"text-red-600\" onClick={() => handleDelete(soal.id)}>Hapus</button>\n                                    </td>\n                                </tr>\n                            ))}\n                        </tbody>\n                    </table>\n                </Card>\n            </MaxWidthWrapper>\n        </>\n    );\n};\n\nexport default AdminPage;\n"],"names":["emptySoal","id","nomor","tipe","pertanyaan","jawaban","AdminPage","soals","setSoals","useState","form","setForm","editing","setEditing","message","setMessage","fetchSoals","async","res","fetch","result","json","data","useEffect","handleChange","e","target","name","value","jsxRuntimeExports","jsxs","Fragment","children","jsx","Navbar","isFixed","MaxWidthWrapper","className","Card","onSubmit","preventDefault","method","url","payload","Number","headers","_a","document","querySelector","content","body","JSON","stringify","ok","onChange","type","required","onClick","map","soal","handleEdit","confirm","handleDelete"],"mappings":"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"}