import{W as e,j as s,a,q as o,r as l}from"./B2ezQRtC.js";import{D as i}from"./BPaKA6Re.js";import{A as r,a as t,b as n,c as m,d,e as c,f as p,g as u,h}from"./_Ma_2ICp.js";import{b as j,B as x}from"./DKF0wvM1.js";import{D as k}from"./CkpMcrFS.js";import{S as f}from"./CHE4A43M.js";import{B as g}from"./CTpWhTtB.js";import{D as v,f as b,a as N,b as w,c as y,g as _,e as K}from"./CNO_HzOR.js";import{I as C}from"./D09QhgjJ.js";import{L as A}from"./D16DxfL8.js";import{T as D}from"./pYjP1Ni1.js";import{u as E}from"./DxB2ovGI.js";import{l as F}from"./BZtDV8eV.js";import{I}from"./D_YJL0iU.js";import"./DxDuD6EU.js";import"./D-yRTXvB.js";import"./rgHo8Fi_.js";import"./B8fXuJzw.js";import"./BmJlxMtk.js";import"./Nn4f6Ig9.js";import"./BippHqCS.js";import"./CUvdv9Zt.js";import"./HbssZwBM.js";import"./D7IIagnU.js";import"./BGXVNWhb.js";import"./Ds_AqIEl.js";import"./BFLIDDgL.js";import"./D6mU_1F8.js";import"./DEeQTFof.js";import"./CrP6LGn8.js";const S=({data:o})=>{const{data:l,setData:i,put:k}=e({id:o.id,_method:"put"});return s.jsx(s.Fragment,{children:s.jsxs("div",{className:"flex gap-1 p-2",children:[s.jsx(a,{href:`/dashboard/user/edit/${o.id}`,className:`${j({size:"sm"})}`,children:"Edit"}),s.jsxs(r,{children:[s.jsx(t,{asChild:!0,children:s.jsx(x,{variant:"outline",size:"sm",children:"Set Ketua Kelompok"})}),s.jsxs(n,{children:[s.jsxs(m,{children:[s.jsx(d,{children:"Apakah kamu yakin?"}),s.jsx(c,{children:"Kamu akan mengubah status user ini menjadi ketua kelompok."})]}),s.jsxs(p,{children:[s.jsx(u,{children:"Cancel"}),s.jsx(h,{onClick:()=>{k(route("dashboard.kelompok.set-ketua"))},children:"Continue"})]})]})]})]})})},T=[{id:"no",header:"No",cell:({row:e})=>e.original.no},{id:"name",accessorKey:"user.name",header:"Nama",cell:({row:e})=>e.original.user.name},{id:"nim",accessorKey:"user.nim",header:"NIM",cell:({row:e})=>e.original.user.nim},{id:"email",accessorKey:"user.email",header:"Email",cell:({row:e})=>e.original.user.email},{id:"status",accessorKey:"user.isKetua",header:"Status",cell:({row:e})=>e.original.user.isKetua?"Ketua":"Anggota"},{id:"actions",header:"Aksi",cell:({row:e})=>s.jsx(S,{data:e.original})}],z=()=>s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"flex items-start justify-between"}),s.jsx(f,{}),s.jsx(k,{searchKey:"Nama, Nim, Email",columns:T,apiEndpoint:route("dashboard.user.data.maba"),title:"Data Kelompok",description:"Gunakan sistem informasi ini untuk melihat data kelompok!"})]}),B=[{title:"Dashboard",link:"/dashboard"},{title:"Informasi Kelompok",link:"/dashboard/informasi-kelompok"}];function M({auth:r}){const{toast:t}=E(),{flash:n}=o().props;l.useEffect((()=>{n.response&&(200===n.response.status?t({title:"Berhasil",description:n.response.message,variant:"default"}):t({title:"Gagal",description:n.response.message,variant:"destructive"}),window.location.reload())}),[n,t]);const[m,d]=l.useState(null),[c,p]=l.useState(""),[u,h]=l.useState(),{data:k,setData:f,post:S}=e({nama_kelompok:"",logo_kelompok:null,_method:"put"});l.useEffect((()=>{(async()=>{const e=await fetch(route("dashboard.kelompok.data"),{method:"GET",headers:{"Content-Type":"application/json"}}),s=await e.json();h(s),f("nama_kelompok",s.nama_kelompok)})()}),[]);return s.jsxs(s.Fragment,{children:[s.jsxs(i,{user:r.user,children:[s.jsx(g,{items:B}),s.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Informasi Kelompok"}),s.jsx("div",{className:"w-36 h-36 md:mx-0 mx-auto overflow-hidden border rounded-full",children:(null==u?void 0:u.logo_kelompok)?s.jsx("img",{src:null==u?void 0:u.logo_kelompok,alt:`logo kelompok ${null==u?void 0:u.nama_kelompok}`}):s.jsx("img",{src:F,alt:"logopplk"})}),s.jsxs("div",{className:"flex items-center justify-start gap-2 font-semibold",children:[s.jsxs("p",{className:"line-clamp-1 text-lg capitalize",children:["Kelompok ",null==u?void 0:u.no_kelompok," ",null==u?void 0:u.nama_kelompok]}),s.jsxs(v,{children:[s.jsx(b,{asChild:!0,children:s.jsx(I,{className:"-mt-[1px] cursor-pointer"})}),s.jsxs(N,{className:"sm:max-w-[425px]",children:[s.jsx(w,{children:s.jsx(y,{children:"Edit Informasi Kelompok"})}),s.jsxs("div",{className:"grid gap-4 py-4",children:[s.jsxs("div",{className:"w-36 h-36 relative flex items-center justify-center mx-auto border rounded-full",children:[c?s.jsx("div",{className:"w-36 h-36 overflow-hidden rounded-full",children:s.jsx("img",{src:c,alt:"preview-image-kelompok w-full h-full"})}):s.jsx("div",{className:"w-36 h-36 overflow-hidden rounded-full",children:s.jsx("img",{src:(null==u?void 0:u.logo_kelompok)?null==u?void 0:u.logo_kelompok:F,alt:`logo kelompok ${null==u?void 0:u.nama_kelompok}`})}),s.jsx(A,{htmlFor:"upload-logo-kelompok",children:s.jsx(I,{size:32,color:"white",className:"-mt-[1px] cursor-pointer absolute bottom-1 right-1 bg-primary border rounded-full p-1"})}),s.jsx(C,{type:"file",onChange:e=>{const s=e.target.files[0];if(s){if(!s.type.startsWith("image"))return t({title:"Invalid File Type",description:"Tolong pilih file gambar.",variant:"destructive"}),d(null),f("logo_kelompok",null),void p("");if(s.size>2048e3)return t({title:"File Too Large",description:"Pilih foto yang berukuran dibawah 2MB.",variant:"destructive"}),d(null),f("logo_kelompok",null),void p("");d(s),p(URL.createObjectURL(s)),f("logo_kelompok",s)}else d(null),f("logo_kelompok",null),p("")},accept:"image/*",className:"hidden",id:"upload-logo-kelompok"})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx(A,{htmlFor:"nama-kelompok",className:"text-left",children:"Nama Kelompok"}),s.jsx(C,{id:"nama-kelompok",value:k.nama_kelompok,onChange:e=>f("nama_kelompok",e.target.value),placeholder:"Nama Kelompok Anda",className:"mt-1"})]})]}),s.jsxs(_,{children:[s.jsx(K,{asChild:!0,children:s.jsx(x,{variant:"outline",children:"Batalkan"})}),s.jsx(K,{asChild:!0,children:s.jsx(x,{type:"submit",onClick:()=>{S(route("dashboard.kelompok.update"))},children:"Simpan"})})]})]})]})]}),s.jsxs("div",{className:"flex max-w-sm gap-2",children:[s.jsxs("div",{className:"w-full px-2 py-3 border-2 rounded-md",children:[s.jsx("h2",{className:"font-bold",children:"Daplok"}),s.jsxs("div",{className:"mt-5",children:[s.jsx("p",{className:"text-lg font-bold",children:null==u?void 0:u.daplok.name}),s.jsx("p",{className:"font-semibold",children:null==u?void 0:u.daplok.prodi.nama_prodi})]})]}),s.jsxs("div",{className:"w-full px-2 py-3 border-2 rounded-md",children:[s.jsx("h2",{className:"font-bold",children:"Mentor"}),s.jsxs("div",{className:"mt-5",children:[s.jsx("p",{className:"text-lg font-bold",children:null==u?void 0:u.mentor.name}),s.jsx("p",{className:"font-semibold",children:null==u?void 0:u.mentor.prodi.nama_prodi})]})]})]}),s.jsxs("div",{className:"flex flex-col items-center justify-center max-w-sm px-10 py-5 border-2 rounded-md",children:[s.jsx("h2",{className:"font-semibold",children:"Absensi Maba"}),s.jsx(a,{href:route("dashboard.absensi-maba/presensi"),className:`${j()} mt-2`,children:"Mulai Absen Maba"})]}),s.jsx(z,{})]}),s.jsx(D,{})]})}export{M as default};
