import{r as e,d as t,j as a,R as s}from"./Cuadvpgc.js";import{D as n}from"./BWwIheCN.js";import"./CBoCqJyG.js";import"./CnTfwrat.js";import"./J5x9RQPa.js";import"./yEihEaud.js";import"./OhYcO60T.js";import"./BATGzmgJ.js";import"./BbWRkWWZ.js";import"./BMbQ6VS6.js";import"./z08mKKfS.js";import"./ChplkwN5.js";function r(){const[r,l]=e.useState("Petunjuk Soal"),[o,i]=e.useState(!1),[d,c]=e.useState(!1),[m,x]=e.useState(!1),[h,u]=e.useState(!1),[g,w]=e.useState(!1),[f,p]=e.useState(null),[b,j]=e.useState(null),[y,v]=e.useState("across"),[N,k]=e.useState({across:[],down:[]}),[C,S]=e.useState([]),[W,R]=e.useState(0),[$,A]=e.useState(!0),[E,L]=e.useState(""),[H,T]=e.useState(""),[_,M]=e.useState({correct:0,wrong:0}),[P,B]=e.useState(!0),[I,z]=e.useState(!1),[D,J]=e.useState({}),[F,O]=e.useState([]),X=e.useRef(null),[Y,K]=e.useState({across:[],down:[]}),[U,G]=e.useState([]);e.useEffect((()=>{(async()=>{B(!0);try{const e=(await t.get("/api/admin/tesla/")).data.data;let a=0,s=0;e.forEach((e=>{"mendatar"===e.tipe?(a=Math.max(a,e.start_row),s=Math.max(s,e.start_col+(e.jawaban?.length||0)-1)):"menurun"===e.tipe&&(a=Math.max(a,e.start_row+(e.jawaban?.length||0)-1),s=Math.max(s,e.start_col))}));const n=Math.max(a+1,s+1,10),r=e.filter((e=>"mendatar"===e.tipe)).map((e=>({number:e.nomor,clue:e.pertanyaan,answer:e.jawaban,direction:"across",startRow:e.start_row,startCol:e.start_col,isAnswered:!1}))),l=e.filter((e=>"menurun"===e.tipe)).map((e=>({number:e.nomor,clue:e.pertanyaan,answer:e.jawaban,direction:"down",startRow:e.start_row,startCol:e.start_col,isAnswered:!1}))),o=Array(n).fill(null).map((()=>Array(n).fill(null).map((()=>({letter:"",isBlack:!1,isSelected:!1,isHighlighted:!1,isCorrect:!1,isWrong:!1})))));e.forEach((e=>{e.start_row>=0&&e.start_row<n&&e.start_col>=0&&e.start_col<n&&(o[e.start_row][e.start_col].number=e.nomor)})),K({across:r,down:l}),G(o)}catch{K({across:[],down:[]}),G([])}B(!1)})()}),[]),e.useEffect((()=>{I&&(q(),A(!0),R(0))}),[I]),e.useEffect((()=>{if(!I)return;const e=setInterval((()=>{$&&R((e=>e+1))}),1e3);return()=>clearInterval(e)}),[$,I]);const q=()=>{B(!0),k({across:Y.across.map((e=>({...e,isAnswered:!1}))),down:Y.down.map((e=>({...e,isAnswered:!1})))}),S(U.map((e=>e.map((e=>({...e,letter:"",isSelected:!1,isHighlighted:!1,isCorrect:!1,isWrong:!1})))))),B(!1)},Q=()=>{const e=C.map((e=>e.map((e=>e.isWrong?{...e,letter:""}:e))));S(e),J({})},V=e=>{const t=C.map((e=>e.map((e=>({...e,isHighlighted:!1,isSelected:!1,isWrong:!1})))));if("across"===e.direction){for(let a=e.startCol;a<e.startCol+e.answer.length;a++)a<t[e.startRow].length&&(t[e.startRow][a].isHighlighted=!0);t[e.startRow][e.startCol].isSelected=!0,p({row:e.startRow,col:e.startCol})}else{for(let a=e.startRow;a<e.startRow+e.answer.length;a++)a<t.length&&(t[a][e.startCol].isHighlighted=!0);t[e.startRow][e.startCol].isSelected=!0,p({row:e.startRow,col:e.startCol})}j(e),S(t)},Z=async()=>{if(!E||!H||!b)return;const e=H.toUpperCase();if(e.length!==b.answer.length)return;let a="salah";try{const e=await t.post(`/api/admin/tesla/${b.number}`,{jawaban:H});a=e.data.hasil}catch{a="salah"}let s=[...C.map((e=>[...e]))],n=s.length,r=!1;if("across"===b.direction){b.startCol+b.answer.length-1>=n&&(r=!0)}else{b.startRow+b.answer.length-1>=n&&(r=!0)}if("benar"===a&&r){const e=Math.max("across"===b.direction?b.startCol+b.answer.length:n,"down"===b.direction?b.startRow+b.answer.length:n,n+1),t=()=>({letter:"",isBlack:!1,isSelected:!1,isHighlighted:!1,isCorrect:!1,isWrong:!1});for(;s.length<e;)s.push(Array(e).fill(null).map(t));for(let a=0;a<s.length;a++)for(;s[a].length<e;)s[a].push(t());n=e}if("across"===b.direction)for(let t=0;t<b.answer.length;t++){const e=b.startCol+t;e>=s[b.startRow].length||(s[b.startRow][e].isCorrect||(s[b.startRow][e].isWrong=!1,"salah"===a&&(s[b.startRow][e].letter="")))}else for(let t=0;t<b.answer.length;t++){const e=b.startRow+t;e>=s.length||(s[e][b.startCol].isCorrect||(s[e][b.startCol].isWrong=!1,"salah"===a&&(s[e][b.startCol].letter="")))}if("across"===b.direction)for(let t=0;t<b.answer.length;t++){const n=b.startCol+t;n>=s[b.startRow].length||("benar"===a?(s[b.startRow][n].letter=e[t]||"",s[b.startRow][n].isCorrect=!0,s[b.startRow][n].isWrong=!1):s[b.startRow][n].isCorrect||(s[b.startRow][n].letter="",s[b.startRow][n].isWrong=!0))}else for(let t=0;t<b.answer.length;t++){const n=b.startRow+t;n>=s.length||("benar"===a?(s[n][b.startCol].letter=e[t]||"",s[n][b.startCol].isCorrect=!0,s[n][b.startCol].isWrong=!1):s[n][b.startCol].isCorrect||(s[n][b.startCol].letter="",s[n][b.startCol].isWrong=!0))}k((e=>"across"===b.direction?{...e,across:e.across.map((e=>e.number===b.number?{...e,isAnswered:"benar"===a}:e))}:{...e,down:e.down.map((e=>e.number===b.number?{...e,isAnswered:"benar"===a}:e))})),S(s),J((e=>{const t=E;if("salah"===a)return{...e,[t]:""};{const a={...e};return delete a[t],a}})),T(""),L(""),j(null)},ee=e=>{const t=e%60;return`${Math.floor(e/60).toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`},te=(()=>{const e=N.across.length+N.down.length;if(!I||0===e)return{percentage:0,answered:0,total:e};const t=[...N.across,...N.down].filter((e=>{const t=e.answer;let a=!0;for(let s=0;s<t.length;s++){const n="across"===e.direction?e.startRow:e.startRow+s,r="across"===e.direction?e.startCol+s:e.startCol;if(!(n>=C.length||r>=C[0].length)&&C[n][r].letter!==t[s]){a=!1;break}}return a})).length;return{percentage:Math.round(t/e*100),answered:t,total:e}})(),ae=({isOpen:e,onClose:t})=>e?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4 md:hidden",children:a.jsxs("div",{className:"bg-white w-full max-w-sm rounded-lg overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-b from-[#BF4000] to-[#591E00] text-white",children:[a.jsx("h3",{className:"font-medium",children:"Progress"}),a.jsx("button",{onClick:t,className:"text-white text-xl font-bold",children:"×"})]}),a.jsxs("div",{className:"p-4",children:[a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-4",children:a.jsx("div",{className:"bg-orange-500 h-2 rounded-full",style:{width:`${te.percentage}%`}})}),a.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"font-bold text-gray-800",children:ee(W)}),a.jsx("div",{children:"Waktu"})]}),a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"font-bold text-gray-800",children:[te.percentage,"%"]}),a.jsx("div",{children:"Selesai"})]}),a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"font-bold text-gray-800",children:[te.answered,"/",te.total]}),a.jsx("div",{children:"Pertanyaan"})]})]})]})]})}):null,se=({isOpen:e,onClose:t,correct:s,wrong:n})=>e?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-start justify-center p-4 pt-[15vh]",children:a.jsxs("div",{className:"bg-white w-full max-w-md mx-auto rounded-lg overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-b from-[#BF4000] to-[#591E00] text-white",children:[a.jsx("h3",{className:"font-medium",children:"Hasil Pemeriksaan"}),a.jsx("button",{onClick:t,className:"text-white text-xl font-bold",children:"×"})]}),a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex justify-between mb-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-green-600",children:s}),a.jsx("div",{className:"text-sm text-gray-600",children:"Benar"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-red-600",children:n}),a.jsx("div",{className:"text-sm text-gray-600",children:"Salah"})]})]}),a.jsx("div",{className:"text-center mt-4",children:a.jsx("div",{className:"text-lg font-medium text-gray-800",children:s===te.total?"Selamat! Anda telah menyelesaikan semua soal dengan benar!":s>n?"Bagus! Tingkatkan lagi jawaban yang salah!":"Coba periksa kembali jawaban Anda!"})}),a.jsx("button",{onClick:t,className:"mt-6 w-full bg-orange-500 text-white py-2 rounded-md hover:bg-orange-600",children:"Tutup"})]})]})}):null,ne=()=>Y.across.length>0?{clue:Y.across[0],key:`across-${Y.across[0].number}`}:Y.down.length>0?{clue:Y.down[0],key:`down-${Y.down[0].number}`}:null;e.useEffect((()=>{const e=localStorage.getItem("tesla_history");if(e)try{O(JSON.parse(e))}catch{}}),[]),e.useEffect((()=>{localStorage.setItem("tesla_history",JSON.stringify(F))}),[F]);const re=e=>{if(!e)return null;const t=[...N.across,...N.down].sort(((e,t)=>e.number-t.number));for(let a=t.findIndex((t=>t.direction===e.direction&&t.number===e.number))+1;a<t.length;a++)if(!t[a].isAnswered)return t[a];for(let a=0;a<t.length;a++)if(!t[a].isAnswered)return t[a];return t[0]||null},[le,oe]=e.useState("DAY ?");e.useEffect((()=>{t.get("/api/day/").then((e=>{"string"==typeof e.data?oe(e.data):e.data?.day?oe(e.data.day):e.data?.data?.change_day&&oe(e.data.data.change_day)})).catch((()=>oe("DAY 1")))}),[]);const[ie,de]=e.useState(!1),ce=e.useRef(null);return e.useEffect((()=>{if(!ie)return;const e=e=>{ce.current&&!ce.current.contains(e.target)&&de(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}),[ie]),a.jsxs(n,{children:[a.jsx("style",{children:"\n                html, body {\n                    overflow-x: hidden !important;\n                    width: 100% !important;\n                    max-width: 100vw !important;\n                    position: relative;\n                }\n                #app, #root {\n                    width: 100% !important;\n                    max-width: 100vw !important;\n                    overflow-x: hidden !important;\n                }\n            "}),a.jsx("div",{className:"fixed inset-0 z-0 bg-cover bg-center bg-no-repeat overflow-x-hidden",style:{backgroundImage:"url(/build/assets/CvYg2ffC.png)",width:"100vw",maxWidth:"100vw",left:0,right:0},children:a.jsx("div",{className:"absolute inset-0 bg-[#BF400099] mix-blend-multiply pointer-events-none"})}),a.jsxs("div",{className:"relative z-10 my-4 md:my-40 md:mx-auto w-full overflow-x-hidden",style:{maxWidth:1092,marginLeft:"auto",marginRight:"auto"},children:[a.jsx("div",{className:"bg-[#b84c19] w-full text-white p-3 md:p-4 md:mt-0 mt-32 rounded-lg mb-4 relative",style:{maxWidth:1092,marginLeft:"auto",marginRight:"auto"},children:a.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between w-full",children:a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:space-x-8 w-full",children:[a.jsxs("div",{className:"flex flex-row flex-wrap items-center justify-between w-full md:w-auto md:justify-start md:space-x-8 gap-y-2",style:{position:"relative",top:0,left:0},children:[a.jsx("div",{className:"flex flex-col items-center justify-center w-24",children:a.jsx("div",{className:"text-2xl md:text-3xl font-bold leading-tight",children:le})}),a.jsxs("div",{className:"flex flex-col items-center justify-center w-24",children:[a.jsx("div",{className:"text-2xl md:text-3xl font-bold leading-tight",children:10*te.answered}),a.jsx("div",{className:"text-xs md:text-sm",children:"Skor"})]}),a.jsxs("div",{className:"flex flex-col items-center justify-center w-24",children:[a.jsx("div",{className:"text-2xl md:text-3xl font-bold leading-tight",children:ee(W)}),a.jsx("div",{className:"text-xs md:text-sm",children:"Waktu"})]}),a.jsxs("div",{className:"flex flex-col items-center justify-center w-24",children:[a.jsxs("div",{className:"text-2xl md:text-3xl font-bold leading-tight",children:[te.answered,"/",te.total]}),a.jsx("div",{className:"text-xs md:text-sm",children:"Pertanyaan"})]}),a.jsxs("div",{className:"flex flex-col items-center justify-center w-24",children:[a.jsxs("div",{className:"text-2xl md:text-3xl font-bold leading-tight",children:[te.percentage,"%"]}),a.jsx("div",{className:"text-xs md:text-sm",children:"Selesai"})]})]}),a.jsxs("div",{className:"flex flex-row flex-wrap items-center justify-center md:justify-end gap-2 md:space-x-5 mt-4 md:mt-0 w-full md:w-auto",children:[a.jsx("button",{onClick:I?()=>{const e=[...C];let t=0,a=0;const s={...N};for(const n of["across","down"])s[n]=s[n].map((s=>{let n=!0;const r=s.answer;for(let t=0;t<r.length;t++){const a="across"===s.direction?s.startRow:s.startRow+t,n="across"===s.direction?s.startCol+t:s.startCol;a>=e.length||n>=e[0].length||(e[a][n].isCorrect||(e[a][n].isWrong=!1))}for(let t=0;t<r.length;t++){const a="across"===s.direction?s.startRow:s.startRow+t,l="across"===s.direction?s.startCol+t:s.startCol;a>=e.length||l>=e[0].length||(e[a][l].letter!==r[t]?(e[a][l].isCorrect||(e[a][l].isWrong=!0),n=!1):(e[a][l].isCorrect=!0,e[a][l].isWrong=!1))}return n?t++:a++,{...s,isAnswered:n}}));S(e),k(s),M({correct:t,wrong:a}),x(!0)}:void 0,className:`bg-white shadow-lg text-orange-600 px-4 py-2 rounded text-xs md:text-sm font-medium transition-all duration-150\n                                        ${I?"hover:scale-105 hover:bg-orange-100":"opacity-50 cursor-not-allowed"}\n                                    `,style:{minWidth:110,minHeight:40},disabled:!I,children:"Cek Jawaban"}),a.jsx("button",{onClick:()=>u(!0),className:"bg-white shadow-lg text-orange-600 px-4 py-2 rounded text-xs md:text-sm font-medium transition-all duration-150 hover:scale-105 hover:bg-orange-100",style:{minWidth:110,minHeight:40},children:"Petunjuk"}),a.jsx("button",{onClick:()=>{(async()=>{try{const e=await t.get("/api/progres/");Array.isArray(e.data.data)&&O(e.data.data.map((e=>({time:e.waktu,percentage:e.selesai,answered:parseInt(e.jawaban.split("/")[0]),total:parseInt(e.jawaban.split("/")[1]),date:new Date(e.tanggal).toLocaleString(),score:e.skor}))))}catch(e){401===e?.response?.status&&alert("Anda belum login. Silakan login untuk melihat progres Anda.")}})(),w(!0)},className:"bg-white shadow-lg text-orange-600 px-4 py-2 rounded text-xs md:text-sm font-medium transition-all duration-150 hover:scale-105 hover:bg-orange-100",style:{minWidth:110,minHeight:40},children:"Riwayat"})]})]})})}),a.jsx("div",{className:"flex flex-col md:flex-row gap-4 w-full max-w-full overflow-x-hidden",children:a.jsxs("div",{className:"flex-1 order-2 md:order-1 mx-auto max-w-5xl md:w-full w-full overflow-x-hidden",children:[a.jsx("div",{className:"p-2 md:p-4 rounded-lg mb-4 w-full max-w-full overflow-x-hidden",children:I&&a.jsxs("div",{className:"w-full max-w-full overflow-x-hidden",style:{maxWidth:1092,marginLeft:"auto",marginRight:"auto"},children:[a.jsx("div",{className:"mb-4 bg-white p-4 rounded-lg shadow w-full",style:{maxWidth:"100%"},children:a.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[a.jsxs("div",{className:"flex-1 min-w-[220px] w-full",style:{maxWidth:"100%",position:"relative"},children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pilih Soal"}),a.jsxs("div",{className:"relative",ref:ce,children:[a.jsxs("button",{type:"button",className:"w-full border border-gray-300 rounded-md px-3 py-2 bg-white text-left focus:outline-none focus:ring-2 focus:ring-orange-500 flex justify-between items-center",onClick:()=>de((e=>!e)),children:[a.jsx("span",{children:E?(()=>{const[e,t]=E.split("-"),a=parseInt(t),s=("across"===e?N.across:N.down).find((e=>e.number===a));return s?`${s.number}. ${s.clue} (${s.answer.length} huruf)`:"-- Pilih Soal --"})():"-- Pilih Soal --"}),a.jsx("svg",{className:"w-4 h-4 ml-2 transition-transform "+(ie?"rotate-180":""),fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})})]}),ie&&a.jsx("div",{className:"absolute left-0 mt-2 w-full bg-white border border-gray-200 rounded-md shadow-lg z-30 max-h-72 overflow-y-auto animate-dropdown",style:{minWidth:220,boxShadow:"0 8px 24px 0 rgba(191,64,0,0.10)"},children:a.jsxs("div",{className:"py-1",children:[a.jsx("div",{className:"px-3 py-1 text-xs font-semibold text-orange-700 bg-orange-50 rounded-t",children:"Mendatar"}),0===N.across.length&&a.jsx("div",{className:"px-4 py-2 text-gray-400 text-sm",children:"Tidak ada soal mendatar"}),N.across.map((e=>a.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm hover:bg-orange-100 transition rounded "+(E===`across-${e.number}`?"bg-orange-50 font-semibold text-orange-700":""),onClick:()=>{L(`across-${e.number}`),j(e),v("across"),T(""),Q(),V(e),de(!1),setTimeout((()=>{X.current&&X.current.focus()}),0)},children:[e.number,". ",e.clue," ",a.jsxs("span",{className:"text-gray-400",children:["(",e.answer.length," huruf)"]})]},`across-${e.number}`))),a.jsx("div",{className:"px-3 py-1 text-xs font-semibold text-orange-700 bg-orange-50 mt-2 rounded-t",children:"Menurun"}),0===N.down.length&&a.jsx("div",{className:"px-4 py-2 text-gray-400 text-sm",children:"Tidak ada soal menurun"}),N.down.map((e=>a.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm hover:bg-orange-100 transition rounded "+(E===`down-${e.number}`?"bg-orange-50 font-semibold text-orange-700":""),onClick:()=>{L(`down-${e.number}`),j(e),v("down"),T(""),Q(),V(e),de(!1),setTimeout((()=>{X.current&&X.current.focus()}),0)},children:[e.number,". ",e.clue," ",a.jsxs("span",{className:"text-gray-400",children:["(",e.answer.length," huruf)"]})]},`down-${e.number}`)))]})}),a.jsx("style",{children:"\n                                                        @keyframes dropdown {\n                                                            0% { opacity: 0; transform: translateY(-10px);}\n                                                            100% { opacity: 1; transform: translateY(0);}\n                                                        }\n                                                        .animate-dropdown {\n                                                            animation: dropdown 0.18s cubic-bezier(.4,0,.2,1);\n                                                        }\n                                                    "})]})]}),E&&b&&a.jsxs("div",{className:"flex-1 min-w-[180px] w-full",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Jawaban (",b.answer.length," huruf)"]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{ref:X,type:"text",value:H,onChange:e=>T(e.target.value.toUpperCase()),maxLength:b.answer.length,className:"flex-1 border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-orange-500 uppercase bg-white",placeholder:`Masukkan ${b.answer.length} huruf`,onKeyDown:async e=>{if("Enter"===e.key&&H.length===b.answer.length){let e="salah";try{e=(await t.post(`/api/admin/tesla/${b.number}`,{jawaban:H})).data.hasil}catch{e="salah"}if(await Z(),"benar"===e){const e=re(b);e&&(L(`${e.direction}-${e.number}`),j(e),T(""),V(e),setTimeout((()=>{X.current&&X.current.focus()}),0))}else L(`${b.direction}-${b.number}`),j(b),setTimeout((()=>{X.current&&X.current.focus()}),0)}}}),a.jsx("button",{onClick:async()=>{let e="salah";try{e=(await t.post(`/api/admin/tesla/${b.number}`,{jawaban:H})).data.hasil}catch{e="salah"}if(await Z(),"benar"===e){const e=re(b);e&&(L(`${e.direction}-${e.number}`),j(e),T(""),V(e),setTimeout((()=>{X.current&&X.current.focus()}),0))}else L(`${b.direction}-${b.number}`),j(b),setTimeout((()=>{X.current&&X.current.focus()}),0)},className:"bg-orange-500 text-white px-4 py-2 rounded-md hover:bg-orange-600 transition-all duration-150",children:"Submit"})]})]})]})}),!P&&a.jsxs("div",{className:"bg-white rounded-lg shadow w-full max-w-full overflow-x-auto",style:{border:"1px solid #e5e7eb",display:"block",minWidth:0,width:"100%",padding:0,maxWidth:"100%",WebkitOverflowScrolling:"touch",overflowX:"auto"},onMouseDown:e=>{const t=e.currentTarget;let a=e.pageX-t.offsetLeft,s=t.scrollLeft;const n=e=>{const n=e.pageX-t.offsetLeft;t.scrollLeft=s-(n-a)},r=()=>{window.removeEventListener("mousemove",n),window.removeEventListener("mouseup",r)};window.addEventListener("mousemove",n),window.addEventListener("mouseup",r)},onTouchStart:e=>{const t=e.currentTarget;let a=e.touches[0].pageX-t.offsetLeft,s=t.scrollLeft;const n=e=>{const n=e.touches[0].pageX-t.offsetLeft;t.scrollLeft=s-(n-a)},r=()=>{window.removeEventListener("touchmove",n),window.removeEventListener("touchend",r)};window.addEventListener("touchmove",n),window.addEventListener("touchend",r)},children:[a.jsx("div",{className:"grid gap-0",style:{gridTemplateColumns:C[0]?.length?`repeat(${C[0].length}, 1fr)`:void 0,width:"100%",maxWidth:"100%"},children:(C.length>0?C:[]).map(((e,t)=>a.jsx(s.Fragment,{children:(e||[]).map(((e,s)=>a.jsxs("div",{className:`\n                                                                    border border-gray-400\n                                                                    flex items-center justify-center relative\n                                                                    text-xs md:text-base\n                                                                    transition-all\n                                                                    ${e?.isBlack?"bg-black":""}\n                                                                    ${e?.isCorrect?"bg-green-200":e?.isWrong?"bg-red-200":e?.isSelected?"bg-yellow-200":e?.isHighlighted?"bg-yellow-100":"bg-gray-50"}\n                                                                    ${e?.letter?"font-bold":""}\n                                                                    select-none\n                                                                `,style:{width:"100%",aspectRatio:"1 / 1",minWidth:32,minHeight:32,maxWidth:"100%",maxHeight:"100%",padding:0,boxSizing:"border-box",cursor:e?.number?"pointer":"default",borderRadius:4,borderWidth:1,borderColor:e?.isCorrect?"#22c55e":e?.isWrong?"#ef4444":"#a3a3a3",backgroundColor:e?.isBlack?"#000":e?.isCorrect?"#bbf7d0":e?.isWrong?"#fecaca":e?.isSelected?"#fef08a":e?.isHighlighted?"#fef9c3":"#f9fafb"},children:[e?.number&&a.jsx("span",{className:"absolute top-0 left-0 text-[10px] text-gray-800 pl-0.5 pt-0.5 leading-none cursor-pointer select-none",style:{zIndex:2,background:"rgba(255,255,255,0.7)",borderRadius:2,minWidth:12,textAlign:"left",pointerEvents:"auto"},onClick:()=>{if(!I)return;const e=((e,t)=>{let a=N.across.find((a=>a.startRow===e&&a.startCol===t));return a||(a=N.down.find((a=>a.startRow===e&&a.startCol===t)),a||null)})(t,s);e&&(L(`${e.direction}-${e.number}`),V(e))},children:e.number}),a.jsx("span",{className:""+(e?.isSelected?"text-black font-bold":"text-gray-800"),style:{zIndex:1,width:"100%",textAlign:"center",fontSize:"1rem",lineHeight:"1.5rem",position:"relative"},children:e?.letter||""})]},`${t}-${s}`)))},t)))}),a.jsx("style",{children:"\n                                                .grid::-webkit-scrollbar {\n                                                    display: none !important;\n                                                    width: 0 !important;\n                                                    height: 0 !important;\n                                                    background: transparent !important;\n                                                }\n                                                /* Hide scrollbar for the board container */\n                                                .bg-white.rounded-lg.shadow::-webkit-scrollbar {\n                                                    display: none !important;\n                                                    width: 0 !important;\n                                                    height: 0 !important;\n                                                    background: transparent !important;\n                                                }\n                                                .bg-white.rounded-lg.shadow {\n                                                    -ms-overflow-style: none;  /* IE and Edge */\n                                                    scrollbar-width: none;     /* Firefox */\n                                                }\n                                                "})]})]})}),a.jsxs("div",{className:"flex flex-row flex-wrap gap-2 justify-center items-center",children:[I?a.jsx("button",{onClick:()=>{k({across:Y.across.map((e=>({...e,isAnswered:!1}))),down:Y.down.map((e=>({...e,isAnswered:!1})))}),S(U.map((e=>e.map((e=>({...e,letter:"",isSelected:!1,isHighlighted:!1,isCorrect:!1,isWrong:!1})))))),p(null),j(null),L(""),T(""),R(0),A(!0),z(!0),J({}),M({correct:0,wrong:0});const e=ne();e?(L(e.key),j(e.clue),setTimeout((()=>{V(e.clue),X.current&&X.current.focus()}),0)):(L(""),j(null))},className:"bg-white shadow-lg text-orange-600 px-4 py-2 rounded text-xs md:text-sm font-medium transition-all duration-150 hover:scale-105 hover:bg-orange-100",style:{minWidth:110,minHeight:40,transition:"transform 0.15s",fontWeight:500,boxShadow:"0 2px 8px 0 rgba(191,64,0,0.08)"},children:"Mulai Dari Awal"}):a.jsx("button",{onClick:()=>{if(P)return;k({across:Y.across.map((e=>({...e,isAnswered:!1}))),down:Y.down.map((e=>({...e,isAnswered:!1})))}),S(U.map((e=>e.map((e=>({...e,letter:"",isSelected:!1,isHighlighted:!1,isCorrect:!1,isWrong:!1})))))),z(!0),R(0),A(!0),p(null),j(null),T("");const e=ne();e?(L(e.key),j(e.clue),setTimeout((()=>{V(e.clue)}),0)):(L(""),j(null))},className:"bg-gradient-to-r from-orange-500 to-[#b84c19] text-white font-bold text-lg rounded-xl shadow-lg px-10 py-3 transition-all duration-200 hover:scale-105 hover:from-orange-600 hover:to-[#a03c15] focus:outline-none"+(P?" opacity-50 cursor-not-allowed":""),style:{minWidth:180,minHeight:56,letterSpacing:1,margin:"0 auto",display:"block"},disabled:P,children:"Mulai"}),I&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>{A((e=>!e))},className:"bg-white shadow-lg text-orange-600 px-4 py-2 rounded text-xs md:text-sm font-medium transition-all duration-150 hover:scale-105 hover:bg-orange-100",style:{minWidth:110,minHeight:40,transition:"transform 0.15s",fontWeight:500,boxShadow:"0 2px 8px 0 rgba(191,64,0,0.08)"},children:$?"Pause":"Lanjutkan"}),a.jsx("button",{onClick:async()=>{try{await t.post("/api/progres/",{tanggal:(new Date).toISOString(),waktu:W,selesai:te.percentage,jawaban:`${te.answered}/${te.total}`,skor:10*te.answered})}catch(e){401===e?.response?.status&&alert("Anda belum login. Silakan login untuk menyimpan progres.")}O((e=>[{time:W,percentage:te.percentage,answered:te.answered,total:te.total,date:(new Date).toLocaleString(),score:10*te.answered},...e].slice(0,6))),z(!1),R(0),A(!0),p(null),j(null),L(""),T(""),S([]),k({across:[],down:[]}),J({})},className:"bg-white shadow-lg text-orange-600 px-4 py-2 rounded text-xs md:text-sm font-medium transition-all duration-150 hover:scale-105 hover:bg-orange-100",style:{minWidth:110,minHeight:40,transition:"transform 0.15s",fontWeight:500,boxShadow:"0 2px 8px 0 rgba(191,64,0,0.08)"},children:"Simpan Progres"})]})]})]})})]}),a.jsx(ae,{isOpen:d,onClose:()=>c(!1)}),a.jsx(se,{isOpen:m,onClose:()=>x(!1),correct:_.correct,wrong:_.wrong}),h&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-start justify-center p-4 pt-[15vh]",children:a.jsxs("div",{className:"bg-white w-full max-w-md mx-auto rounded-lg overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-b from-[#BF4000] to-[#591E00] text-white",children:[a.jsx("h3",{className:"font-medium",children:"Petunjuk Bermain"}),a.jsx("button",{onClick:()=>u(!1),className:"text-white text-xl font-bold",children:"×"})]}),a.jsx("div",{className:"p-6",children:a.jsxs("ol",{className:"list-decimal pl-5 space-y-2 text-sm text-gray-700",children:[a.jsx("li",{children:"Pilih soal dari dropdown atau daftar soal"}),a.jsx("li",{children:"Masukkan jawaban pada kolom input"}),a.jsx("li",{children:"Tekan Submit untuk mengisi jawaban"}),a.jsx("li",{children:"Jawaban benar akan berwarna hijau"}),a.jsx("li",{children:"Jawaban salah akan berwarna merah"}),a.jsx("li",{children:'Tekan "Check Jawaban" untuk memeriksa semua jawaban'}),a.jsx("li",{children:'Tekan "Simpan Progres" untuk menyimpan progres permainan'})]})})]})}),g&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-start justify-center p-4 pt-[15vh]",children:a.jsxs("div",{className:"bg-white w-full max-w-md mx-auto rounded-lg overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-b from-[#BF4000] to-[#591E00] text-white",children:[a.jsx("h3",{className:"font-medium",children:"Riwayat Progres"}),a.jsx("button",{onClick:()=>w(!1),className:"text-white text-xl font-bold",children:"×"})]}),a.jsx("div",{className:"p-6",children:F.length>0?a.jsxs("div",{className:"overflow-y-auto",style:{maxHeight:320,overflowX:"auto"},children:[a.jsxs("table",{className:"min-w-full text-sm text-gray-700 table-auto",style:{width:"100%"},children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-2 py-1 text-left whitespace-nowrap",children:"Tanggal"}),a.jsx("th",{className:"px-2 py-1 text-left whitespace-nowrap",children:"Waktu"}),a.jsx("th",{className:"px-2 py-1 text-left whitespace-nowrap",children:"Selesai"}),a.jsx("th",{className:"px-2 py-1 text-left whitespace-nowrap",children:"Jawaban"}),a.jsx("th",{className:"px-2 py-1 text-left whitespace-nowrap",children:"Skor"})]})}),a.jsx("tbody",{children:F.map(((e,t)=>a.jsxs("tr",{className:"border-t",children:[a.jsx("td",{className:"px-2 py-1 break-words","data-label":"Tanggal",children:e.date}),a.jsx("td",{className:"px-2 py-1 break-words","data-label":"Waktu",children:ee(e.time)}),a.jsxs("td",{className:"px-2 py-1 break-words","data-label":"Selesai",children:[e.percentage,"%"]}),a.jsxs("td",{className:"px-2 py-1 break-words","data-label":"Jawaban",children:[e.answered,"/",e.total]}),a.jsx("td",{className:"px-2 py-1 break-words","data-label":"Skor",children:"number"==typeof e.score?e.score:10*e.answered})]},t)))})]}),a.jsx("style",{children:'\n            @media (max-width: 640px) {\n                table, thead, tbody, th, td, tr {\n                    display: block;\n                    width: 100%;\n                }\n                thead {\n                    display: none;\n                }\n                tbody tr {\n                    margin-bottom: 12px;\n                    border: none;\n                    background: #fff;\n                    box-shadow: 0 1px 4px rgba(0,0,0,0.04);\n                    border-radius: 8px;\n                    padding: 8px 0;\n                }\n                td {\n                    padding: 8px 12px;\n                    border: none;\n                    position: relative;\n                    min-width: 0;\n                    word-break: break-word;\n                }\n                td[data-label]:before {\n                    content: attr(data-label) ": ";\n                    font-weight: 600;\n                    color: #b84c19;\n                    display: inline;\n                    margin-right: 4px;\n                    font-size: 0.95em;\n                }\n            }\n        '})]}):a.jsx("div",{className:"text-center text-gray-500",children:"Belum ada history progress."})}),"                    "]})})]})}export{r as default};
