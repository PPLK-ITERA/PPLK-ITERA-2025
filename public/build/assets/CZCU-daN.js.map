{"version":3,"file":"CZCU-daN.js","sources":["../../../resources/js/Components/dashboard/materi/MateriForm.tsx","../../../resources/js/Components/dashboard/materi/MateriCellActions.tsx","../../../resources/js/Pages/Dashboard/materi/Page.tsx"],"sourcesContent":["import { useDebouncedCallback } from \"use-debounce\";\n\nimport React, { FormEvent, useEffect, useState } from \"react\";\n\nimport { useForm } from \"@inertiajs/react\";\n\nimport { Button } from \"@/Components/ui/button\";\nimport { Input } from \"@/Components/ui/input\";\nimport { Label } from \"@/Components/ui/label\";\nimport { toast } from \"@/Components/ui/use-toast\";\n\nimport { Materi } from \"@/lib/types/Materi\";\n\ntype Props = {\n  materi?: Materi;\n};\n\nfunction MateriForm({ materi }: Props) {\n  const { data, setData, post, put, processing, errors } =\n    useForm<Materi>(materi);\n  const [urlError, setUrlError] = useState<string | null>(null);\n  const [error, setError] = useState<string | null>(null);\n\n  const validateUrl = useDebouncedCallback(async () => {\n    if (!/^https:\\/\\/(www\\.)?\\w+\\.google\\.com\\/.*$/g.test(data.link_materi)) {\n      setUrlError(\"link harus dari Google Drive\");\n      return;\n    }\n\n    let id = data.link_materi.split(\"/\")[5];\n    let response = await fetch(\n      `https://www.googleapis.com/drive/v2/files/${id}?key=${import.meta.env.VITE_GOOGLE_API_KEY}`,\n    );\n\n    if (!response.ok) {\n      setUrlError(\"Link drive belum publik, silahkan coba lagi\");\n      return;\n    }\n\n    setUrlError(\"\");\n  }, 200);\n\n  function onSubmit() {\n    toast({\n      title: \"Mohon tunggu sebentar...\",\n      description: \"Sedang mengupload Materi...\",\n    });\n\n    if (materi) {\n      put(route(\"dashboard.materi.update\"), {\n        onError: () => {\n          toast({\n            title: \"Uh oh! Gagal mengupdate Materi.\",\n            description: errors.nama_materi || errors.link_materi,\n          });\n        },\n        onSuccess: () => {\n          toast({\n            title: \"Berhasil!\",\n            description: \"Materi berhasil diupdate.\",\n          });\n        },\n      });\n      window.location.reload();\n    } else {\n      post(route(\"dashboard.materi.store\"), {\n        onError: () => {\n          toast({\n            title: \"Uh oh! Gagal mengupload Materi.\",\n            description: errors.nama_materi || errors.link_materi,\n          });\n        },\n        onSuccess: () => {\n          toast({\n            title: \"Berhasil!\",\n            description: \"Materi berhasil diupload.\",\n          });\n        },\n      });\n      window.location.reload();\n    }\n  }\n\n  return (\n    <form\n      aria-describedby=\"form\"\n      className=\"grid gap-4 py-4\"\n      onSubmit={(e: FormEvent) => {\n        e.preventDefault();\n        onSubmit();\n      }}\n    >\n      <div className=\"grid items-center grid-cols-4 gap-4\">\n        <Label htmlFor=\"nama_materi\" className=\"text-right\">\n          Nama Materi\n        </Label>\n        <Input\n          id=\"nama_materi\"\n          name=\"nama_materi\"\n          required\n          type=\"text\"\n          value={data.nama_materi}\n          maxLength={500}\n          className=\"col-span-3\"\n          onChange={(e) => setData(\"nama_materi\", e.target.value)}\n        />\n      </div>\n      <div className=\"grid items-center grid-cols-4 gap-4\">\n        <Label htmlFor=\"hari\" className=\"text-right\">\n          Hari Ke-\n        </Label>\n        <Input\n          id=\"hari\"\n          name=\"hari\"\n          required\n          type=\"text\"\n          value={data.hari}\n          maxLength={1}\n          className=\"col-span-3\"\n          onChange={(e) => {\n            setData(\"hari\", e.target.value);\n          }}\n        />\n      </div>\n      <div className=\"grid items-center grid-cols-4 gap-4\">\n        <Label htmlFor=\"link_materi\" className=\"text-right\">\n          Link Google Drive Materi\n        </Label>\n        <Input\n          id=\"link_materi\"\n          name=\"link_materi\"\n          required\n          type=\"text\"\n          value={data.link_materi}\n          maxLength={500}\n          className=\"col-span-3\"\n          onChange={(e) => {\n            setData(\"link_materi\", e.target.value);\n            validateUrl();\n          }}\n        />\n      </div>\n\n      <div className=\"place-content-center flex items-center justify-between gap-4 text-right\">\n        <Button\n          className=\"bg-orange-500\"\n          size={\"sm\"}\n          type=\"button\"\n          onClick={validateUrl}\n        >\n          Refresh Link\n        </Button>\n        {!!urlError ? (\n          <p className=\"text-sm text-red-500\">{urlError}</p>\n        ) : urlError === \"\" ? (\n          <p className=\"text-sm text-green-500\">Link valid</p>\n        ) : null}\n      </div>\n      <div className=\"place-content-center flex items-center justify-between gap-4 mt-4 text-right\">\n        <Button\n          size={\"sm\"}\n          type={\"submit\"}\n          className={`w-full`}\n          disabled={!!urlError || !!error}\n        >\n          {materi ? \"Perbarui\" : \"Tambahkan\"} Materi\n        </Button>\n      </div>\n    </form>\n  );\n}\n\nexport default MateriForm;\n","import { DialogClose } from \"@radix-ui/react-dialog\";\n\nimport { FormEvent, useEffect, useState } from \"react\";\n\nimport { router, useForm } from \"@inertiajs/react\";\n\nimport { IconTrashFilled } from \"@tabler/icons-react\";\n\nimport MateriForm from \"@/Components/dashboard/materi/MateriForm\";\nimport { Button } from \"@/Components/ui/button\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from \"@/Components/ui/dialog\";\nimport { toast } from \"@/Components/ui/use-toast\";\n\nimport { Materi } from \"@/lib/types/Materi\";\n\ninterface MateriActionProps {\n  materi: Materi;\n}\n\nexport const MateriCellActions: React.FC<MateriActionProps> = ({ materi }) => {\n  const {\n    data,\n    setData,\n    delete: del,\n    processing,\n    errors,\n  } = useForm<Materi>(materi);\n  const [deleteDialogOpen, setDeleteDialogOpen] = useState(false);\n  const [editDialogOpen, setEditDialogOpen] = useState(false);\n\n  useEffect(() => {\n    if (deleteDialogOpen || editDialogOpen) {\n      setData(materi);\n    }\n  }, [deleteDialogOpen, editDialogOpen, materi, setData]);\n\n  function onDelete() {\n    del(route(\"dashboard.materi.destroy\"), {\n      onError: () => {\n        toast({\n          title: \"Uh oh! Gagal menghapus Materi.\",\n          description: errors.nama_materi || errors.link_materi,\n        });\n      },\n      onSuccess: () => {\n        toast({\n          title: \"Berhasil!\",\n          description: \"Materi berhasil dihapus.\",\n        });\n      },\n    });\n    window.location.reload();\n  }\n\n  return (\n    <>\n      <div className=\"flex gap-1 p-2\">\n        <Dialog open={deleteDialogOpen} onOpenChange={setDeleteDialogOpen}>\n          <DialogTrigger asChild>\n            <Button\n              className=\"bg-red-500\"\n              onClick={() => setDeleteDialogOpen(true)}\n            >\n              <IconTrashFilled size={18} />\n              <span>Hapus</span>\n            </Button>\n          </DialogTrigger>\n          <DialogContent className=\"sm:max-w-[425px]\">\n            <DialogHeader>\n              <DialogTitle>Hapus Materi</DialogTitle>\n            </DialogHeader>\n            <div>\n              <p>\n                Apakah anda yakin ingin menghapus materi {materi.nama_materi}?\n              </p>\n              <div className=\"flex justify-end gap-2 mt-4\">\n                <DialogClose asChild>\n                  <Button>Batal</Button>\n                </DialogClose>\n                <Button onClick={onDelete} className=\"bg-red-500\">\n                  Hapus\n                </Button>\n              </div>\n            </div>\n          </DialogContent>\n        </Dialog>\n\n        <Dialog open={editDialogOpen} onOpenChange={setEditDialogOpen}>\n          <DialogTrigger asChild>\n            <Button onClick={() => setEditDialogOpen(true)}>\n              <span>Edit</span>\n            </Button>\n          </DialogTrigger>\n          <DialogContent className=\"sm:max-w-[425px]\">\n            <DialogHeader>\n              <DialogTitle>Edit Materi</DialogTitle>\n            </DialogHeader>\n            <MateriForm materi={materi} />\n          </DialogContent>\n        </Dialog>\n      </div>\n    </>\n  );\n};\n","import { ColumnDef } from \"@tanstack/react-table\";\n\nimport { IconPlus } from \"@tabler/icons-react\";\n\nimport DashboardLayout from \"@/Layouts/DashboardLayout\";\n\nimport { MateriCellActions } from \"@/Components/dashboard/materi/MateriCellActions\";\nimport MateriForm from \"@/Components/dashboard/materi/MateriForm\";\nimport { Breadcrumbs } from \"@/Components/ui/breadcrumbs\";\nimport { Button } from \"@/Components/ui/button\";\nimport { DataTable } from \"@/Components/ui/data-table\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from \"@/Components/ui/dialog\";\nimport { Toaster } from \"@/Components/ui/toaster\";\n\nimport { Materi } from \"@/lib/types/Materi\";\n\nconst breadcrumbItems = [\n  { title: \"Dashboard\", link: \"/dashboard\" },\n  { title: \"Materi\", link: \"/dashboard/materi\" },\n];\n\ninterface MateriDataResponse {\n  no: number;\n  materi: Materi;\n}\n\nexport default function Page({ auth, response }) {\n  const columns: ColumnDef<MateriDataResponse>[] = [\n    {\n      id: \"no\",\n      header: \"No\",\n      cell: ({ row }) => row.index + 1,\n    },\n    {\n      id: \"nama_materi\",\n      accessorKey: \"materi.nama_materi\",\n      header: \"Nama\",\n    },\n    {\n      id: \"link_materi\",\n      accessorKey: \"materi.link_materi\",\n      header: \"Link Materi\",\n    },\n    {\n      id: \"hari\",\n      accessorKey: \"materi.hari\",\n      header: \"Hari Ke\",\n    },\n    {\n      id: \"action\",\n      header: \"Aksi\",\n      cell: ({ row }) => {\n        return <MateriCellActions materi={row.original.materi} />;\n      },\n    },\n  ];\n\n  return (\n    <DashboardLayout user={auth.user}>\n      <Breadcrumbs items={breadcrumbItems} />\n      <h2 className=\"text-3xl font-bold tracking-tight\">Atur Materi</h2>\n\n      <div className=\"place-content-start flex w-full\">\n        {/* add dialog */}\n        <Dialog>\n          <DialogTrigger asChild>\n            <Button>\n              <IconPlus size={18} />\n              <span>Tambah Materi</span>\n            </Button>\n          </DialogTrigger>\n          <DialogContent>\n            <DialogHeader>\n              <DialogTitle>Tambah Materi</DialogTitle>\n            </DialogHeader>\n            <MateriForm />\n          </DialogContent>\n        </Dialog>\n      </div>\n\n      <DataTable\n        searchKey=\"name\"\n        columns={columns}\n        apiEndpoint={route(\"dashboard.materi.data\")}\n        title={\"Data Materi\"}\n        description={\"Data Materi yang telah diupload.\"}\n      />\n      <Toaster />\n    </DashboardLayout>\n  );\n}\n"],"names":["MateriForm","materi","data","setData","post","put","errors","useForm","urlError","setUrlError","useState","error","setError","validateUrl","useDebouncedCallback","async","test","link_materi","id","split","fetch","ok","jsxs","className","onSubmit","e","preventDefault","toast","title","description","route","onError","nama_materi","onSuccess","window","location","reload","children","jsx","Label","htmlFor","Input","name","required","type","value","maxLength","onChange","target","hari","Button","size","onClick","disabled","MateriCellActions","delete","del","deleteDialogOpen","setDeleteDialogOpen","editDialogOpen","setEditDialogOpen","useEffect","Fragment","Dialog","open","onOpenChange","DialogTrigger","asChild","IconTrashFilled","DialogContent","DialogHeader","DialogTitle","DialogClose","breadcrumbItems","link","Page","auth","response","columns","header","cell","row","index","accessorKey","original","DashboardLayout","user","Breadcrumbs","items","IconPlus","DataTable","searchKey","apiEndpoint","Toaster"],"mappings":"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"}