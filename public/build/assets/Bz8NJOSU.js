import{r as e,j as s,y as a,W as t}from"./DL1UIaFL.js";import{D as o}from"./D1hMwAfR.js";import{e as l,f as r}from"./D-fLw_1r.js";import{c as i}from"./BFRzO6LF.js";import{B as n}from"./CzCJ7yRK.js";import{I as d}from"./D66EeCAJ.js";import{L as c}from"./DKUpUptc.js";import{D as m,a as h,b as u,e as p,c as k}from"./CGIIGKFh.js";import{t as j}from"./mtK6Hdut.js";import{B as x}from"./D2oxTm3v.js";import{D as b}from"./B8w9rIZ9.js";import{T as g}from"./rmHusoaE.js";import{I as f}from"./BCzO38fg.js";import"./CWolEpEX.js";import"./DLMziciK.js";import"./NKOG10jm.js";import"./COcdT02r.js";import"./Cleuz34R.js";import"./jGzR9CvW.js";import"./BZtDV8eV.js";import"./D8c2xbMK.js";import"./KIlWM6bw.js";import"./C2mqksZf.js";
/**
 * @license @tabler/icons-react v3.11.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var v=l("filled","trash-filled","IconTrashFilled",[["path",{d:"M20 6a1 1 0 0 1 .117 1.993l-.117 .007h-.081l-.919 11a3 3 0 0 1 -2.824 2.995l-.176 .005h-8c-1.598 0 -2.904 -1.249 -2.992 -2.75l-.005 -.167l-.923 -11.083h-.08a1 1 0 0 1 -.117 -1.993l.117 -.007h16z",key:"svg-0"}],["path",{d:"M14 2a2 2 0 0 1 2 2a1 1 0 0 1 -1.993 .117l-.007 -.117h-4l-.007 .117a1 1 0 0 1 -1.993 -.117a2 2 0 0 1 1.85 -1.995l.15 -.005h4z",key:"svg-1"}]]),_={BASE_URL:"/build/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_NAME:"Laravel"};function B({booklet:a,onSubmit:t,setData:o}){const[l,r]=e.useState(a?a.url_booklet:""),[m,h]=e.useState(a?a.nama_booklet:""),[u,p]=e.useState(null),[k,j]=e.useState(null),x=i((async e=>{if(!/^https:\/\/(www\.)?\w+\.google\.com\/.*$/g.test(e))return void j("link harus dari Google Drive");let s=e.split("/")[5];(await fetch(`https://www.googleapis.com/drive/v2/files/${s}?key=${_.VITE_GOOGLE_API_KEY}`)).ok?j(""):j("Link drive belum publik, silahkan coba lagi")}),200);return e.useEffect((()=>{x(l)}),[l]),e.useEffect((()=>{p(""===m?"Nama booklet tidak boleh kosong":"")}),[m]),a&&x(a.url_booklet),s.jsxs("form",{"aria-describedby":"form",className:"grid gap-4 py-4",onSubmit:e=>{e.preventDefault(),t(e)},children:[s.jsxs("div",{className:"grid items-center grid-cols-4 gap-4",children:[s.jsx(c,{htmlFor:"nama_booklet",className:"text-right",children:"Nama Booklet"}),s.jsx(d,{id:"nama_booklet",name:"nama_booklet",required:!0,type:"text",maxLength:500,className:"col-span-3",value:m,onChange:e=>h(e.target.value)})]}),s.jsxs("div",{className:"grid items-center grid-cols-4 gap-4",children:[s.jsx(c,{htmlFor:"url_booklet",className:"text-right",children:"Link Google Drive Booklet"}),s.jsx(d,{id:"url_booklet",name:"url_booklet",required:!0,type:"text",maxLength:500,className:"col-span-3",value:l,onChange:e=>r(e.target.value)})]}),s.jsxs("div",{className:"place-content-center flex items-center justify-between gap-4 text-right",children:[s.jsx(n,{size:"sm",className:"w-1/2 bg-orange-500 "+(null===u?"hidden":""),disabled:!!k,onClick:()=>x(l),children:"Refresh Link"}),k?s.jsx("p",{className:"text-sm text-red-500",children:k}):""===k?s.jsx("p",{className:"text-sm text-green-500",children:"Link valid"}):null]}),s.jsx("div",{className:"place-content-center flex items-center justify-between gap-4 mt-4 text-right",children:s.jsxs(n,{size:"sm",type:"submit",className:"w-full "+(null===u?"hidden":""),disabled:!!k,children:[a?"Perbarui":"Tambahkan"," Booklet"]})})]})}const N=({booklet:t,submit:o,setData:l})=>{e.useState(!1),e.useState(!1);return s.jsx(s.Fragment,{children:s.jsxs("div",{className:"flex gap-1 p-2",children:[s.jsxs(m,{children:[s.jsx(h,{asChild:!0,children:s.jsxs(n,{className:"bg-red-500",onClick:()=>l(t),children:[s.jsx(v,{size:18}),s.jsx("span",{children:"Hapus"})]})}),s.jsxs(u,{className:"sm:max-w-[425px]",children:[s.jsx(p,{children:s.jsx(k,{children:"Hapus Booklet"})}),s.jsxs("div",{children:[s.jsxs("p",{children:["Apakah anda yakin ingin menghapus booklet",t.nama_booklet,"?"]}),s.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[s.jsx(r,{asChild:!0,children:s.jsx(n,{children:"Batal"})}),s.jsx(n,{onClick:async()=>{console.log(t),a.delete(route("dashboard.booklet.destroy",t),{onError:()=>{j({title:"Uh oh! Gagal menghapus Booklet.",description:"Gagal menghapus booklet."})},onSuccess:()=>{j({title:"Berhasil menghapus Booklet!",description:"Booklet berhasil dihapus."})}}),window.location.reload()},className:"bg-red-500",children:"Hapus"})]})]})]})]}),s.jsxs(m,{children:[s.jsx(h,{asChild:!0,children:s.jsx(n,{onClick:()=>l(t),children:s.jsx("span",{children:"Edit"})})}),s.jsxs(u,{className:"sm:max-w-[425px]",children:[s.jsx(p,{children:s.jsx(k,{children:"Edit Booklet"})}),s.jsx(B,{booklet:t,onSubmit:function(e){e.preventDefault();let s={id:t.id,nama_booklet:e.currentTarget.nama_booklet.value,url_booklet:e.currentTarget.url_booklet.value};a.put(route("dashboard.booklet.update",s),s,{onError:()=>{j({title:"Uh oh! Gagal menghapus Booklet.",description:"Gagal menghapus booklet."})},onSuccess:()=>{j({title:"Berhasil menghapus Booklet!",description:"Booklet berhasil dihapus."})}}),window.location.reload()},setData:l})]})]})]})})},w=[{title:"Dashboard",link:"/dashboard"},{title:"Booklet",link:"/dashboard/booklet"}];function y({auth:e,response:a}){const{data:l,setData:r,post:i,processing:d,errors:c}=t();function v(e){let s={nama_booklet:e.currentTarget.nama_booklet.value,url_booklet:e.currentTarget.url_booklet.value};i(route("dashboard.booklet.store",s),{onError:()=>{j({title:"Uh oh! Gagal mengupload Booklet.",description:c.nama_booklet||c.url_booklet})},onSuccess:()=>{j({title:"Berhasil mengupload Booklet!",description:"Booklet berhasil diupload."})}}),window.location.reload()}const _=[{id:"no",header:"No",cell:({row:e})=>e.index+1},{id:"nama_booklet",accessorKey:"booklet.nama_booklet",header:"Nama"},{id:"url_booklet",accessorKey:"booklet.url_booklet",header:"Link Booklet"},{id:"action",header:"Aksi",cell:({row:e})=>s.jsx(N,{submit:v,setData:r,booklet:e.original.booklet})}];return s.jsxs(o,{user:e.user,children:[s.jsx(x,{items:w}),s.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Atur Booklet"}),s.jsx("div",{className:"place-content-end flex w-full",children:s.jsxs(m,{children:[s.jsx(h,{asChild:!0,children:s.jsxs(n,{children:[s.jsx(f,{size:18}),s.jsx("span",{children:"Tambah Booklet"})]})}),s.jsxs(u,{children:[s.jsx(p,{children:s.jsx(k,{children:"Tambah Booklet"})}),s.jsx(B,{onSubmit:v,setData:r})]})]})}),s.jsx(b,{searchKey:"name",columns:_,apiEndpoint:route("dashboard.booklet.data"),title:"Data Booklet",description:"Data Booklet yang telah diupload."}),s.jsx(g,{})]})}export{y as default};
