{"version":3,"file":"CiT-vVQ7.js","sources":["../../../resources/js/Pages/Dashboard/cui/izin/Page.tsx"],"sourcesContent":["import { format } from \"date-fns\";\nimport { PageProps } from \"vendor/laravel/breeze/stubs/inertia-react-ts/resources/js/types\";\n\nimport React, { useEffect, useState } from \"react\";\n\nimport { router, useForm, usePage } from \"@inertiajs/react\";\n\nimport { ArrowLeft } from \"lucide-react\";\n\nimport DashboardLayout from \"@/Layouts/DashboardLayout\";\n\nimport { Breadcrumbs } from \"@/Components/ui/breadcrumbs\";\nimport { Button } from \"@/Components/ui/button\";\nimport { Input } from \"@/Components/ui/input\";\nimport { Separator } from \"@/Components/ui/separator\";\nimport { Toaster } from \"@/Components/ui/toaster\";\nimport { useToast } from \"@/Components/ui/use-toast\";\n\nimport { checkImageExists } from \"@/lib/utils\";\n\nconst breadcrumbItems = [\n  { title: \"Dashboard\", link: \"/dashboard\" },\n  { title: \"CUI\", link: \"/dashboard/cui\" },\n  { title: \"Izin\", link: \"/dashboard/cui/izin\" },\n];\n\nfunction TextBox({ value, label }: { value: string; label: string }) {\n  return (\n    <div className=\"flex items-center gap-2\">\n      <p className=\"outline outline-1 px-2 py-1 rounded-full\">{label}</p>\n      <p className=\"outline outline-1 px-2 py-1 rounded-full\">{value}</p>\n    </div>\n  );\n}\n\nfunction DateTimeBox({ value, label }: { value: string; label: string }) {\n  return (\n    <div className=\" flex items-center gap-2\">\n      <div className=\"outline outline-1 outline-black/30 w-40 px-2 py-1 font-medium bg-gray-200 rounded-md\">\n        {label}\n      </div>\n      {value ? format(value, \"dd/MM/yyyy HH:mm\") : \"-\"}\n    </div>\n  );\n}\n\nfunction StatusPita({ pita, riwayat }: { pita: string; riwayat: string }) {\n  return (\n    <>\n      {pita === \"hijau\" ? (\n        <div className=\"flex items-center justify-center p-2 bg-green-500 rounded-lg\">\n          <p className=\"text-lg font-bold text-white\">Pita Hijau</p>\n        </div>\n      ) : pita === \"kuning\" ? (\n        <div className=\"flex items-center justify-center p-2 bg-yellow-500 rounded-lg\">\n          <p className=\"text-lg font-bold text-white\">Pita Kuning</p>\n        </div>\n      ) : (\n        <div className=\"flex items-center justify-center p-2 bg-red-500 rounded-lg\">\n          <p className=\"text-lg font-bold text-white\">Pita Merah</p>\n        </div>\n      )}{\" \"}\n      <div className=\" flex items-center gap-2\">\n        <div className=\"outline outline-1 outline-black/30 w-40 px-2 py-1 font-medium bg-gray-200 rounded-md\">\n          Riwayat Penyakit\n        </div>\n        {riwayat}\n      </div>\n    </>\n  );\n}\n\nfunction Page({ auth, data, flash }) {\n  const {\n    data: formData,\n    setData: setFormData,\n    post,\n    patch,\n    processing,\n  } = useForm({\n    ket_izin: \"\",\n  });\n  const { toast } = useToast();\n  const [imageSrc, setImageSrc] = useState<string | null>(null);\n\n  const testImage = async () => {\n    const url = data.photo_profile_url; // Replace with your image URL\n    const defaultUrl =\n      \"https://upload.wikimedia.org/wikipedia/commons/7/7c/Profile_avatar_placeholder_large.png\"; // Replace with your default image URL\n    const finalUrl = await checkImageExists(url, defaultUrl);\n    setImageSrc(finalUrl as string);\n  };\n\n  React.useEffect(() => {\n    if (flash.response) {\n      if (flash.response.status === 200) {\n        toast({\n          title: \"Berhasil\",\n          description: flash.response.message,\n          variant: \"default\",\n        });\n      } else {\n        toast({\n          title: \"Gagal\",\n          description: flash.response.message,\n          variant: \"destructive\",\n        });\n      }\n      setFormData(\"ket_izin\", \"\");\n    }\n  }, [flash, toast]);\n\n  useEffect(() => {\n    testImage();\n  }, []);\n\n  const handleIzin = () => {\n    post(route(\"cui.izin\", data.qr_code));\n  };\n\n  const handleCabutIzin = () => {\n    patch(route(\"cui.destroy\", data.qr_code));\n  };\n\n  return (\n    <>\n      <DashboardLayout user={auth.user}>\n        <div className=\"flex items-center justify-between space-y-2\">\n          <h2 className=\"text-3xl font-bold tracking-tight\">\n            Izin Peserta CUI\n          </h2>\n        </div>\n\n        <Breadcrumbs items={breadcrumbItems} />\n        <Separator />\n        <Button\n          variant=\"outline\"\n          onClick={() => router.replace(route(\"dashboard.cui\"))}\n        >\n          <ArrowLeft className=\"mr-2\" /> Kembali\n        </Button>\n        <div className=\"md:flex-row md:items-start flex flex-col items-center justify-center gap-4\">\n          <img\n            className=\"h-96 drop-shadow-lg object-cover w-64 rounded-lg\"\n            src={\n              imageSrc ??\n              \"https://upload.wikimedia.org/wikipedia/commons/7/7c/Profile_avatar_placeholder_large.png\"\n            }\n            alt=\"Foto Profil\"\n          />\n          <div className=\"outline outline-1 outline-black/30 flex flex-col w-full gap-2 p-2 ml-3 rounded-md\">\n            <p className=\"text-lg font-bold\">Deskripsi</p>\n            <TextBox value={data.nama} label=\"Nama\" />\n            <TextBox value={data.nim} label=\"NIM\" />\n            <TextBox value={data.prodi} label=\"Prodi\" />\n            <Separator />\n\n            <div className=\"flex items-center gap-2\">\n              <p className=\"text-lg font-bold\">Status</p>\n              <p className=\"outline bg-slate-200 outline-black/30 outline-1 px-2 font-medium uppercase rounded-md\">\n                {data.status}\n              </p>\n            </div>\n            <StatusPita pita={data.pita} riwayat={data.riwayat} />\n            <DateTimeBox label={\"Waktu Hadir\"} value={data.waktu_hadir} />\n            <DateTimeBox label={\"Waktu Izin\"} value={data.waktu_izin} />\n            <DateTimeBox\n              label={\"Waktu Selesai Izin\"}\n              value={data.selesai_izin}\n            />\n          </div>\n\n          <div className=\"outline outline-1 outline-black/30 flex flex-col w-full gap-2 p-2 ml-3 rounded-md\">\n            <p className=\"text-lg font-bold\">Atur Izin</p>\n            <Separator />\n            {data.status === \"hadir\" ? (\n              <div className=\"flex flex-col gap-2\">\n                <Input\n                  onChange={(e) => setFormData(\"ket_izin\", e.target.value)}\n                  value={formData.ket_izin}\n                  placeholder=\"Keterangan\"\n                />\n\n                <Button\n                  className=\"w-full\"\n                  disabled={processing}\n                  onClick={handleIzin}\n                >\n                  Submit\n                </Button>\n              </div>\n            ) : (\n              <div>\n                <p>\n                  <span className=\"font-medium\">Keterangan izin</span>\n                  <br />\n                  {data.ket_izin}\n                </p>\n                <Separator className=\"my-3\" />\n                <Button\n                  className=\"w-full\"\n                  disabled={processing}\n                  onClick={handleCabutIzin}\n                >\n                  Cabut Izin\n                </Button>\n              </div>\n            )}\n          </div>\n        </div>\n      </DashboardLayout>\n      <Toaster />\n    </>\n  );\n}\n\nexport default Page;\n"],"names":["breadcrumbItems","title","link","TextBox","value","label","jsxs","className","children","jsx","DateTimeBox","format","StatusPita","pita","riwayat","jsxRuntimeExports","Fragment","Page","auth","data","flash","formData","setData","setFormData","post","patch","processing","useForm","ket_izin","toast","useToast","imageSrc","setImageSrc","useState","React","useEffect","response","status","description","message","variant","async","url","photo_profile_url","finalUrl","checkImageExists","DashboardLayout","user","Breadcrumbs","items","Separator","Button","onClick","router","replace","route","ArrowLeft","src","alt","nama","nim","prodi","waktu_hadir","waktu_izin","selesai_izin","Input","onChange","e","target","placeholder","disabled","qr_code","Toaster"],"mappings":"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"}