{"version":3,"file":"CjnVMM1d.js","sources":["../../../resources/js/Components/fragments/QuizSkeleton.tsx","../../../resources/js/Components/asesmen/AsesmenForm.tsx","../../../resources/js/Pages/Asesmen/Page.tsx"],"sourcesContent":["import React from \"react\";\n\nexport const QuizSkeleton = ({ className = \"\" }: { className: string }) => {\n  return (\n    <div className={`max-md:grow ${className}`}>\n      <div className=\"animate-pulse w-full h-6 text-xl font-semibold bg-gray-300 rounded-lg\"></div>\n      <div className=\"animate-pulse w-full h-4 mt-2 bg-gray-300 rounded-lg\"></div>\n      <div className=\"animate-pulse w-full h-16 p-4 mt-4 bg-gray-300 rounded-lg shadow-inner\"></div>\n      <ul className=\"flex flex-col w-full gap-2 mt-8\">\n        {Array.from({ length: 4 }).map((_, index) => (\n          <li key={index}>\n            <div className=\"animate-pulse w-full h-12 bg-gray-300 rounded-lg\"></div>\n          </li>\n        ))}\n      </ul>\n      <div className=\"max-md:grow\"></div>\n      <div className=\"animate-pulse w-full h-12 my-8 bg-gray-300 rounded-lg\"></div>\n    </div>\n  );\n};\n","\"use client\";\n\nimport { ScrollArea, ScrollBar } from \"../ui/scroll-area\";\nimport { Toast } from \"../ui/toast\";\nimport { Toaster } from \"../ui/toaster\";\nimport clsx from \"clsx\";\nimport { motion } from \"framer-motion\";\n\nimport React, { useEffect, useState } from \"react\";\n\nimport { router } from \"@inertiajs/react\";\n\nimport { ArrowRight, Flag } from \"lucide-react\";\n\nimport { QuizSkeleton } from \"@/Components/fragments/QuizSkeleton\";\nimport { Button } from \"@/Components/ui/button\";\nimport { Progress } from \"@/Components/ui/progress\";\nimport { useToast } from \"@/Components/ui/use-toast\";\n\nimport { Question } from \"@/lib/types/Question\";\n\nexport default function AsesmenForm() {\n  const { toast } = useToast();\n\n  const [questions, setQuestions] = useState<Question[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [sendingAnswer, setSendingAnswer] = useState(false);\n  const [currentQuestion, setCurrentQuestion] = useState(0);\n  const [selectedAnswerId, setSelectedAnswerId] = useState<number | null>(null);\n  const [csrfToken, setCsrfToken] = useState(\"\");\n\n  async function mGetQuestions() {\n    setLoading(true);\n    const response = await fetch(route(\"asesmen.question\"))\n      .then((response) => response.json())\n      .then((json) => {\n        setQuestions(json.data.questions);\n        setLoading(false);\n      });\n  }\n\n  useEffect(() => {\n    // Fungsi untuk mendapatkan token CSRF dari API\n    const fetchCsrfToken = async () => {\n      try {\n        const response = await fetch(route(\"csrf\"));\n        const data = await response.json();\n        setCsrfToken(data.csrfToken);\n      } catch (error) {\n        console.error(\"Error fetching CSRF token:\", error);\n      }\n    };\n\n    fetchCsrfToken();\n    // if (!token) {\n    //     router.push(\"/\");\n    //     return;\n    // }\n    mGetQuestions();\n  }, []);\n\n  const onAnswerClick = (answerId: number) => {\n    setSelectedAnswerId(answerId);\n  };\n\n  async function submitAnswer() {\n    if (selectedAnswerId === null) return;\n    try {\n      setSendingAnswer(true);\n      await fetch(\n        route(\"asesmen.answer\", {\n          question_id: questions[currentQuestion].id,\n          answer_id: selectedAnswerId,\n        }),\n        {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            \"X-CSRF-TOKEN\": csrfToken,\n          },\n        },\n      );\n      setSendingAnswer(false);\n      if (currentQuestion === questions.length - 1) {\n        router.get(route(\"asesmen.result\"));\n        return;\n      }\n      setCurrentQuestion(currentQuestion + 1);\n      setSelectedAnswerId(null);\n    } catch (error) {\n      toast({\n        variant: \"destructive\",\n        title: \"Gagal mengirim jawaban, mohon coba lagi hehe\",\n      });\n    }\n  }\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, scale: 0.5 }}\n      animate={{ opacity: 1, scale: 1 }}\n      transition={{ duration: 0.8, ease: [0.16, 1, 0.3, 1] }}\n      className={`mt-20 mx-auto px-8 flex flex-col items-center justify-center h-full max-w-3xl text-start place-content-center text-white gap-4 overflow-y-auto font-montserrat`}\n    >\n      {loading ? (\n        <QuizSkeleton className=\"w-full\" />\n      ) : (\n        <div className=\"relative flex flex-col w-full gap-4\">\n          <span className=\"md:text-xl text-moccaccino-950 w-full text-sm font-semibold\">\n            Pertanyaan {currentQuestion + 1}/{questions.length}\n          </span>\n\n          <Progress value={((currentQuestion + 1) * 100) / questions.length} />\n\n          <ScrollArea className=\"md:min-h-48 bg-jaffa-950/25 backdrop-blur-md w-full h-40 p-4 overflow-y-auto rounded-lg shadow-inner\">\n            <h2 className=\"max-md:text-sm text-start font-semibold text-black\">\n              {questions[currentQuestion].teks_pertanyaan}\n            </h2>\n\n            <ScrollBar orientation=\"vertical\" className=\"text-jaffa-950\" />\n          </ScrollArea>\n\n          <ul className=\"md:mt-8 flex flex-col w-full gap-2 mt-2\">\n            {questions[currentQuestion].answers.map((ans) => (\n              <li key={ans.id}>\n                <Button\n                  disabled={sendingAnswer}\n                  onClick={() => onAnswerClick(ans.id)}\n                  className={clsx(\n                    {\n                      \" text-candlelight-800 hover:bg-jaffa-100 ring-1 ring-black/5 \":\n                        ans.id !== selectedAnswerId,\n                      \" bg-gradient-to-r from-candlelight-800 to-candlelight-950\":\n                        ans.id === selectedAnswerId,\n                    },\n                    \"bg-white transition duration-400 w-full h-full font-medium text-wrap py-2 max-md:text-[12px]\",\n                  )}\n                >\n                  {ans.teks_jawaban}\n                </Button>\n              </li>\n            ))}\n          </ul>\n\n          <Button\n            onClick={submitAnswer}\n            disabled={selectedAnswerId === null || sendingAnswer}\n            className=\"bg-jaffa-900 md:my-8 hover:bg-jaffa-900/80 w-full mb-4\"\n          >\n            {currentQuestion < questions.length - 1 ? \"Next\" : \"Submit\"}\n            {currentQuestion < questions.length - 1 ? (\n              <ArrowRight className=\"ml-2\" />\n            ) : (\n              <svg\n                className=\"ml-2\"\n                width=\"11\"\n                height=\"13\"\n                viewBox=\"0 0 11 13\"\n                fill=\"none\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n              >\n                <path\n                  d=\"M0.5 1.62503C0.500012 1.54192 0.516601 1.45964 0.548796 1.38302C0.580991 1.30639 0.628146 1.23696 0.6875 1.17878C1.36865 0.511053 2.27866 0.127987 3.23229 0.107551C4.18592 0.0871153 5.11149 0.430846 5.82063 1.06878L6.04 1.27378C6.49589 1.67322 7.08138 1.89342 7.6875 1.89342C8.29363 1.89342 8.87911 1.67322 9.335 1.27378L9.49063 1.1319C9.87188 0.83003 10.445 1.07128 10.4969 1.5544L10.5 1.62503V7.25003C10.5 7.33314 10.4834 7.41542 10.4512 7.49204C10.419 7.56867 10.3719 7.6381 10.3125 7.69628C9.63135 8.36401 8.72134 8.74707 7.76772 8.76751C6.81409 8.78794 5.88851 8.44421 5.17938 7.80628L4.96 7.60128C4.51846 7.21441 3.95486 6.99526 3.36795 6.98223C2.78104 6.9692 2.20827 7.16313 1.75 7.53003V11.625C1.74982 11.7843 1.68883 11.9376 1.57947 12.0534C1.47011 12.1692 1.32065 12.2389 1.16163 12.2483C1.0026 12.2576 0.846013 12.2059 0.723855 12.1036C0.601697 12.0014 0.52319 11.8563 0.504375 11.6982L0.5 11.625V1.62503Z\"\n                  fill=\"white\"\n                />\n              </svg>\n            )}\n          </Button>\n        </div>\n      )}\n      <Toaster />\n    </motion.div>\n  );\n}\n","import React, { useEffect, useState } from \"react\";\n\nimport { Head } from \"@inertiajs/react\";\n\nimport DefaultLayout from \"@/Layouts/DefaultLayout\";\n\nimport AsesmenForm from \"@/Components/asesmen/AsesmenForm\";\nimport { Button } from \"@/Components/ui/button\";\nimport {\n  Dialog,\n  DialogClose,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n} from \"@/Components/ui/dialog\";\n\nimport pilar1 from \"!assets/pilar/pilar1.png\";\nimport pilar2 from \"!assets/pilar/pilar2.png\";\nimport pilar3 from \"!assets/pilar/pilar3.png\";\nimport pilar4 from \"!assets/pilar/pilar4.png\";\n\nconst DATA_PILAR = [\n  { img: pilar1, title: \"Work Hard\" },\n  { img: pilar2, title: \"Sharing Is Caring\" },\n  { img: pilar3, title: \"Equity\" },\n  { img: pilar4, title: \"Refinement\" },\n];\n\nfunction Page() {\n  const [openDialog, setOpenDialog] = useState(true);\n  const [showExitWarning, setShowExitWarning] = useState(false);\n\n  // Set up a listener for the back button event\n  useEffect(() => {\n    const handleBeforeUnload = (event: any) => {\n      // Show a confirmation dialog\n      event.preventDefault();\n      event.returnValue = \"\"; // Show default browser dialog\n      return \"\"; // For some browsers\n    };\n\n    const handlePopState = () => {\n      setShowExitWarning(true);\n      window.history.pushState(null, document.title, window.location.pathname);\n    };\n\n    // Add event listeners for beforeunload and popstate\n    window.addEventListener(\"beforeunload\", handleBeforeUnload);\n    window.addEventListener(\"popstate\", handlePopState);\n\n    // Push initial state to history\n    window.history.pushState(null, document.title, window.location.pathname);\n\n    // Cleanup event listeners on component unmount\n    return () => {\n      window.removeEventListener(\"beforeunload\", handleBeforeUnload);\n      window.removeEventListener(\"popstate\", handlePopState);\n    };\n  }, []);\n\n  const handleConfirmExit = () => {\n    setShowExitWarning(false);\n    window.location.replace(\"/\");\n  };\n\n  const handleCancelExit = () => {\n    setShowExitWarning(false);\n    window.history.pushState(null, document.title, window.location.pathname); // Prevent back navigation\n  };\n\n  return (\n    <div>\n      <Head title=\"Asesmen\" />\n\n      <DefaultLayout isSolid={true}>\n        <div className=\"bg-pattern-white md:py-10\">\n          <AsesmenForm />\n        </div>\n\n        <Dialog open={openDialog} onOpenChange={setOpenDialog}>\n          <DialogContent className=\"bg-gradient-to-b from-black to-jaffa-900 max-w-screen w-screen h-screen px-0 border-none rounded-none\">\n            <DialogHeader>\n              <DialogTitle className=\"md:text-2xl mt-10 text-center text-white\">\n                Welcome to Asesmen PPLK 2024\n              </DialogTitle>\n\n              <DialogDescription className=\"text-white/60 max-w-sm mx-auto mt-5 text-center\">\n                Kerjakan soal-soal berikut untuk mengetahui pilar mana yang\n                paling mendekati diri kamu\n              </DialogDescription>\n            </DialogHeader>\n\n            <div className=\"md:max-w-md lg:max-w-screen-2xl flex flex-wrap items-center justify-center gap-5 mx-auto overflow-auto\">\n              {DATA_PILAR.map((data, index) => (\n                <div\n                  key={index}\n                  className=\"flex flex-col items-center justify-center max-w-[150px] md:max-w-[200px] text-white\"\n                >\n                  <img src={data.img} alt={data.title} />\n\n                  <p>{data.title}</p>\n                </div>\n              ))}\n            </div>\n\n            <DialogClose className=\"border-none outline-none\">\n              <Button className=\"bg-jaffa-700 hover:bg-jaffa-700/90\">\n                Mulai Asesmen\n              </Button>\n            </DialogClose>\n          </DialogContent>\n        </Dialog>\n\n        {showExitWarning && (\n          <Dialog open={showExitWarning} onOpenChange={setShowExitWarning}>\n            <DialogContent>\n              <DialogHeader>\n                <DialogTitle>Warning</DialogTitle>\n                <DialogDescription>\n                  Apakah kamu yakin ingin meninggalkan halaman ini? Jawaban yang\n                  sudah kamu berikan akan hilang.\n                </DialogDescription>\n              </DialogHeader>\n              <div className=\"md:justify-end flex justify-center gap-2\">\n                <Button onClick={handleCancelExit} variant={\"outline\"}>\n                  Batalkan\n                </Button>\n                <Button onClick={handleConfirmExit} variant={\"default\"}>\n                  Keluar\n                </Button>\n              </div>\n            </DialogContent>\n          </Dialog>\n        )}\n      </DefaultLayout>\n    </div>\n  );\n}\n\nexport default Page;\n"],"names":["QuizSkeleton","className","jsxs","children","jsx","Array","from","length","map","_","index","AsesmenForm","toast","useToast","questions","setQuestions","useState","loading","setLoading","sendingAnswer","setSendingAnswer","currentQuestion","setCurrentQuestion","selectedAnswerId","setSelectedAnswerId","csrfToken","setCsrfToken","useEffect","async","response","fetch","route","data","json","error","console","then","jsxRuntimeExports","motion","div","initial","opacity","scale","animate","transition","duration","ease","Progress","value","ScrollArea","teks_pertanyaan","ScrollBar","orientation","answers","ans","Button","disabled","onClick","onAnswerClick","answerId","id","clsx","teks_jawaban","question_id","answer_id","method","headers","yt","get","variant","title","ArrowRight","width","height","viewBox","fill","xmlns","d","Toaster","DATA_PILAR","img","pilar1","pilar2","pilar3","pilar4","Page","openDialog","setOpenDialog","showExitWarning","setShowExitWarning","handleBeforeUnload","event","preventDefault","returnValue","handlePopState","window","history","pushState","document","location","pathname","addEventListener","removeEventListener","Head","DefaultLayout","isSolid","Dialog","open","onOpenChange","DialogContent","DialogHeader","DialogTitle","DialogDescription","src","alt","DialogClose","replace"],"mappings":"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"}