{"version":3,"file":"6MOlrvpo.js","sources":["../../../resources/js/Pages/Relasi/Search/Page.tsx"],"sourcesContent":["import Autoplay from \"embla-carousel-autoplay\";\nimport { useSearchParams } from \"react-router-dom\";\n\nimport React, { useEffect, useState } from \"react\";\n\nimport { UserPlus } from \"lucide-react\";\n\nimport {\n    IconAdjustmentsHorizontal,\n    IconChevronLeft,\n    IconChevronRight,\n    IconFilter,\n    IconMoodAngry,\n    IconMoodSearch,\n    IconSearch,\n} from \"@tabler/icons-react\";\n\nimport Footer from \"@/Components/Footer\";\nimport MaxWidthWrapper from \"@/Components/MaxWidthWrapper\";\nimport Navbar from \"@/Components/Navbar\";\nimport GoldPodium from \"@/Components/relasi/Podium\";\nimport ProfileCard from \"@/Components/relasi/ProfileCard\";\nimport RelasiLoading from \"@/Components/relasi/RelasiLoading\";\nimport RelasiSearch from \"@/Components/relasi/RelasiSearch\";\nimport SortDropdown from \"@/Components/relasi/SortDropdown\";\nimport TopUser from \"@/Components/relasi/TopUser\";\nimport UserList from \"@/Components/relasi/UserList\";\nimport { Button } from \"@/Components/ui/button\";\nimport { Toaster } from \"@/Components/ui/toaster\";\nimport { useToast } from \"@/Components/ui/use-toast\";\n\nimport { fetchSearch } from \"@/lib/data/relasi\";\nimport { useAos } from \"@/lib/hooks/useAos\";\nimport { User } from \"@/lib/types/User\";\nimport { UserSearchResponse } from \"@/lib/types/UserSearchResponse\";\n\nconst sortOptions = [\n    { label: \"Viewer\", value: \"viewer\" },\n    { label: \"Follower\", value: \"follower\" },\n    { label: \"Following\", value: \"following\" },\n    { label: \"Nama\", value: \"nama\" },\n];\n\nfunction Page() {\n    useAos();\n\n    const toast = useToast();\n    const [searchLoading, setSearchLoading] = useState(false);\n    const [currentPage, setCurrentPage] = useState(1);\n    const [searchResponse, setSearchResponse] = useState<UserSearchResponse>();\n    const [users, setUsers] = useState<Partial<User>[]>([]);\n    const [search, setSearch] = useState(\"\");\n    const [searchTitle, setSearchTitle] = useState<string>(\n        \"Cari Naramuda Lainnya!\",\n    );\n\n    async function mFetchSearch(\n        mSearch: string = \"\",\n        page: number = currentPage,\n    ) {\n        if (!mSearch) return;\n        if (mSearch.length > 100) {\n            toast.toast({\n                title: \"Gagal mencari Naramuda...\",\n                description: \"Kata kunci terlalu panjang\",\n                variant: \"destructive\",\n            });\n            return;\n        }\n        if (/[^a-zA-Z0-9_ ]/g.test(mSearch)) {\n            toast.toast({\n                title: \"Gagal mencari Naramuda...\",\n                description: \"Kata kunci hanya boleh berupa huruf dan angka\",\n                variant: \"destructive\",\n            });\n            return;\n        }\n\n        setSearchLoading(true);\n        let response = await fetchSearch(mSearch, page);\n        setSearchResponse(response);\n        setUsers(response.data);\n        setSearchTitle(`Hasil Pencarian dari ${mSearch}`);\n        setSearchLoading(false);\n    }\n\n    useEffect(() => {\n        let s = new URLSearchParams(window.location.search).get(\"search\") ?? \"\";\n        setSearch(s);\n        mFetchSearch(s);\n    }, []);\n\n    useEffect(() => {\n        mFetchSearch(search, currentPage);\n    }, [currentPage]);\n\n    const getPaginationRange = () => {\n        let range: Array<number> = [];\n        let start = Math.max(1, currentPage - 2);\n        let end = Math.min(searchResponse?.last_page ?? 0, start + 4);\n        for (let i = start; i <= end; i++) {\n            range.push(i);\n        }\n        return range;\n    };\n\n    return (\n        <div className=\"bg-pattern-white flex flex-col w-full min-h-screen\">\n            <div>\n                <Navbar isSolid={true} isFixed={false} />\n\n                <div className=\"max-w-7xl md:pt-24 lg:pt-32 font-montserrat md:text-md flex flex-col gap-8 px-2 py-16 pt-10 mx-auto text-base text-black\">\n                    <div className=\"relative w-full max-w-3xl mx-auto\">\n                        <RelasiSearch\n                            onsubmit={(search) => mFetchSearch(search, 1)}\n                        />\n                    </div>\n                    {searchLoading ? (\n                        <RelasiLoading className=\"min-h-72 w-full\" />\n                    ) : (\n                        <div className=\"w-full max-w-5xl mx-auto\">\n                            <div className=\"flex  place-content-center place-items-center\">\n                                <h4 className=\"text-lg lg:text-2xl font-bold text-center\">\n                                    {searchTitle}\n                                </h4>\n                            </div>\n                            {users.length > 0 ? (\n                                <UserList users={users} />\n                            ) : (\n                                <div className=\"mx-auto text-wrap text-sm text-center my-16\">\n                                    Maaf, kami tidak dapat menemukan Naramuda\n                                    yang kamu cari ðŸ˜•\n                                </div>\n                            )}\n                        </div>\n                    )}\n\n                    <ul className=\"flex gap-2 mx-auto place-content-center flex-wrap\">\n                        <li>\n                            <Button\n                                onClick={() =>\n                                    setCurrentPage(Math.max(currentPage - 1, 1))\n                                }\n                                className=\"bg-gradient-to-br from-jaffa-600 to-jaffa-700 hover:scale-110 transition \"\n                            >\n                                <IconChevronLeft></IconChevronLeft>\n                            </Button>\n                        </li>\n\n                        {getPaginationRange().map((page) => (\n                            <li key={page}>\n                                <Button\n                                    className=\" bg-gradient-to-br from-jaffa-600 to-jaffa-700 hover:scale-110 transition\"\n                                    onClick={() => setCurrentPage(page)}\n                                >\n                                    {page}\n                                </Button>\n                            </li>\n                        ))}\n\n                        <li>\n                            <Button\n                                onClick={() =>\n                                    setCurrentPage(\n                                        Math.min(\n                                            currentPage + 1,\n                                            searchResponse?.last_page ?? 1,\n                                        ),\n                                    )\n                                }\n                                className=\" bg-gradient-to-br from-jaffa-600 to-jaffa-700 hover:scale-110 transition\"\n                            >\n                                <IconChevronRight></IconChevronRight>\n                            </Button>\n                        </li>\n                    </ul>\n                    <p className=\"text-center\">\n                        Halaman {currentPage} dari{\" \"}\n                        {searchResponse?.last_page ?? 1}\n                    </p>\n                </div>\n\n                <Footer />\n            </div>\n\n            <Toaster />\n        </div>\n    );\n}\n\nexport default Page;\n"],"names":["Page","toast","useToast","searchLoading","setSearchLoading","useState","currentPage","setCurrentPage","searchResponse","setSearchResponse","users","setUsers","search","setSearch","searchTitle","setSearchTitle","async","mFetchSearch","mSearch","page","length","title","description","variant","test","response","fetchSearch","data","useEffect","s","URLSearchParams","window","location","get","jsxs","className","children","jsx","Navbar","isSolid","isFixed","jsxRuntimeExports","RelasiSearch","onsubmit","RelasiLoading","UserList","Button","onClick","Math","max","IconChevronLeft","range","start","end","min","last_page","i","push","getPaginationRange","map","IconChevronRight","Footer","Toaster"],"mappings":"8oBA2CA,SAASA,QAGL,MAAMC,EAAQC,KACPC,EAAeC,GAAoBC,YAAS,IAC5CC,EAAaC,GAAkBF,WAAS,IACxCG,EAAgBC,GAAqBJ,EAA6BA,YAClEK,EAAOC,GAAYN,EAAAA,SAA0B,KAC7CO,EAAQC,GAAaR,WAAS,KAC9BS,EAAaC,GAAkBV,EAAAA,SAClC,0BAGJW,eAAeC,EACXC,EAAkB,GAClBC,EAAeb,GAEf,IAAKY,EAAS,OACV,GAAAA,EAAQE,OAAS,IAMjB,YALAnB,EAAMA,MAAM,CACRoB,MAAO,4BACPC,YAAa,6BACbC,QAAS,gBAIb,GAAA,kBAAkBC,KAAKN,GAMvB,YALAjB,EAAMA,MAAM,CACRoB,MAAO,4BACPC,YAAa,gDACbC,QAAS,gBAKjBnB,GAAiB,GACjB,IAAIqB,QAAiBC,EAAYR,EAASC,GAC1CV,EAAkBgB,GAClBd,EAASc,EAASE,MACHZ,EAAA,wBAAwBG,KACvCd,GAAiB,EACrB,CAEAwB,EAAAA,WAAU,KACF,IAAAC,EAAI,IAAIC,gBAAgBC,OAAOC,SAASpB,QAAQqB,IAAI,WAAa,GACrEpB,EAAUgB,GACVZ,EAAaY,EAAC,GACf,IAEHD,EAAAA,WAAU,KACNX,EAAaL,EAAQN,EAAW,GACjC,CAACA,IAaA,SAAA4B,KAAC,MAAI,CAAAC,UAAU,qDACXC,SAAA,QAAC,MACG,CAAAA,SAAA,CAAAC,EAAAA,IAACC,EAAO,CAAAC,SAAS,EAAMC,SAAS,MAEhCN,KAAC,MAAI,CAAAC,UAAU,2HACXC,SAAA,GAACC,IAAA,MAAA,CAAIF,UAAU,oCACXC,SAAAK,EAAAJ,IAACK,EAAA,CACGC,SAAW/B,GAAWK,EAAaL,EAAQ,OAGlDT,QACIyC,EAAc,CAAAT,UAAU,sBAEzBD,KAAC,MAAI,CAAAC,UAAU,2BACXC,SAAA,GAACC,IAAA,MAAA,CAAIF,UAAU,gDACXC,SAAAC,EAAAA,IAAC,MAAGF,UAAU,4CACTC,eAGR1B,EAAMU,OAAS,IACXiB,IAAAQ,EAAA,CAASnC,UAET2B,EAAAA,IAAA,MAAA,CAAIF,UAAU,8CAA8CC,SAG7D,qEAKZF,KAAC,KAAG,CAAAC,UAAU,oDACVC,SAAA,OAAC,KACG,CAAAA,SAAAK,EAAAJ,IAACS,EAAA,CACGC,QAAS,IACLxC,EAAeyC,KAAKC,IAAI3C,EAAc,EAAG,IAE7C6B,UAAU,4EAEVC,eAACc,EAAgB,QAjDlB,MACvB,IAAIC,EAAuB,GACvBC,EAAQJ,KAAKC,IAAI,EAAG3C,EAAc,GAClC+C,EAAML,KAAKM,WAAI9C,WAAgB+C,YAAa,EAAGH,EAAQ,GAC3D,IAAA,IAASI,EAAIJ,EAAOI,GAAKH,EAAKG,IAC1BL,EAAMM,KAAKD,GAER,OAAAL,CAAA,EA8CUO,GAAqBC,KAAKxC,SACtB,KACG,CAAAiB,SAAAK,EAAAJ,IAACS,EAAA,CACGX,UAAU,4EACVY,QAAS,IAAMxC,EAAeY,GAE7BiB,SAAAjB,KALAA,WAUZ,KACG,CAAAiB,SAAAK,EAAAJ,IAACS,EAAA,CACGC,QAAS,IACLxC,EACIyC,KAAKM,IACDhD,EAAc,SACdE,WAAgB+C,YAAa,IAIzCpB,UAAU,4EAEVC,eAACwB,EAAiB,aAI9B1B,KAAC,IAAE,CAAAC,UAAU,cAAcC,SAAA,CAAA,WACd9B,EAAY,QAAM,WAC1BE,WAAgB+C,YAAa,cAIrCM,EAAO,aAGXC,EAAQ,MAGrB"}