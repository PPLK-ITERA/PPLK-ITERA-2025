import{r as a,W as e,j as t,a as i,y as n}from"./Beb12r60.js";import{c as s}from"./DBPhEQNF.js";import{D as r}from"./prCQHvc3.js";import{M as o}from"./RA2L04ZI.js";import{b as m,B as l}from"./FvtM2sin.js";import{I as u}from"./DCI1HIR_.js";import{L as d}from"./BlKYZGHE.js";import{T as h}from"./DZcarhU4.js";import{u as g}from"./C3z2IN-9.js";import{C as p}from"./DCl5qb8D.js";import{b as c,a as f,c as w,d as b,f as k}from"./BfnuuwF0.js";import"./UIPGuzWs.js";import"./C0u18CNn.js";import"./DvMl1rNS.js";import"./CUnTowtg.js";import"./B4aKJ399.js";import"./CAhXggN7.js";import"./ClKKxug6.js";import"./ojoXRFwv.js";import"./z08mKKfS.js";import"./DLfrK-1_.js";const j={lessThanXSeconds:{one:"kurang dari 1 detik",other:"kurang dari {{count}} detik"},xSeconds:{one:"1 detik",other:"{{count}} detik"},halfAMinute:"setengah menit",lessThanXMinutes:{one:"kurang dari 1 menit",other:"kurang dari {{count}} menit"},xMinutes:{one:"1 menit",other:"{{count}} menit"},aboutXHours:{one:"sekitar 1 jam",other:"sekitar {{count}} jam"},xHours:{one:"1 jam",other:"{{count}} jam"},xDays:{one:"1 hari",other:"{{count}} hari"},aboutXWeeks:{one:"sekitar 1 minggu",other:"sekitar {{count}} minggu"},xWeeks:{one:"1 minggu",other:"{{count}} minggu"},aboutXMonths:{one:"sekitar 1 bulan",other:"sekitar {{count}} bulan"},xMonths:{one:"1 bulan",other:"{{count}} bulan"},aboutXYears:{one:"sekitar 1 tahun",other:"sekitar {{count}} tahun"},xYears:{one:"1 tahun",other:"{{count}} tahun"},overXYears:{one:"lebih dari 1 tahun",other:"lebih dari {{count}} tahun"},almostXYears:{one:"hampir 1 tahun",other:"hampir {{count}} tahun"}},M={date:c({formats:{full:"EEEE, d MMMM yyyy",long:"d MMMM yyyy",medium:"d MMM yyyy",short:"d/M/yyyy"},defaultWidth:"full"}),time:c({formats:{full:"HH.mm.ss",long:"HH.mm.ss",medium:"HH.mm",short:"HH.mm"},defaultWidth:"full"}),dateTime:c({formats:{full:"{{date}} 'pukul' {{time}}",long:"{{date}} 'pukul' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},y={lastWeek:"eeee 'lalu pukul' p",yesterday:"'Kemarin pukul' p",today:"'Hari ini pukul' p",tomorrow:"'Besok pukul' p",nextWeek:"eeee 'pukul' p",other:"P"},v={code:"id",formatDistance:(a,e,t)=>{let i;const n=j[a];return i="string"==typeof n?n:1===e?n.one:n.other.replace("{{count}}",e.toString()),(null==t?void 0:t.addSuffix)?t.comparison&&t.comparison>0?"dalam waktu "+i:i+" yang lalu":i},formatLong:M,formatRelative:(a,e,t,i)=>y[a],localize:{ordinalNumber:(a,e)=>"ke-"+Number(a),era:f({values:{narrow:["SM","M"],abbreviated:["SM","M"],wide:["Sebelum Masehi","Masehi"]},defaultWidth:"wide"}),quarter:f({values:{narrow:["1","2","3","4"],abbreviated:["K1","K2","K3","K4"],wide:["Kuartal ke-1","Kuartal ke-2","Kuartal ke-3","Kuartal ke-4"]},defaultWidth:"wide",argumentCallback:a=>a-1}),month:f({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Agt","Sep","Okt","Nov","Des"],wide:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"]},defaultWidth:"wide"}),day:f({values:{narrow:["M","S","S","R","K","J","S"],short:["Min","Sen","Sel","Rab","Kam","Jum","Sab"],abbreviated:["Min","Sen","Sel","Rab","Kam","Jum","Sab"],wide:["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"]},defaultWidth:"wide"}),dayPeriod:f({values:{narrow:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"},abbreviated:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"},wide:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"}},defaultWidth:"wide",formattingValues:{narrow:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"},abbreviated:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"},wide:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:b({matchPattern:/^ke-(\d+)?/i,parsePattern:/\d+/i,valueCallback:a=>parseInt(a,10)}),era:w({matchPatterns:{narrow:/^(sm|m)/i,abbreviated:/^(s\.?\s?m\.?|s\.?\s?e\.?\s?u\.?|m\.?|e\.?\s?u\.?)/i,wide:/^(sebelum masehi|sebelum era umum|masehi|era umum)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^s/i,/^(m|e)/i]},defaultParseWidth:"any"}),quarter:w({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^K-?\s[1234]/i,wide:/^Kuartal ke-?\s?[1234]/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:a=>a+1}),month:w({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|mei|jun|jul|agt|sep|okt|nov|des)/i,wide:/^(januari|februari|maret|april|mei|juni|juli|agustus|september|oktober|november|desember)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^ma/i,/^ap/i,/^me/i,/^jun/i,/^jul/i,/^ag/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:w({matchPatterns:{narrow:/^[srkjm]/i,short:/^(min|sen|sel|rab|kam|jum|sab)/i,abbreviated:/^(min|sen|sel|rab|kam|jum|sab)/i,wide:/^(minggu|senin|selasa|rabu|kamis|jumat|sabtu)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^m/i,/^s/i,/^s/i,/^r/i,/^k/i,/^j/i,/^s/i],any:[/^m/i,/^sen/i,/^sel/i,/^r/i,/^k/i,/^j/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:w({matchPatterns:{narrow:/^(a|p|tengah m|tengah h|(di(\swaktu)?) (pagi|siang|sore|malam))/i,any:/^([ap]\.?\s?m\.?|tengah malam|tengah hari|(di(\swaktu)?) (pagi|siang|sore|malam))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^pm/i,midnight:/^tengah m/i,noon:/^tengah h/i,morning:/pagi/i,afternoon:/siang/i,evening:/sore/i,night:/malam/i}},defaultParseWidth:"any"})},options:{weekStartsOn:1,firstWeekContainsDate:1}};function x({id:c}){const[f,w]=a.useState(null),[b,j]=a.useState(new Map),[M,y]=a.useState(""),{toast:x}=g(),{data:S,setData:P}=e({tugas_id:[],jawaban:[]}),W=(a,e)=>{const t=[...S.jawaban];t[a]=e,P("jawaban",t)};a.useEffect((()=>{(async()=>{try{const a=await fetch(route("mading.tugas",{id:c}),{method:"GET",headers:{"Content-Type":"application/json"}});if(!a.ok)throw new Error("HTTP status "+a.status);const e=await a.json();w(e);let t=[];e.tugas.forEach(((a,e)=>{t.push(a.id),W(e,"")})),P("tugas_id",t)}catch(a){x({title:"Error",description:"Gagal mendapatkan data tugas",variant:"destructive"})}})();(async()=>{try{const a=await fetch(route("csrf")),e=await a.json();y(e.csrfToken)}catch(a){console.error("Error fetching CSRF token:",a)}})()}),[]);const N=s(((a,e,t)=>{/^https:\/\/(www\.)?(tiktok\.com|vt\.tiktok\.com)\/.*$/g.test(e)?(j(new Map(b).set(a,"")),W(t,e)):j(new Map(b).set(a,"link harus dari TikTok"))}),200),T=s((async(a,e,t)=>{/^https:\/\/(www\.)?instagram\.com\/.*$/g.test(e)?(j(new Map(b).set(a,"")),W(t,e)):j(new Map(b).set(a,"link harus dari Instagram"))}),200),K=s((async(a,e,t)=>{/^(http(s)?:\/\/)?([\w]+\.)?linkedin\.com\/(pub|in|profile)/g.test(e)?(j(new Map(b).set(a,"")),W(t,e)):j(new Map(b).set(a,"link harus dari LinkedIn"))}),200),J=s((async(a,e,t)=>{if(!/^https:\/\/(www\.)?\w+\.google\.com\/.*$/g.test(e))return void j(new Map(b).set(a,"link harus dari Google Drive"));let i=e.split("/")[5];(await fetch(`https://www.googleapis.com/drive/v2/files/${i}?key=undefined`)).ok?(j(new Map(b).set(a,"")),W(t,e)):j(new Map(b).set(a,"Link drive belum publik, silahkan coba lagi"))}),200);return t.jsxs(t.Fragment,{children:[t.jsx(r,{isSolid:!0,children:t.jsx("div",{className:"bg-pattern-white pt-28",children:t.jsx(o,{className:"min-h-screen",children:t.jsxs("div",{className:"px-2.5 bg-white/80 py-5 rounded-md md:px-5 lg:px-10 xl:px-28",children:[t.jsxs(i,{href:route("mading"),className:`${m({variant:"outline"})} bg-transparent hover:bg-transparent shadow-none items-center border-none flex gap-2 -ml-5`,children:[t.jsx(p,{}),t.jsx("span",{children:"Kembali"})]}),t.jsxs("h2",{"data-aos":"fade-down","data-aos-duration":"1000",className:"font-montserrat font-bold text-jaffa-700 w-fit pt-[30px] text-3xl",children:["Pengumpulan Tugas Day - ",c]}),t.jsxs("div",{className:"flex flex-col gap-6 mt-10",children:[null==f?void 0:f.tugas.map(((a,e)=>t.jsxs("div",{className:"flex flex-col",children:[t.jsxs(d,{htmlFor:"input-tugas",className:"md:flex-row flex flex-col justify-between gap-1 text-left",children:[t.jsxs("p",{className:"font-bold capitalize",children:["Link pengumpulan tugas ",a.judul]}),t.jsxs("p",{className:"text-red-600",children:["Batas pengumpulan:"," ",k(new Date(a.deadline),"dd MMMM yyyy",{locale:v})]})]}),t.jsx(u,{type:"text",id:"input-tugas",onChange:t=>{((a,e,t,i)=>{switch(a){case"tiktok":N(e,t,i);break;case"instagram":T(e,t,i);break;case"drive":J(e,t,i);break;case"linkedin":K(e,t,i)}})(a.tipe_link,a.id,t.target.value,e)},placeholder:"tiktok"===a.tipe_link?"https://www.tiktok.com/...":"instagram"===a.tipe_link?"https://www.instagram.com/...":"drive"===a.tipe_link?"https://drive.google.com/...":"https://www.linkedin.com/in/...",className:"mt-2"}),b.get(a.id)?t.jsx("span",{className:"text-red-500 text-[12px]",children:b.get(a.id)}):""===b.get(a.id)?t.jsx("span",{className:"text-[12px] text-green-500",children:"Link valid"}):null]},e))),t.jsxs(l,{onClick:async()=>{try{const a=await fetch(route("mading.store"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":M},body:JSON.stringify({tugas_id:S.tugas_id,jawaban:S.jawaban})});if(!a.ok)throw new Error("HTTP status "+a.status);x({title:"Berhasil",description:"Tugas berhasil disubmit"}),n.replace(route("petaka"))}catch(a){x({title:"Error",description:"Gagal mensubmit tugas",variant:"destructive"})}},disabled:!(()=>{for(const[a,e]of b.entries())if(""!==e)return!1;return!0})()||!S.jawaban.length,className:"bg-jaffa-700 hover:bg-jaffa-700/90 w-full mt-5 transition duration-200 ease-in-out",children:["Submit Tugas ",c]})]})]})})})}),t.jsx(h,{})]})}export{x as default};
