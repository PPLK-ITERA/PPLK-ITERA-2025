{"version":3,"file":"C5Te0DOQ.js","sources":["../../../resources/js/Components/dashboard/game-offline/Dapmen.tsx","../../../resources/js/Pages/Dashboard/game-offline/Page.tsx"],"sourcesContent":["import { QRCodeSVG } from \"qrcode.react\";\n\nimport React, { useState } from \"react\";\n\nimport { useForm } from \"@inertiajs/react\";\n\nimport { Button } from \"@/Components/ui/button\";\n\ninterface DapmenProps {\n  userId?: number;\n  score?: number;\n}\n\nexport default function Dapmen({ userId, score }: DapmenProps) {\n  const [loading, setLoading] = useState(false);\n  const { data, setData } = useForm({\n    code: \"\",\n    qrUrl: \"\",\n  });\n\n  const fetchQR = async () => {\n    setLoading(true);\n\n    const response = await fetch(route(\"dashboard.poin.qrcode\", userId));\n    const json = await response.json();\n    setData(json.data);\n\n    setLoading(false);\n  };\n\n  return (\n    <>\n      <p>\n        Gunakan fitur ini untuk generate QR kelompok anda untuk di scan oleh{\" \"}\n        <span className=\"font-bold\">Korlap</span>\n      </p>\n\n      <div className=\"w-fit p-2 text-white bg-green-600 rounded-md\">\n        <p>Score Kelompok : {score}</p>\n      </div>\n\n      <div className=\"flex flex-col items-center w-full gap-10\">\n        <div className=\"w-fit\">\n          <p className=\"text-center\">\n            Tunjukkan QR Code ini ke <span className=\"font-bold\">Korlap</span>\n          </p>\n\n          <div className=\"aspect-square bg-white border flex justify-center items-center mt-5 w-[300px] h-[300px] rounded-md\">\n            {data.qrUrl === \"\" ? null : loading ? (\n              <p>Loading...</p>\n            ) : (\n              // <QRCode size={256} value={data.code} />\n              <QRCodeSVG\n                value={data.code}\n                // imageSettings={{\n                //     src: \"https://kartatera.my.id/build/assets/D98J2HoG.png\",\n                //     height: 60,\n                //     width: 60,\n                //     excavate: true,\n                // }}\n                size={256}\n                includeMargin={false}\n              />\n            )}\n          </div>\n        </div>\n\n        <Button\n          onClick={() => {\n            fetchQR();\n          }}\n        >\n          Generate QR Kelompok\n        </Button>\n      </div>\n    </>\n  );\n}\n","import { IDetectedBarcode, Scanner, outline } from \"@yudiel/react-qr-scanner\";\n\nimport React, { useEffect, useState } from \"react\";\n\nimport { useForm, Head } from \"@inertiajs/react\";\n\nimport DashboardLayout from \"@/Layouts/DashboardLayout\";\n\nimport Dapmen from \"@/Components/dashboard/game-offline/Dapmen\";\nimport { Breadcrumbs } from \"@/Components/ui/breadcrumbs\";\nimport { Button } from \"@/Components/ui/button\";\nimport { Toaster } from \"@/Components/ui/toaster\";\n\nimport { useFlashToast } from \"@/lib/hooks/useFlashToast\";\n\nconst breadcrumbItems = [\n  { title: \"Ellysion Panel\", link: \"/dashboard\" },\n  { title: \"Game Offline\", link: \"/dashboard/game-offline\" },\n];\n\nexport default function Page({ auth, response }) {\n  const [score, setScore] = useState(0);\n\n  const { data, setData, post, processing } = useForm({\n    qr_code: \"\",\n  });\n\n  const [loading, setLoading] = useState(false);\n\n  useFlashToast();\n\n  const handleScan = (data: string) => {\n    if (data) {\n      setData(\"qr_code\", data);\n    }\n  };\n\n  const getDataScore = async () => {\n    const response = await fetch(route(\"dashboard.poin.score\"), {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    });\n\n    const getResult = await response.json();\n    setScore(getResult.response.data.total_score);\n  };\n\n  useEffect(() => {\n    getDataScore();\n  }, []);\n\n  useEffect(() => {\n    if (data.qr_code) {\n      post(route(\"dashboard.poin.store\"));\n    }\n  }, [data.qr_code]);\n\n  return (\n    <>\n      <Head title=\"Game Offline\" />\n      <DashboardLayout user={auth.user}>\n        <Breadcrumbs items={breadcrumbItems} />\n        <h2 className=\"text-3xl font-bold tracking-tight\">Game Offline</h2>\n\n        {auth.user.role_id === 2 ||\n        auth.user.role_id === 3 ||\n        auth.user.role_id === 4 ? (\n          <>{score ? <Dapmen userId={auth.user.id} score={score} /> : null}</>\n        ) : null}\n\n        {auth.user.role_id === 6 ? (\n          <>\n            <p>\n              Gunakan fitur ini untuk scan QR kelompok dari{\" \"}\n              <span className=\"font-bold\">Dapmen</span> yang menang pada game\n              offline\n            </p>\n\n            <div className=\"flex flex-col items-center justify-center w-full\">\n              <div className=\"md:w-96 border\">\n                <Scanner\n                  onScan={function (detectedCodes: IDetectedBarcode[]): void {\n                    handleScan(detectedCodes.at(-1)?.rawValue || \"\");\n                  }}\n                  components={{\n                    finder: true,\n                    tracker: outline,\n                    zoom: true,\n                    torch: true,\n                  }}\n                  allowMultiple={true}\n                  scanDelay={2000}\n                  paused={loading}\n                  styles={{\n                    container: {\n                      width: \"100%\",\n                    },\n                  }}\n                />\n              </div>\n\n              <Button className=\"mt-5\">Scan QR Kelompok</Button>\n            </div>\n          </>\n        ) : null}\n      </DashboardLayout>\n\n      <Toaster />\n    </>\n  );\n}\n"],"names":["Dapmen","userId","score","loading","setLoading","useState","data","setData","useForm","code","qrUrl","jsxs","Fragment","children","jsx","className","QRCodeSVG","value","size","includeMargin","Button","onClick","async","response","fetch","route","json","fetchQR","breadcrumbItems","title","link","Page","auth","setScore","post","qr_code","useFlashToast","useEffect","method","headers","getResult","total_score","getDataScore","Head","DashboardLayout","user","Breadcrumbs","items","role_id","id","Scanner","onScan","detectedCodes","_a","at","rawValue","components","finder","tracker","outline","zoom","torch","allowMultiple","scanDelay","paused","styles","container","width","Toaster"],"mappings":"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"}