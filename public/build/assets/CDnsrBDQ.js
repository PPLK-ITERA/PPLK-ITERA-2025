import{W as e,R as a,j as l,r as s,q as i}from"./lIIPp16N.js";import{Q as t}from"./0dah03cZ.js";import{D as r}from"./NDs2HF5b.js";import{C as o,a as d,B as n}from"./BbRndoPF.js";import{B as m}from"./Ct13g6TW.js";import{P as c,a as x,b as h,C as p,c as u,d as j,e as f,f as v}from"./BGAwc1Fs.js";import{I as b}from"./D90dw7mF.js";import{L as N}from"./BNqSyNlX.js";import{S as k,a as g}from"./LHzOMSPp.js";import{S as w,a as _,b as y,c as C,d as P,e as F,f as S}from"./C2BiPDdP.js";import{T as D}from"./B88Kuxo3.js";import{P as U}from"./BHF3ndPC.js";import{a as G}from"./h-BaetZh.js";import{c as B}from"./B5wRFnUW.js";import{D as I,f as K,a as L,b as R,c as z,g as E,e as M}from"./tPQk_cX-.js";import{T}from"./BYK79Dth.js";import{u as $}from"./CK9XW3oQ.js";import{u as J}from"./DvoIwkV_.js";import{l as O}from"./BZtDV8eV.js";import{I as Q}from"./CY-XEbIp.js";import"./Bj0IoGqv.js";import"./ZmphKXv_.js";import"./CZs41YnF.js";import"./Bke0GmAk.js";import"./B6Lwt9b5.js";import"./BJlRErKM.js";import"./BBmH7s48.js";import"./Co4N-5Fl.js";import"./C0doQ02M.js";import"./jaWma0js.js";import"./DPdBf6DS.js";const q=({currentUser:s})=>{var i,t,r;const{data:n,setData:B,put:I}=e({id:s.id,name:s.name,email:s.email,nim:s.nim,prodi_id:s.prodi_id,pita:null==(i=s.penyakit)?void 0:i.pita,ket_penyakit:null==(t=s.penyakit)?void 0:t.ket_penyakit,bio:s.bio,_method:"put"}),[K,L]=a.useState(!1),[R,z]=a.useState(""),E=U.find((e=>{if(e.id===s.prodi_id)return e.value}));return l.jsxs("div",{className:"h-fit flex-1 w-full p-4 space-y-5 border rounded-md shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold tracking-tight",children:"Informasi Umum"}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx(N,{htmlFor:"nama-maba",className:"text-left",children:"Nama"}),l.jsx(b,{type:"text",id:"nama-maba",value:n.name,onChange:e=>B("name",e.target.value),placeholder:"Chandra Budi Wijaya",className:"mt-1"})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx(N,{htmlFor:"email-maba",className:"text-left",children:"Email"}),l.jsx(b,{type:"email",id:"email-maba",onChange:e=>B("email",e.target.value),value:n.email,placeholder:"12.chandra.099@pplkitera.com",className:"mt-1"})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx(N,{htmlFor:"nim-maba",className:"text-left",children:"NIM"}),l.jsx(b,{type:"text",id:"nim-maba",value:n.nim,onChange:e=>B("nim",e.target.value),placeholder:"124290020",className:"mt-1"})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx(N,{htmlFor:"prodi-maba",className:"text-left",children:"Prodi"}),l.jsxs(c,{open:K,onOpenChange:L,children:[l.jsx(x,{asChild:!0,children:l.jsxs(m,{variant:"outline",role:"combobox","aria-expanded":K,className:"justify-between w-full mt-1 font-normal",children:[R?null==(r=U.find((e=>e.value===R)))?void 0:r.label:`${(null==E?void 0:E.label)||"Pilih Prodi"}`,l.jsx(o,{className:"shrink-0 w-4 h-4 ml-2 opacity-50"})]})}),l.jsx(h,{children:l.jsxs(p,{children:[l.jsx(u,{placeholder:"Cari Prodi...",className:"h-9"}),l.jsx(j,{children:"Data prodi tidak ada."}),l.jsx(f,{children:l.jsxs(k,{className:"h-[calc(100vh-64px)]",children:[U.map((e=>l.jsxs(v,{value:e.value,onSelect:a=>{z(a===R?"":a),B("prodi_id",e.id),L(!1)},children:[e.label,l.jsx(d,{className:G("ml-auto h-4 w-4",R===e.value?"opacity-100":"opacity-0")})]},e.value))),l.jsx(g,{orientation:"vertical"})]})})]})})]})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx(N,{htmlFor:"bio-maba",className:"text-left",children:"Bio"}),l.jsx(D,{id:"bio-maba",value:n.bio,onChange:e=>B("bio",e.target.value),placeholder:"Pucuk ubi pucuk kangkung",className:"mt-1 max-h-[150px]"})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx(N,{htmlFor:"pita-maba",className:"text-left",children:"Pita"}),l.jsxs(w,{defaultValue:n.pita||"",onValueChange:e=>{B("pita",e)},children:[l.jsx(_,{className:"w-full mt-1",children:l.jsx(y,{placeholder:"Pilih Pita"})}),l.jsx(C,{children:l.jsxs(P,{children:[l.jsx(F,{children:"Warna Pita"}),l.jsx(S,{value:"hijau",onClick:()=>{B("pita","hijau")},className:"text-green-600",children:"Hijau"}),l.jsx(S,{value:"kuning",onClick:()=>{B("pita","kuning")},className:"text-yellow-600",children:"Kuning"}),l.jsx(S,{value:"merah",onClick:()=>{B("pita","merah")},className:"text-red-600",children:"Merah"})]})})]})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx(N,{htmlFor:"riwayat-penyakit-maba",className:"text-left",children:"Riwayat Penyakit"}),l.jsx(b,{type:"text",id:"riwayat-penyakit-maba",value:n.ket_penyakit,onChange:e=>B("ket_penyakit",e.target.value),placeholder:"GERD (Gastroesophageal Reflux Disease)",className:"mt-1 capitalize"})]}),l.jsx("div",{className:"flex justify-end",children:l.jsx(m,{onClick:()=>{I(route("dashboard.user.edit-profil"))},children:"Simpan Data"})})]})},H=({currentUser:a})=>{const{data:s,setData:i,put:t}=e({id:a.id,new_password:"",confirm_new_password:"",_method:"put"});return l.jsxs("div",{className:"h-fit w-full p-4 space-y-5 border rounded-md shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold tracking-tight",children:"Reset Password"}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx(N,{htmlFor:"nama-maba",className:"text-left",children:"Password Baru"}),l.jsx(b,{type:"text",id:"nama-maba",value:s.new_password,onChange:e=>i("new_password",e.target.value),placeholder:"ex. 1234@Jamal#GG",className:"mt-1"})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx(N,{htmlFor:"email-maba",className:"text-left",children:"Konfirmasi Password"}),l.jsx(b,{type:"email",id:"email-maba",value:s.confirm_new_password,onChange:e=>i("confirm_new_password",e.target.value),placeholder:"ex. 1234@Jamal#GG",className:"mt-1"})]}),l.jsx("div",{className:"flex justify-end",children:l.jsx(m,{onClick:()=>{t(route("dashboard.user.edit-password")),s.new_password="",s.confirm_new_password=""},children:"Ubah Password"})})]})},V=({currentUser:a})=>{const{data:s,setData:i,put:t}=e({id:a.id,instagram_url:a.instagram_url,linkedin_url:a.linkedin_url,_method:"put"});return l.jsxs("div",{className:"p-4 space-y-5 border rounded-md shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold tracking-tight",children:"Sosial Media"}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx(N,{htmlFor:"instagram-maba",className:"text-left",children:"Instagram"}),l.jsx(b,{type:"text",id:"instagram-maba",value:s.instagram_url,onChange:e=>i("instagram_url",e.target.value),placeholder:"https://instagram.com/...",className:"mt-1"})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx(N,{htmlFor:"linkedin-maba",className:"text-left",children:"LinkedIn"}),l.jsx(b,{type:"text",id:"linkedin-maba",value:s.linkedin_url,onChange:e=>i("linkedin_url",e.target.value),placeholder:"https://linkedin.com/in/...",className:"mt-1"})]}),l.jsx("div",{className:"flex justify-end",children:l.jsx(m,{onClick:()=>{t(route("dashboard.user.edit-sosmed"))},children:"Simpan Data"})})]})},W=({currentUser:a})=>{const[i,t]=s.useState(null),{data:r,setData:o,put:d}=e({id:a.id,sertif:"",_method:"put"}),n=B((async()=>{if(!/^https:\/\/(www\.)?\w+\.google\.com\/.*$/g.test(r.sertif))return void t("link harus dari Google Drive");let e=r.sertif.split("/")[5];(await fetch(`https://www.googleapis.com/drive/v2/files/${e}?key=AIzaSyB4-JCqVpt3dC5MlC0Q6yQOSYG0uysdvwc`)).ok?t(""):t("Link drive belum publik, silahkan coba lagi")}),100);return l.jsxs("div",{className:"p-4 space-y-5 border rounded-md shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold tracking-tight",children:"Tentang PPLK"}),a.kelompok?l.jsxs("div",{className:"flex w-full gap-2",children:[l.jsxs("div",{className:"flex flex-col w-full",children:[l.jsx(N,{htmlFor:"nama-kelompok-maba",className:"text-left",children:"Nama Kelompok"}),l.jsx(b,{type:"text",id:"nama-kelompok-maba",value:a.kelompok.nama_kelompok,disabled:!0,placeholder:"Nawasena",className:"mt-1"})]}),l.jsxs("div",{className:"flex flex-col w-full",children:[l.jsx(N,{htmlFor:"nomor-kelompok-maba",className:"text-left",children:"Nomor Kelompok"}),l.jsx(b,{type:"number",id:"nomor-kelompok-maba",value:a.kelompok.no_kelompok,disabled:!0,placeholder:"73",className:"mt-1 [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"})]})]}):null,l.jsxs("div",{className:"flex flex-col w-full",children:[l.jsx(N,{htmlFor:"score-game-individu-maba",className:"text-left",children:"Score Game Individu"}),l.jsx(b,{type:"number",id:"score-game-individu-maba",value:a.score,disabled:!0,placeholder:"73",className:"mt-1 [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"})]}),l.jsxs("div",{className:"flex flex-col w-full",children:[l.jsx(N,{htmlFor:"pilar-maba",className:"text-left",children:"Pilar"}),l.jsx(b,{type:"text",id:"pilar-maba",value:a.pilar?a.pilar.pilar_name:"Belum ada pilar",disabled:!0,placeholder:"Pilar User",className:"mt-1"})]}),l.jsxs("div",{className:"flex flex-col w-full",children:[l.jsx(N,{htmlFor:"serti-kelulusan-pplk-maba",className:"text-left",children:"Sertifikat Kelulusan PPLK"}),l.jsx(b,{type:"text",id:"serti-kelulusan-pplk-maba",value:a.link_sertif?a.link_sertif:r.sertif,placeholder:"https://drive.google.com/....",className:"mt-1",onChange:e=>{o("sertif",e.target.value),n()}}),i?l.jsx("span",{className:"text-red-500 text-[12px]",children:i}):""===i?l.jsx("span",{className:"text-[12px] text-green-500",children:"Link valid"}):null]}),l.jsx("div",{className:"flex justify-end",children:l.jsx(m,{onClick:()=>{d(route("dashboard.user.edit-sertif"))},disabled:!!i||!r.sertif,children:"Simpan Sertifikat"})})]})};function A({response:a}){const{auth:o}=i().props,{toast:d}=$();J();const c=[{title:"Dashboard",link:"/dashboard"},{title:"Edit Data User",link:route("dashboard.user.edit",a.data.id)}],x=a.data,[h,p]=s.useState(null),[u,j]=s.useState(""),{data:f,setData:v,post:k}=e({id:x.id,photo:null,_method:"put"});return l.jsxs(l.Fragment,{children:[l.jsxs(r,{user:o.user,children:[l.jsx(n,{items:c}),l.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Edit Data User"}),l.jsxs("div",{className:"md:flex-row flex flex-col gap-2",children:[l.jsxs("div",{className:"md:mx-0 mx-auto",children:[l.jsx("div",{className:"w-[200px] h-[220px] border rounded-sm overflow-hidden",children:l.jsx("img",{src:x.photo_profile_url?x.photo_profile_url:O,alt:`${x.name} photo profile`,className:"w-full h-full bg-center bg-cover"})}),l.jsxs(I,{children:[l.jsx(K,{asChild:!0,children:l.jsx(m,{variant:"outline",className:"w-[200px] py-2 border mt-3",children:"Edit Foto Profile"})}),l.jsxs(L,{className:"sm:max-w-[425px]",children:[l.jsx(R,{children:l.jsxs(z,{children:["Edit Foto Profil ",x.name]})}),l.jsx("div",{className:"grid gap-4 py-4",children:l.jsxs("div",{className:"relative flex items-center justify-center mx-auto rounded-full",children:[l.jsx("div",{className:"w-36 h-36 flex items-center justify-center overflow-hidden border rounded-full",children:u?l.jsx("img",{src:u,alt:"preview-image-kelompok",className:"object-cover object-center w-full h-full"}):l.jsx("img",{src:x.photo_profile_url?x.photo_profile_url:O,alt:`${x.name} photo profile`,className:"object-cover object-center w-full h-full"})}),l.jsx(N,{htmlFor:"upload-logo-kelompok",children:l.jsx(Q,{size:32,color:"black",className:"-mt-[1px] cursor-pointer absolute bottom-1 right-1 border shadow-lg bg-white rounded-full p-1"})}),l.jsx(b,{type:"file",onChange:e=>{const a=e.target.files[0];if(a){if(!a.type.startsWith("image"))return d({title:"Invalid File Type",description:"Tolong pilih file gambar.",variant:"destructive"}),p(null),v("photo",null),void j("");if(a.size>2048e3)return d({title:"File Too Large",description:"Pilih foto yang berukuran dibawah 2MB.",variant:"destructive"}),p(null),v("photo",null),void j("");p(a),j(URL.createObjectURL(a)),v("photo",a)}else p(null),v("photo",null),j("")},accept:"image/*",className:"hidden",id:"upload-logo-kelompok"})]})}),l.jsxs(E,{children:[l.jsx(M,{asChild:!0,children:l.jsx(m,{variant:"outline",children:"Batalkan"})}),l.jsx(M,{asChild:!0,children:l.jsx(m,{onClick:()=>{k(route("dashboard.user.edit-foto"))},children:"Simpan"})})]})]})]}),l.jsxs("div",{className:"w-[200px] mt-5",children:[l.jsx("h2",{className:"font-semibold text-center",children:"Kode QR"}),l.jsx("div",{className:"border",children:x.qrcode?l.jsx(t,{value:x.qrcode.code,size:200,includeMargin:!0,level:"H",width:500,height:500}):null})]})]}),l.jsxs("div",{className:"md:flex-row flex flex-col w-full gap-2",children:[l.jsxs("div",{className:"md:w-1/2 flex flex-col w-full gap-2",children:[l.jsx(q,{currentUser:x}),l.jsx(H,{currentUser:x})]}),l.jsxs("div",{className:"md:w-1/2 flex flex-col w-full gap-2",children:[1===x.role_id||2===x.role_id||3===x.role_id||4===x.role_id?l.jsx(V,{currentUser:x}):null,1===x.role_id||2===x.role_id||3===x.role_id||4===x.role_id?l.jsx(W,{currentUser:x}):null]})]})]}),l.jsx("div",{})]}),l.jsx(T,{})]})}export{A as default};
