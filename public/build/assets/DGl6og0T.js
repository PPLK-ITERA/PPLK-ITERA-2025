import{W as e,j as s,y as a,r as i}from"./Bn9ZB4In.js";import r from"./BlAf1BWn.js";import{D as t}from"./U86jyzg0.js";import{A as n,a as l,b as d,c as o,d as c,e as h,f as m,g as j,h as x}from"./DM9viDYg.js";import{B as p}from"./BhP6A7-3.js";import{D as u,f,a as g,b,c as k,d as y,g as w,e as v}from"./Cg3mTt2p.js";import{L as N}from"./Bc7mUC1l.js";import{T as P}from"./BPf-4cmD.js";import{t as K}from"./B_92FyG_.js";import{D as L}from"./DNdxwxjl.js";import{S as D}from"./DJ4ylmyw.js";import{B as _}from"./BCUoiaoS.js";import{C as z,b as A,c as C,a as M}from"./Dh2BaOe3.js";import{S as I,a as S,b as F,c as B,d as H,e as E,f as T}from"./B-yCfgwq.js";import{T as G,b as V,c as R,a as W}from"./pqo3OtRD.js";import{T as q}from"./Ct0xQGWr.js";import{u as J}from"./Ba_OPeBv.js";import"./BSAxLKsk.js";import"./CBVuIHIj.js";import"./BxDPZtBj.js";import"./BvDxZe5W.js";import"./BELJS3jY.js";import"./CgL7Faz3.js";import"./qz5uz89B.js";import"./BKpOc1Zl.js";import"./DS-qx-uy.js";import"./DgNwS5Up.js";import"./BWAKTBD8.js";import"./DjK13lC_.js";import"./DyKupxJf.js";import"./DGsWg_ya.js";import"./WBiqt6TG.js";import"./BaD9fAq3.js";import"./CgSkoW6E.js";const O=({data:i})=>{const{data:r,setData:t}=e({id:i.id,kehadiran:"",keterangan:"",date:i.date});return s.jsx(s.Fragment,{children:!1===i.action?null:s.jsxs("div",{className:"flex gap-1 p-2",children:[s.jsxs(n,{children:[s.jsx(l,{asChild:!0,children:s.jsx(p,{size:"sm",children:"Absen"})}),s.jsxs(d,{children:[s.jsxs(o,{children:[s.jsxs(c,{children:["Apakah Anda yakin ingin meng-Absen ",i.user.name]}),s.jsx(h,{children:"Aksi ini akan mengubah status maba menjadi hadir."})]}),s.jsxs(m,{children:[s.jsx(j,{children:"Cancel"}),s.jsx(x,{onClick:()=>{"Hadir"!==i.user.status?a.post(route("dashboard.presensi.absen"),{...r,kehadiran:"Hadir"}):K({title:"Gagal",description:`Maba ${i.user.name} sudah hadir`,variant:"destructive"})},children:"Continue"})]})]})]}),"Izin"!==i.user.status?s.jsxs(u,{children:[s.jsx(f,{asChild:!0,children:s.jsx(p,{className:"gap-2",size:"sm",variant:"outline",children:"Set Izin"})}),s.jsxs(g,{className:"sm:max-w-[425px]",children:[s.jsxs(b,{children:[s.jsxs(k,{children:["Ingin Set Izin ",i.user.name," ?"]}),s.jsx(y,{children:"Isi bagian catatan dan aksi ini akan mengubah status maba menjadi izin"})]}),s.jsx("div",{className:"grid gap-4 py-4",children:s.jsxs("div",{className:"flex flex-col",children:[s.jsx(N,{htmlFor:"asnwer",className:"text-left",children:"Catatan"}),s.jsx(P,{id:"asnwer",value:r.keterangan,onChange:e=>t("keterangan",e.target.value),placeholder:"Berikan catatan izin",className:"mt-1"})]})}),s.jsxs(w,{children:[s.jsx(v,{asChild:!0,children:s.jsx(p,{variant:"outline",children:"Batalkan"})}),s.jsx(v,{asChild:!0,children:s.jsx(p,{onClick:()=>{a.post(route("dashboard.presensi.izin",r.id),{...r,kehadiran:"Izin"})},children:"Lanjutkan"})})]})]})]}):null]})})},Q=[{id:"no",header:"No",cell:({row:e})=>e.original.no},{id:"photo_profile",accessorKey:"user.photo_profile_url",header:"Foto Profil",cell:({row:e})=>s.jsx("img",{className:"h-[150px] w-[100px] object-cover aspect-3/4",src:e.original.user.photo_profile_url,alt:"Foto Profil"})},{id:"name",accessorKey:"user.name",header:"Nama"},{id:"nim",accessorKey:"user.nim",header:"NIM"},{id:"status",accessorKey:"user.status",header:"Status"},{id:"ket_status",accessorKey:"user.ket_izin",header:"Keterangan Izin"},{id:"nama_kelompok",accessorKey:"user.nama_kelompok",header:"Kelompok"},{id:"pita",accessorKey:"user.penyakit.pita",header:"Warna Pita"},{id:"ket_penyakit",accessorKey:"user.penyakit.ket_penyakit",header:"Riwayat Penyakit",cell:({row:e})=>s.jsx("p",{children:e.original.user.penyakit.ket_penyakit})},{id:"tanggal_presensi",accessorKey:"user.tanggal_presensi",header:"Waktu Presensi",cell:({row:e})=>s.jsx("p",{children:e.original.user.tanggal_presensi})},{id:"actions",header:"Aksi",cell:({row:e})=>s.jsx(O,{data:e.original})}],U=({day:e})=>s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"flex items-start justify-between"}),s.jsx(D,{}),s.jsx(L,{searchKey:"name",columns:Q,apiEndpoint:route("dashboard.presensi.data",{date:e}),title:"Data Absensi Maba",description:"Gunakan sistem informasi ini untuk manajemen kehadiran maba!"})]}),$=[{title:"Dashboard",link:"/dashboard"},{title:"Absensi Maba",link:"/dashboard/absensi-maba"}];function X({auth:e,response:a}){const[n,l]=i.useState(0),[d,o]=i.useState(0),[c,h]=i.useState(0),m=5==e.user.role_id?"2024-08-12":"2024-08-10",[j,x]=i.useState((()=>localStorage.getItem("selectedDay")||m));J(),i.useEffect((()=>{localStorage.setItem("selectedDay",j)}),[j]);const p=e=>{x(e)},u=async()=>{const e=await fetch(route("dashboard.presensi.count",{date:j}));if(!e.ok)throw new Error("Failed to fetch data");const s=await e.json();l(s.response.data.hadir),o(s.response.data.tidakHadir),h(s.response.data.izin)};return i.useEffect((()=>{u()}),[]),i.useEffect((()=>{u()}),[p]),s.jsxs(s.Fragment,{children:[s.jsxs(t,{user:e.user,children:[s.jsx(_,{items:$}),s.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Absensi Maba"}),s.jsxs(I,{onValueChange:p,defaultValue:j,children:[s.jsx(S,{className:"w-full md:w-[180px] font-bold",children:s.jsx(F,{placeholder:"Pilih Hari/Tanggal"})}),s.jsx(B,{children:s.jsxs(H,{children:[s.jsx(E,{children:"Day PPLK"}),5==e.user.role_id?s.jsxs(s.Fragment,{children:[s.jsx(T,{value:"2024-08-12",children:"Day 0 PPLK"}),s.jsx(T,{value:"2024-08-15",children:"Day 3 PPLK"})]}):s.jsxs(s.Fragment,{children:[s.jsx(T,{value:"2024-08-10",children:"Pra-PPLK"}),s.jsx(T,{value:"2024-08-12",children:"Day 0 PPLK"}),s.jsx(T,{value:"2024-08-13",children:"Day 1 PPLK"}),s.jsx(T,{value:"2024-08-14",children:"Day 2 PPLK"}),s.jsx(T,{value:"2024-08-15",children:"Day 3 PPLK"}),s.jsx(T,{value:"2024-08-16",children:"Day 4 PPLK"}),s.jsx(T,{value:"2024-08-17",children:"CUI"})]})]})})]}),s.jsxs("div",{className:"lg:grid-cols-4 grid grid-cols-2 gap-4",children:[s.jsxs(z,{children:[s.jsxs(A,{className:"flex flex-row items-center justify-between pb-2 space-y-0",children:[s.jsx(C,{className:"text-sm font-medium text-green-500",children:"Maba Hadir"}),s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",className:"fill-green-500",viewBox:"0 0 16 16",children:s.jsx("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"})})]}),s.jsx(M,{children:s.jsx("div",{className:"text-2xl font-bold",children:n})})]}),s.jsxs(z,{children:[s.jsxs(A,{className:"flex flex-row items-center justify-between pb-2 space-y-0",children:[s.jsx(C,{className:"text-sm font-medium text-red-600",children:"Maba Tidak Hadir"}),s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",className:"fill-red-600",viewBox:"0 0 16 16",children:s.jsx("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293z"})})]}),s.jsx(M,{children:s.jsx("div",{className:"text-2xl font-bold",children:d})})]}),s.jsxs(z,{children:[s.jsxs(A,{className:"flex flex-row items-center justify-between pb-2 space-y-0",children:[s.jsx(C,{className:"text-sm font-medium text-yellow-500",children:"Maba Izin"}),s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",className:"fill-yellow-500",viewBox:"0 0 16 16",children:s.jsx("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293z"})})]}),s.jsx(M,{children:s.jsx("div",{className:"text-2xl font-bold",children:c})})]})]}),s.jsxs(G,{defaultValue:"tabel-kehadiran",className:"space-y-4",children:[s.jsxs(V,{children:[s.jsx(R,{value:"tabel-kehadiran",children:"Tabel Kehadiran"}),s.jsx(R,{value:"presensi",children:"Presensi"})]}),s.jsx(W,{value:"presensi",children:s.jsx(r,{})}),s.jsx(W,{value:"tabel-kehadiran",children:s.jsx(U,{day:j})})]})]}),s.jsx(q,{})]})}export{X as default};
