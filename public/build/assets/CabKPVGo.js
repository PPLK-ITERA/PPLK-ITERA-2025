const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/BqmJX_Bc.js","assets/q38uCwqD.js","assets/DPkeyV0Z.js","assets/Bja4hiVx.css"])))=>i.map(i=>d[i]);
import{r as e,j as t,_ as a}from"./DPkeyV0Z.js";import{W as s,b as r,N as o}from"./q38uCwqD.js";import{B as n}from"./CGKbRqdy.js";import"./Ba4YecwC.js";const c=({onScan:c,onError:l,scanDelay:i,onBack:d,pause:u})=>{const m=e.useRef(null),f=e.useRef(null),[v,h]=e.useState(null),[x,j]=e.useState(!0),[g,p]=e.useState([]),[w,b]=e.useState(void 0);e.useEffect((()=>{(async()=>{const{BrowserMultiFormatReader:e}=await a((async()=>{const{BrowserMultiFormatReader:e}=await import("./BqmJX_Bc.js");return{BrowserMultiFormatReader:e}}),__vite__mapDeps([0,1,2,3]));h(new e)})()}),[]),e.useEffect((()=>{(async()=>{const e=(await navigator.mediaDevices.enumerateDevices()).filter((e=>"videoinput"===e.kind));p(e);const t=localStorage.getItem("selectedDeviceId");t&&e.some((e=>e.deviceId===t))?b(t):e.length>0&&b(e[0].deviceId)})()}),[]),e.useEffect((()=>{const e=setInterval((async()=>{if(x&&m.current&&v&&!u){const t=m.current.getScreenshot();if(t)try{const e=await v.decodeFromImage(void 0,t);f.current&&f.current.play(),c(e.getText()),j(!1),setTimeout((()=>j(!0)),i)}catch(e){e instanceof o?l(new Error("No QR code found.")):e instanceof Error?l(e):l(new Error("Unknown error occurred."))}}}),500);return()=>clearInterval(e)}),[v,c,l,x,i]);return t.jsxs("div",{className:"relative flex flex-col items-center h-full",children:[g.length>1&&t.jsx("select",{onChange:e=>{return t=e.target.value,b(t),void localStorage.setItem("selectedDeviceId",t);var t},value:w,className:"mb-4",children:g.map(((e,a)=>t.jsx("option",{value:e.deviceId,children:e.label||`Camera ${a+1}`},a)))}),t.jsxs("div",{className:"md:w-full relative w-screen h-full px-2",children:[t.jsx(s,{audio:!1,ref:m,screenshotFormat:"image/jpeg",videoConstraints:{deviceId:w?{exact:w}:void 0,facingMode:w?void 0:{exact:"environment"}},className:"w-screen brightness-50 h-[calc(100vh-120px)] md:h-auto border-2 border-black object-cover  md:object-contain"}),t.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden",children:[t.jsxs("div",{className:"flex flex-col items-center gap-1 mt-2 font-bold text-white",children:[t.jsx("h1",{children:"ABSEN C.U.I"}),t.jsx("h2",{children:"ini deskripsi"})]}),t.jsx("div",{className:"bg-gradient-to-t from-white/50 to-transparent animate-scan absolute top-0 left-0 w-full h-full"}),t.jsx(n,{onClick:d,className:"bottom-5 left-1/2 absolute -translate-x-1/2",children:"Absensi Manual"})]})]}),t.jsx("audio",{ref:f,src:r})]})};export{c as default};
