import{W as e,R as a,j as l,r as s,q as i}from"./Cazw6VBB.js";import{Q as t}from"./bqHQU371.js";import{D as r}from"./XLk5z4jz.js";import{C as o,a as d,B as n}from"./xKHUMm2E.js";import{B as m}from"./DaeEVyHU.js";import{P as c,a as x,b as h,C as p,c as u,d as f,e as j,f as v}from"./BPOCHW6j.js";import{I as b}from"./CawTscPd.js";import{L as N}from"./u6U27Q2C.js";import{S as k,a as g}from"./B35kdCLD.js";import{S as w,a as _,b as y,c as C,d as P,e as F,f as D}from"./8T8S-82V.js";import{T as S}from"./Cif8pLSY.js";import{P as U}from"./Dq0hbf3K.js";import{a as L}from"./BjW7b6if.js";import{c as G}from"./DztVUfFD.js";import{D as K,f as B,a as I,b as R,c as E,g as M,e as T}from"./CekJPCEn.js";import{T as $}from"./BwCNSijY.js";import{u as z}from"./CX-7ZgcB.js";import{u as q}from"./KqV_aZES.js";import{l as H}from"./BZtDV8eV.js";import{I as O}from"./CFTD4tbQ.js";import"./CXzfxgOl.js";import"./DovTLYjG.js";import"./Dqw-ucgh.js";import"./DlbJ-Hzm.js";import"./BwMU5Rmg.js";import"./DKlZK520.js";import"./Dcj1hihR.js";import"./BTtprT4W.js";import"./BWAKTBD8.js";import"./DWvKkqnp.js";import"./DPdBf6DS.js";const W=({currentUser:s})=>{var i,t,r;const{data:n,setData:G,put:K}=e({id:s.id,name:s.name,email:s.email,nim:s.nim,prodi_id:s.prodi_id,pita:null==(i=s.penyakit)?void 0:i.pita,ket_penyakit:null==(t=s.penyakit)?void 0:t.ket_penyakit,bio:s.bio,_method:"put"}),[B,I]=a.useState(!1),[R,E]=a.useState(""),M=U.find((e=>{if(e.id===s.prodi_id)return e.value}));return l.jsxs("div",{className:"h-fit flex-1 w-full p-4 space-y-5 border rounded-md shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold tracking-tight",children:"Informasi Umum"}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx(N,{htmlFor:"nama-maba",className:"text-left",children:"Nama"}),l.jsx(b,{type:"text",id:"nama-maba",value:n.name,onChange:e=>G("name",e.target.value),placeholder:"Chandra Budi Wijaya",className:"mt-1"})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx(N,{htmlFor:"email-maba",className:"text-left",children:"Email"}),l.jsx(b,{type:"email",id:"email-maba",onChange:e=>G("email",e.target.value),value:n.email,placeholder:"12.chandra.099@pplkitera.com",className:"mt-1"})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx(N,{htmlFor:"nim-maba",className:"text-left",children:"NIM"}),l.jsx(b,{type:"text",id:"nim-maba",value:n.nim,onChange:e=>G("nim",e.target.value),placeholder:"124290020",className:"mt-1"})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx(N,{htmlFor:"prodi-maba",className:"text-left",children:"Prodi"}),l.jsxs(c,{open:B,onOpenChange:I,children:[l.jsx(x,{asChild:!0,children:l.jsxs(m,{variant:"outline",role:"combobox","aria-expanded":B,className:"justify-between w-full mt-1 font-normal",children:[R?null==(r=U.find((e=>e.value===R)))?void 0:r.label:`${(null==M?void 0:M.label)||"Pilih Prodi"}`,l.jsx(o,{className:"shrink-0 w-4 h-4 ml-2 opacity-50"})]})}),l.jsx(h,{children:l.jsxs(p,{children:[l.jsx(u,{placeholder:"Cari Prodi...",className:"h-9"}),l.jsx(f,{children:"Data prodi tidak ada."}),l.jsx(j,{children:l.jsxs(k,{className:"h-[calc(100vh-64px)]",children:[U.map((e=>l.jsxs(v,{value:e.value,onSelect:a=>{E(a===R?"":a),G("prodi_id",e.id),I(!1)},children:[e.label,l.jsx(d,{className:L("ml-auto h-4 w-4",R===e.value?"opacity-100":"opacity-0")})]},e.value))),l.jsx(g,{orientation:"vertical"})]})})]})})]})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx(N,{htmlFor:"bio-maba",className:"text-left",children:"Bio"}),l.jsx(S,{id:"bio-maba",value:n.bio,onChange:e=>G("bio",e.target.value),placeholder:"Pucuk ubi pucuk kangkung",className:"mt-1 max-h-[150px]"})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx(N,{htmlFor:"pita-maba",className:"text-left",children:"Pita"}),l.jsxs(w,{defaultValue:n.pita||"",onValueChange:e=>{G("pita",e)},children:[l.jsx(_,{className:"w-full mt-1",children:l.jsx(y,{placeholder:"Pilih Pita"})}),l.jsx(C,{children:l.jsxs(P,{children:[l.jsx(F,{children:"Warna Pita"}),l.jsx(D,{value:"hijau",onClick:()=>{G("pita","hijau")},className:"text-green-600",children:"Hijau"}),l.jsx(D,{value:"kuning",onClick:()=>{G("pita","kuning")},className:"text-yellow-600",children:"Kuning"}),l.jsx(D,{value:"merah",onClick:()=>{G("pita","merah")},className:"text-red-600",children:"Merah"})]})})]})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx(N,{htmlFor:"riwayat-penyakit-maba",className:"text-left",children:"Riwayat Penyakit"}),l.jsx(b,{type:"text",id:"riwayat-penyakit-maba",value:n.ket_penyakit,onChange:e=>G("ket_penyakit",e.target.value),placeholder:"GERD (Gastroesophageal Reflux Disease)",className:"mt-1 capitalize"})]}),l.jsx("div",{className:"flex justify-end",children:l.jsx(m,{onClick:()=>{K(route("dashboard.user.edit-profil"))},children:"Simpan Data"})})]})},J=({currentUser:a})=>{const{data:s,setData:i,put:t}=e({id:a.id,new_password:"",confirm_new_password:"",_method:"put"});return l.jsxs("div",{className:"h-fit w-full p-4 space-y-5 border rounded-md shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold tracking-tight",children:"Reset Password"}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx(N,{htmlFor:"nama-maba",className:"text-left",children:"Password Baru"}),l.jsx(b,{type:"text",id:"nama-maba",value:s.new_password,onChange:e=>i("new_password",e.target.value),placeholder:"ex. 1234@Jamal#GG",className:"mt-1"})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx(N,{htmlFor:"email-maba",className:"text-left",children:"Konfirmasi Password"}),l.jsx(b,{type:"email",id:"email-maba",value:s.confirm_new_password,onChange:e=>i("confirm_new_password",e.target.value),placeholder:"ex. 1234@Jamal#GG",className:"mt-1"})]}),l.jsx("div",{className:"flex justify-end",children:l.jsx(m,{onClick:()=>{t(route("dashboard.user.edit-password")),s.new_password="",s.confirm_new_password=""},children:"Ubah Password"})})]})},Q=({currentUser:a})=>{const{data:s,setData:i,put:t}=e({id:a.id,instagram_url:a.instagram_url,linkedin_url:a.linkedin_url,_method:"put"});return l.jsxs("div",{className:"p-4 space-y-5 border rounded-md shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold tracking-tight",children:"Sosial Media"}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx(N,{htmlFor:"instagram-maba",className:"text-left",children:"Instagram"}),l.jsx(b,{type:"text",id:"instagram-maba",value:s.instagram_url,onChange:e=>i("instagram_url",e.target.value),placeholder:"https://instagram.com/...",className:"mt-1"})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx(N,{htmlFor:"linkedin-maba",className:"text-left",children:"LinkedIn"}),l.jsx(b,{type:"text",id:"linkedin-maba",value:s.linkedin_url,onChange:e=>i("linkedin_url",e.target.value),placeholder:"https://linkedin.com/in/...",className:"mt-1"})]}),l.jsx("div",{className:"flex justify-end",children:l.jsx(m,{onClick:()=>{t(route("dashboard.user.edit-sosmed"))},children:"Simpan Data"})})]})},V=({currentUser:a})=>{const[i,t]=s.useState(null),{data:r,setData:o,put:d}=e({id:a.id,sertif:"",_method:"put"}),n=G((async()=>{if(!/^https:\/\/(www\.)?\w+\.google\.com\/.*$/g.test(r.sertif))return void t("link harus dari Google Drive");let e=r.sertif.split("/")[5];(await fetch(`https://www.googleapis.com/drive/v2/files/${e}?key=undefined`)).ok?t(""):t("Link drive belum publik, silahkan coba lagi")}),100);return l.jsxs("div",{className:"p-4 space-y-5 border rounded-md shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold tracking-tight",children:"Tentang PPLK"}),a.kelompok?l.jsxs("div",{className:"flex w-full gap-2",children:[l.jsxs("div",{className:"flex flex-col w-full",children:[l.jsx(N,{htmlFor:"nama-kelompok-maba",className:"text-left",children:"Nama Kelompok"}),l.jsx(b,{type:"text",id:"nama-kelompok-maba",value:a.kelompok.nama_kelompok,disabled:!0,placeholder:"Nawasena",className:"mt-1"})]}),l.jsxs("div",{className:"flex flex-col w-full",children:[l.jsx(N,{htmlFor:"nomor-kelompok-maba",className:"text-left",children:"Nomor Kelompok"}),l.jsx(b,{type:"number",id:"nomor-kelompok-maba",value:a.kelompok.no_kelompok,disabled:!0,placeholder:"73",className:"mt-1 [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"})]})]}):null,l.jsxs("div",{className:"flex flex-col w-full",children:[l.jsx(N,{htmlFor:"score-game-individu-maba",className:"text-left",children:"Score Game Individu"}),l.jsx(b,{type:"number",id:"score-game-individu-maba",value:a.score,disabled:!0,placeholder:"73",className:"mt-1 [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"})]}),l.jsxs("div",{className:"flex flex-col w-full",children:[l.jsx(N,{htmlFor:"pilar-maba",className:"text-left",children:"Pilar"}),l.jsx(b,{type:"text",id:"pilar-maba",value:a.pilar?a.pilar.pilar_name:"Belum ada pilar",disabled:!0,placeholder:"Pilar User",className:"mt-1"})]}),l.jsxs("div",{className:"flex flex-col w-full",children:[l.jsx(N,{htmlFor:"serti-kelulusan-pplk-maba",className:"text-left",children:"Sertifikat Kelulusan PPLK"}),l.jsx(b,{type:"text",id:"serti-kelulusan-pplk-maba",value:a.link_sertif?a.link_sertif:r.sertif,placeholder:"https://drive.google.com/....",className:"mt-1",onChange:e=>{o("sertif",e.target.value),n()}}),i?l.jsx("span",{className:"text-red-500 text-[12px]",children:i}):""===i?l.jsx("span",{className:"text-[12px] text-green-500",children:"Link valid"}):null]}),l.jsx("div",{className:"flex justify-end",children:l.jsx(m,{onClick:()=>{d(route("dashboard.user.edit-sertif"))},disabled:!!i||!r.sertif,children:"Simpan Sertifikat"})})]})};function A({response:a}){const{auth:o}=i().props,{toast:d}=z();q();const c=[{title:"Dashboard",link:"/dashboard"},{title:"Edit Data User",link:route("dashboard.user.edit",a.data.id)}],x=a.data,[h,p]=s.useState(null),[u,f]=s.useState(""),{setData:j,post:v}=e({id:x.id,photo:null,_method:"put"});return l.jsxs(l.Fragment,{children:[l.jsxs(r,{user:o.user,children:[l.jsx(n,{items:c}),l.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Edit Data User"}),l.jsxs("div",{className:"md:flex-row flex flex-col gap-2",children:[l.jsxs("div",{className:"md:mx-0 mx-auto",children:[l.jsx("div",{className:"w-[200px] h-[220px] border rounded-sm overflow-hidden",children:l.jsx("img",{src:x.photo_profile_url?x.photo_profile_url:H,alt:`${x.name} photo profile`,className:"w-full h-full bg-center bg-cover"})}),l.jsxs(K,{children:[l.jsx(B,{asChild:!0,children:l.jsx(m,{variant:"outline",className:"w-[200px] py-2 border mt-3",children:"Edit Foto Profile"})}),l.jsxs(I,{className:"sm:max-w-[425px]",children:[l.jsx(R,{children:l.jsxs(E,{children:["Edit Foto Profil ",x.name]})}),l.jsx("div",{className:"grid gap-4 py-4",children:l.jsxs("div",{className:"relative flex items-center justify-center mx-auto rounded-full",children:[l.jsx("div",{className:"w-36 h-36 flex items-center justify-center overflow-hidden border rounded-full",children:u?l.jsx("img",{src:u,alt:"preview-image-kelompok",className:"object-cover object-center w-full h-full"}):l.jsx("img",{src:x.photo_profile_url?x.photo_profile_url:H,alt:`${x.name} photo profile`,className:"object-cover object-center w-full h-full"})}),l.jsx(N,{htmlFor:"upload-logo-kelompok",children:l.jsx(O,{size:32,color:"black",className:"-mt-[1px] cursor-pointer absolute bottom-1 right-1 border shadow-lg bg-white rounded-full p-1"})}),l.jsx(b,{type:"file",onChange:e=>{const a=e.target.files[0];if(a){if(!a.type.startsWith("image"))return d({title:"Invalid File Type",description:"Tolong pilih file gambar.",variant:"destructive"}),p(null),j("photo",null),void f("");if(a.size>2048e3)return d({title:"File Too Large",description:"Pilih foto yang berukuran dibawah 2MB.",variant:"destructive"}),p(null),j("photo",null),void f("");p(a),f(URL.createObjectURL(a)),j("photo",a)}else p(null),j("photo",null),f("")},accept:"image/*",className:"hidden",id:"upload-logo-kelompok"})]})}),l.jsxs(M,{children:[l.jsx(T,{asChild:!0,children:l.jsx(m,{variant:"outline",children:"Batalkan"})}),l.jsx(T,{asChild:!0,children:l.jsx(m,{onClick:()=>{v(route("dashboard.user.edit-foto"))},children:"Simpan"})})]})]})]}),l.jsxs("div",{className:"w-[200px] mt-5",children:[l.jsx("h2",{className:"font-semibold text-center",children:"Kode QR"}),l.jsx("div",{className:"border",children:x.qrcode?l.jsx(t,{value:x.qrcode.code,size:200,includeMargin:!0,level:"H",width:500,height:500}):null})]})]}),l.jsxs("div",{className:"md:flex-row flex flex-col w-full gap-2",children:[l.jsxs("div",{className:"md:w-1/2 flex flex-col w-full gap-2",children:[l.jsx(W,{currentUser:x}),l.jsx(J,{currentUser:x})]}),l.jsxs("div",{className:"md:w-1/2 flex flex-col w-full gap-2",children:[1===x.role_id||2===x.role_id||3===x.role_id||4===x.role_id?l.jsx(Q,{currentUser:x}):null,1===x.role_id||2===x.role_id||3===x.role_id||4===x.role_id?l.jsx(V,{currentUser:x}):null]})]})]}),l.jsx("div",{})]}),l.jsx($,{})]})}export{A as default};
