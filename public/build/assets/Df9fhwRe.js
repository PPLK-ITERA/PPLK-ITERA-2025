import{r as e,W as s,j as r}from"./DnSIslVc.js";import{J as a,Q as t}from"./CKFRnJrx.js";import{D as o}from"./DVS3Tfyy.js";import{a as n}from"./Dbp54U5_.js";import{B as i}from"./lXcpzWwF.js";import{B as l}from"./DmVL694d.js";import{T as d}from"./DYd5sM4X.js";import{u as c}from"./Db08dOex.js";import"./DARowtXe.js";import"./CU8DhoCq.js";import"./DWojppua.js";import"./mfDLBzIm.js";import"./CWGcfyel.js";import"./D-y7h3z9.js";import"./QV35wma3.js";import"./sUc-lO_l.js";import"./CsEkPjGD.js";import"./CbwFN5sd.js";import"./Bt5Xinu3.js";import"./BZtDV8eV.js";import"./D65vq0Za.js";import"./BOqnkcb4.js";function m({userId:a,score:t}){const[o,l]=e.useState(!1),{data:d,setData:c}=s({code:"",qrUrl:""});return r.jsxs(r.Fragment,{children:[r.jsxs("p",{children:["Gunakan fitur ini untuk generate QR kelompok anda untuk di scan oleh ",r.jsx("span",{className:"font-bold",children:"Korlap"})]}),r.jsx("div",{className:"w-fit p-2 text-white bg-green-600 rounded-md",children:r.jsxs("p",{children:["Score Kelompok : ",t]})}),r.jsxs("div",{className:"flex flex-col items-center w-full gap-10",children:[r.jsxs("div",{className:"w-fit",children:[r.jsxs("p",{className:"text-center",children:["Tunjukkan QR Code ini ke"," ",r.jsx("span",{className:"font-bold",children:"Korlap"})]}),r.jsx("div",{className:"aspect-square bg-white border flex justify-center items-center mt-5 w-[300px] h-[300px] rounded-md",children:""===d.qrUrl?null:o?r.jsx("p",{children:"Loading..."}):r.jsx(n,{value:d.code,size:256,includeMargin:!1})})]}),r.jsx(i,{onClick:()=>{(async()=>{l(!0);const e=await fetch(route("dashboard.poin.qrcode",a)),s=await e.json();c(s.data),l(!1)})()},children:"Generate QR Kelompok"})]})]})}const p=[{title:"Dashboard",link:"/dashboard"},{title:"Game Offline",link:"/dashboard/game-offline"}];function j({auth:n,response:j}){const[u,f]=e.useState(0),{data:h,setData:x,post:k,processing:g}=s({qr_code:""}),[w,b]=e.useState(!1);c();return e.useEffect((()=>{(async()=>{const e=await fetch(route("dashboard.poin.score"),{method:"GET",headers:{"Content-Type":"application/json"}}),s=await e.json();f(s.response.data.total_score)})()}),[]),e.useEffect((()=>{h.qr_code&&k(route("dashboard.poin.store"))}),[h.qr_code]),r.jsxs(r.Fragment,{children:[r.jsxs(o,{user:n.user,children:[r.jsx(l,{items:p}),r.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Game Offline"}),2===n.user.role_id||3===n.user.role_id||4===n.user.role_id?r.jsx(r.Fragment,{children:u?r.jsx(m,{userId:n.user.id,score:u}):null}):null,6===n.user.role_id?r.jsxs(r.Fragment,{children:[r.jsxs("p",{children:["Gunakan fitur ini untuk scan QR kelompok dari"," ",r.jsx("span",{className:"font-bold",children:"Dapmen"})," yang menang pada game offline"]}),r.jsxs("div",{className:"flex flex-col items-center justify-center w-full",children:[r.jsx("div",{className:"md:w-96 border",children:r.jsx(a,{onScan:function(e){var s,r;(r=(null==(s=e.at(-1))?void 0:s.rawValue)||"")&&x("qr_code",r)},components:{finder:!0,tracker:t,zoom:!0,torch:!0},allowMultiple:!0,scanDelay:2e3,paused:w,styles:{container:{width:"100%"}}})}),r.jsx(i,{className:"mt-5",children:"Scan QR Kelompok"})]})]}):null]}),r.jsx(d,{})]})}export{j as default};
