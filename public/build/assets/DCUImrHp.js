import{G as a,r as e,j as s}from"./Cuadvpgc.js";import{B as i,C as l}from"./pZO4vjTv.js";import{D as t}from"./Dd8RjkLT.js";import{B as r,b as n}from"./CS0zgTV8.js";import{I as d}from"./BTOYI1ei.js";import{L as o}from"./CvPmtqdQ.js";import{S as c,a as u,b as m,c as h,f as j,d as p,e as g}from"./CSlhgmnZ.js";import{t as x}from"./y0ywvSUk.js";import{T as k}from"./BrhaNaLC.js";import{D as f,f as N,a as v,b as T,c as b,d as w,g as _,e as S}from"./CCETFF0h.js";import{D as y}from"./BdsiWHd-.js";import{S as C}from"./CuQ8kXdZ.js";import{P as E,a as A,b as K,C as P,c as D,d as F,e as I,f as L}from"./DMF4ySZq.js";import{S as O,a as R}from"./CbL-ctTR.js";import{T as B}from"./CKhGx-ZV.js";import{u as G}from"./CUeCSDLM.js";import{a as J}from"./J5x9RQPa.js";import{I as M}from"./B5HnuOa6.js";import{C as q}from"./yEihEaud.js";import"./BbWRkWWZ.js";import"./CiwqXEnr.js";import"./Bi7HUfK4.js";import"./BATGzmgJ.js";import"./OhYcO60T.js";import"./CdKkzVoY.js";import"./ChplkwN5.js";import"./BPWbQ1xy.js";import"./BMbQ6VS6.js";import"./ey0FYjj9.js";import"./DIUbn7aS.js";import"./BXhHgs5K.js";import"./DimR843Z.js";import"./DfrrcWX1.js";import"./DPdBf6DS.js";function V(){const{data:i,setData:l,post:t,processing:n,errors:p}=a({judul:"",deskripsi:"",hari:"",tipe_link:"",kategori:"",deadline:""}),[g,f]=e.useState(null);return s.jsxs("form",{"aria-describedby":"form",className:"grid gap-4 py-4",onSubmit:a=>{a.preventDefault(),x({title:"Mohon tunggu sebentar...",description:"Sedang mengupload Tugas..."}),t(route("dashboard.tugas.addTugas"),{onError:()=>{x({title:"Uh oh! Gagal mengupload Tugas.",description:p.judul||p.deskripsi||p.hari||p.tipe_link||p.kategori||p.deadline})},onSuccess:()=>{x({title:"Berhasil!",description:"Tugas berhasil diupload."})}}),window.location.reload()},children:[s.jsxs("div",{className:"grid items-center grid-cols-4 gap-4",children:[s.jsx(o,{htmlFor:"judul",className:"text-right",children:"Judul"}),s.jsx(d,{id:"judul",name:"judul",required:!0,type:"text",value:i.judul,maxLength:255,className:"col-span-3",onChange:a=>{l("judul",a.target.value),validateJudul()}})]}),s.jsxs("div",{className:"grid items-center grid-cols-4 gap-4",children:[s.jsx(o,{htmlFor:"deskripsi",className:"text-right",children:"Deskripsi"}),s.jsx(k,{id:"deskripsi",name:"deskripsi",required:!0,type:"text",value:i.deskripsi,maxLength:255,className:"col-span-3",onChange:a=>l("deskripsi",a.target.value)})]}),s.jsxs("div",{className:"grid items-center grid-cols-4 gap-4",children:[s.jsx(o,{htmlFor:"hari",className:"text-right",children:"Hari"}),s.jsxs(c,{value:i.hari,onValueChange:a=>l("hari",a),children:[s.jsx(u,{className:"col-span-3",id:"hari",name:"hari",required:!0,children:s.jsx(m,{placeholder:"Pilih hari"})}),s.jsxs(h,{children:[s.jsx(j,{value:"0",children:"0"}),s.jsx(j,{value:"1",children:"1"}),s.jsx(j,{value:"2",children:"2"}),s.jsx(j,{value:"3",children:"3"}),s.jsx(j,{value:"4",children:"4"}),s.jsx(j,{value:"5",children:"5"})]})]})]}),s.jsxs("div",{className:"grid items-center grid-cols-4 gap-4",children:[s.jsx(o,{htmlFor:"tipe_link",className:"text-right",children:"Tipe Link"}),s.jsxs(c,{value:i.tipe_link,onValueChange:a=>l("tipe_link",a),children:[s.jsx(u,{className:"col-span-3",id:"tipe_link",name:"tipe_link",required:!0,children:s.jsx(m,{placeholder:"Pilih tipe link"})}),s.jsxs(h,{children:[s.jsx(j,{value:"instagram",children:"Instagram"}),s.jsx(j,{value:"tiktok",children:"TikTok"}),s.jsx(j,{value:"drive",children:"Google Drive"}),s.jsx(j,{value:"linkedin",children:"LinkedIn"})]})]})]}),s.jsxs("div",{className:"grid items-center grid-cols-4 gap-4",children:[s.jsx(o,{htmlFor:"kategori",className:"text-right",children:"Kategori"}),s.jsxs(c,{value:i.kategori,onValueChange:a=>l("kategori",a),children:[s.jsx(u,{className:"col-span-3",id:"kategori",name:"kategori",required:!0,children:s.jsx(m,{placeholder:"Pilih kategori"})}),s.jsxs(h,{children:[s.jsx(j,{value:"individu",children:"Individu"}),s.jsx(j,{value:"kelompok",children:"Kelompok"})]})]})]}),s.jsxs("div",{className:"grid items-center grid-cols-4 gap-4",children:[s.jsx(o,{htmlFor:"deadline",className:"text-right",children:"Deadline"}),s.jsx(d,{id:"deadline",name:"deadline",required:!0,type:"date",value:i.deadline,className:"col-span-3",onChange:a=>l("deadline",a.target.value),min:(new Date).toISOString().split("T")[0]})]}),s.jsxs("div",{className:"place-content-center flex items-center justify-between gap-4 mt-4 text-right",children:[!!g&&s.jsx("p",{className:"text-sm text-red-500",children:g}),s.jsx(r,{size:"sm",type:"submit",className:"w-full bg-[#BE3F00]",disabled:!!g||n,children:"Tambahkan Tugas"})]})]})}const z=({data:e})=>{const{setData:i,put:l}=a({id:0,catatan:"",_method:"put"});return s.jsx(s.Fragment,{children:s.jsxs("div",{className:"flex gap-1 p-2",children:[s.jsx("a",{href:`${e.tugas.jawaban??"#"}`,className:`${n({size:"sm"})}`,children:"Lihat Tugas"}),s.jsxs(f,{children:[e.tugas.isReturn?null:s.jsx(N,{asChild:!0,children:s.jsx(r,{className:"gap-2",variant:"outline",size:"sm",onClick:()=>i("id",e.tugas.id),children:"Kembalikan Tugas"})}),s.jsxs(v,{className:"sm:max-w-[425px]",children:[s.jsxs(T,{children:[s.jsx(b,{children:"Kembalikan Tugas"}),s.jsx(w,{children:"Kembalikan tugas yang sudah dikerjakan oleh mahasiswa ini agar diperbaiki"})]}),s.jsx("div",{className:"grid gap-4 py-4",children:s.jsxs("div",{className:"flex flex-col",children:[s.jsx(o,{htmlFor:"catatan",className:"text-left",children:"Catatan"}),s.jsx(k,{id:"catatan",onChange:a=>i("catatan",a.target.value),placeholder:"Berikan catatan pengembalian tugas",className:"mt-1"})]})}),s.jsxs(_,{children:[s.jsx(S,{asChild:!0,children:s.jsx(r,{variant:"outline",children:"Batalkan"})}),s.jsx(S,{asChild:!0,children:s.jsx(r,{onClick:()=>{l(route("dashboard.tugas.return"))},children:"Lanjutkan"})})]})]})]})]})})},H=[{id:"no",header:"No",cell:({row:a})=>a.index+1},{id:"name",accessorKey:"user.name",header:"Nama",cell:({row:a})=>a.original.user.name},{id:"judul",accessorKey:"tugas.judul",header:"Nama Tugas",cell:({row:a})=>a.original.tugas.judul},{id:"nama_kelompok",accessorKey:"user.nama_kelompok",header:"Kelompok",cell:({row:a})=>a.original.user.nama_kelompok},{id:"status",accessorKey:"tugas.status",header:"Status",cell:({row:a})=>a.original.status},{id:"catatan",accessorKey:"tugas.catatan",header:"Catatan",cell:({row:a})=>a.original.tugas.catatan},{id:"actions",header:"Aksi",cell:({row:a})=>s.jsx(z,{data:a.original})}],$=({tugas_id:a,no_kelompok:i,status:l})=>{const[t,n]=e.useState({status:l||null,no_kelompok:i||null,tugas_id:a});e.useEffect((()=>{(t.no_kelompok||t.status||t.tugas_id)&&(async()=>{const a=route("dashboard.tugas.data",{no_kelompok:t.no_kelompok??0,status:t.status??0,tugas_id:t.tugas_id});console.log("Fetching data for:",a)})()}),[t]);return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx(r,{onClick:()=>{n({tugas_id:a,no_kelompok:i||null,status:l||null})},children:"Terapkan"}),s.jsx(r,{onClick:()=>{window.location.reload()},variant:"outline",children:"Reset Filter"})]}),s.jsx(C,{}),s.jsx(y,{searchKey:"Nama, Nim, Email",columns:H,apiEndpoint:route("dashboard.tugas.data",{tugas_id:t.tugas_id,no_kelompok:t.no_kelompok??0,status:t.status??0}),title:"Pengumpulan Tugas",description:"Daftar pengumpulan tugas oleh kelompok."})]})},W=[{title:"Ellysion Panel",link:"/dashboard"},{title:"Pengumpulan Tugas",link:"/dashboard/pengumpulan-tugas"}];function U({auth:a,response:n}){const d=a.user;G();const[x,k]=e.useState(!1),[w,_]=e.useState(""),[S,y]=e.useState(""),[C,z]=e.useState(""),[H,U]=e.useState(""),[X,Y]=e.useState([]),[Z,Q]=e.useState([]),[aa,ea]=e.useState(!1),[sa,ia]=e.useState(null),la=async()=>{ea(!0),ia(null);try{const a=await fetch(route("dashboard.tugas.data.judulTugas"),{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);const e=await a.json(),s=e.response?.data||e.data||e;Q(s),s&&s.length>0&&(y(s[0].id.toString()),z(s[0].id))}catch(a){console.error("Error fetching tugas data:",a),ia("Gagal mengambil data tugas dari server");const e=[{id:1,judul:"DIRETRA"},{id:2,judul:"HARTATERA"},{id:3,judul:"COOLIN"},{id:4,judul:"GARTA MATERA"},{id:5,judul:"PORTAL DILOGI"},{id:6,judul:"REKASITERA"},{id:7,judul:"MOTLET CAKRAWALA"}];Q(e),y(e[0].id.toString()),z(e[0].id)}finally{ea(!1)}};e.useEffect((()=>{(async()=>{try{const a=await fetch(route("dashboard.user.data.kelompok"),{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);const e=await a.json();Y(e)}catch(a){console.error("Error fetching kelompok data:",a)}})(),la()}),[]);const ta=a=>{_(a===w?"":a),k(!1)};return s.jsxs(s.Fragment,{children:[s.jsxs(t,{user:a.user,children:[s.jsx(i,{items:W}),s.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Pengumpulan Tugas"}),7==d.role_id||3==d.role_id?s.jsx("div",{className:"place-content-start flex w-full",children:s.jsxs(f,{children:[s.jsx(N,{asChild:!0,children:s.jsxs(r,{children:[s.jsx(M,{size:18}),s.jsx("span",{children:"Buat Tugas"})]})}),s.jsxs(v,{children:[s.jsx(T,{children:s.jsx(b,{children:"Buat Tugas"})}),s.jsx(V,{onSuccess:()=>{la()}})]})]})}):null,s.jsx("h2",{children:"Filter berdasarkan..."}),sa&&s.jsx("div",{className:"p-4 mb-4 text-red-700 bg-red-100 border border-red-300 rounded",children:sa}),s.jsxs("div",{className:"md:flex-row md:items-center flex flex-col items-start gap-1",children:[s.jsxs("div",{className:"grow w-full",children:[s.jsx(o,{className:"ml-[1px]",children:"Nama Tugas"}),s.jsxs(c,{onValueChange:a=>{y(a),z(parseInt(a))},value:S,disabled:aa,children:[s.jsx(u,{className:"w-full font-bold",children:s.jsx(m,{placeholder:aa?"Memuat...":"Pilih nama tugas"})}),s.jsx(h,{children:s.jsxs(p,{children:[s.jsx(g,{children:"Nama Tugas"}),Z.map((a=>s.jsx(j,{value:a.id.toString(),children:a.judul},a.id)))]})})]})]}),s.jsxs("div",{className:"grow w-full",children:[s.jsx(o,{className:"ml-[1px]",children:"Nama Kelompok"}),s.jsxs(E,{open:x,onOpenChange:k,children:[s.jsx(A,{asChild:!0,children:s.jsxs(r,{variant:"outline",role:"combobox","aria-expanded":x,className:"justify-between w-full font-normal shadow-none",size:"sm",children:[w?X.find((a=>JSON.stringify(a.id)===w))?.no_kelompok+" - "+X.find((a=>JSON.stringify(a.id)===w))?.nama_kelompok:"Pilih Kelompok",s.jsx(l,{className:"shrink-0 w-4 h-4 ml-2 opacity-50"})]})}),s.jsx(K,{children:s.jsxs(P,{children:[s.jsx(D,{placeholder:"Cari Kelompok...",className:"h-9"}),s.jsx(F,{children:"Data kelompok tidak ada."}),s.jsx(I,{children:s.jsxs(O,{className:"h-[calc(50vh-64px)]",children:[X.length>0?X.map(((a,e)=>s.jsxs(L,{value:JSON.stringify(a.id),onSelect:ta,children:[a.no_kelompok," - ",a.nama_kelompok,s.jsx(q,{className:J("ml-auto h-4 w-4",w===JSON.stringify(a.id)?"opacity-100":"opacity-0")})]},e))):null,s.jsx(R,{orientation:"vertical"})]})})]})})]})]}),s.jsxs("div",{className:"grow w-full",children:[s.jsx(o,{className:"ml-[1px]",children:"Status Pengumpulan"}),s.jsxs(c,{onValueChange:a=>{U(a)},value:H,children:[s.jsx(u,{className:"w-full font-bold",children:s.jsx(m,{placeholder:"Pilih status pengumpulan"})}),s.jsx(h,{children:s.jsxs(p,{children:[s.jsx(g,{children:"Status Pengumpulan"}),s.jsx(j,{value:"1",children:"Sudah Mengumpulkan"}),s.jsx(j,{value:"2",children:"Telat Mengumpulkan"}),s.jsx(j,{value:"3",children:"Dikembalikan"}),s.jsx(j,{value:"4",children:"Belum Mengumpulkan"})]})})]})]})]}),s.jsx($,{tugas_id:"number"==typeof C?C:0,no_kelompok:w?parseInt(JSON.parse(w)):0,status:H?parseInt(H):0})]}),s.jsx(B,{})]})}export{U as default};
