import{r as e,G as s,j as r,S as a}from"./DVjj-jZF.js";import{J as t,Q as o}from"./KQ5iU8kc.js";import{D as n}from"./CmwsB9AN.js";import{a as i}from"./DYyITpm-.js";import{B as l}from"./BUw-qYen.js";import{B as c}from"./lVA1slOn.js";import{T as d}from"./CqJXKRBA.js";import{u as m}from"./BP5x5qYI.js";import"./di3D8cxH.js";import"./B8-9IfWq.js";import"./DJ6impKD.js";import"./DWh3vx1M.js";import"./CQF3KA6W.js";import"./C5hAA_oI.js";import"./C5Uwzh4M.js";import"./BUWaXufm.js";import"./sINA_5uq.js";import"./OAclVJ-h.js";import"./C0u18CNn.js";import"./CNbJ6i5L.js";import"./Dt_KKjHV.js";function j({userId:a,score:t}){const[o,n]=e.useState(!1),{data:c,setData:d}=s({code:"",qrUrl:""});return r.jsxs(r.Fragment,{children:[r.jsxs("p",{children:["Gunakan fitur ini untuk generate QR kelompok anda untuk di scan oleh"," ",r.jsx("span",{className:"font-bold",children:"Korlap"})]}),r.jsx("div",{className:"w-fit p-2 text-white bg-green-600 rounded-md",children:r.jsxs("p",{children:["Score Kelompok : ",t]})}),r.jsxs("div",{className:"flex flex-col items-center w-full gap-10",children:[r.jsxs("div",{className:"w-fit",children:[r.jsxs("p",{className:"text-center",children:["Tunjukkan QR Code ini ke ",r.jsx("span",{className:"font-bold",children:"Korlap"})]}),r.jsx("div",{className:"aspect-square bg-white border flex justify-center items-center mt-5 w-[300px] h-[300px] rounded-md",children:""===c.qrUrl?null:o?r.jsx("p",{children:"Loading..."}):r.jsx(i,{value:c.code,size:256,includeMargin:!1})})]}),r.jsx(l,{onClick:()=>{(async()=>{n(!0);const e=await fetch(route("dashboard.poin.qrcode",a)),s=await e.json();d(s.data),n(!1)})()},children:"Generate QR Kelompok"})]})]})}const p=[{title:"Ellysion Panel",link:"/dashboard"},{title:"Game Offline",link:"/dashboard/game-offline"}];function u({auth:i,response:u}){const[f,h]=e.useState(0),{data:x,setData:k,post:g}=s({qr_code:""}),[w,b]=e.useState(!1);m();return e.useEffect((()=>{(async()=>{const e=await fetch(route("dashboard.poin.score"),{method:"GET",headers:{"Content-Type":"application/json"}}),s=await e.json();h(s.response.data.total_score)})()}),[]),e.useEffect((()=>{x.qr_code&&g(route("dashboard.poin.store"))}),[x.qr_code]),r.jsxs(r.Fragment,{children:[r.jsx(a,{title:"Game Offline"}),r.jsxs(n,{user:i.user,children:[r.jsx(c,{items:p}),r.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Game Offline"}),2===i.user.role_id||3===i.user.role_id||4===i.user.role_id?r.jsx(r.Fragment,{children:f?r.jsx(j,{userId:i.user.id,score:f}):null}):null,6===i.user.role_id?r.jsxs(r.Fragment,{children:[r.jsxs("p",{children:["Gunakan fitur ini untuk scan QR kelompok dari"," ",r.jsx("span",{className:"font-bold",children:"Dapmen"})," yang menang pada game offline"]}),r.jsxs("div",{className:"flex flex-col items-center justify-center w-full",children:[r.jsx("div",{className:"md:w-96 border",children:r.jsx(t,{onScan:function(e){var s;(s=e.at(-1)?.rawValue||"")&&k("qr_code",s)},components:{finder:!0,tracker:o,zoom:!0,torch:!0},allowMultiple:!0,scanDelay:2e3,paused:w,styles:{container:{width:"100%"}}})}),r.jsx(l,{className:"mt-5",children:"Scan QR Kelompok"})]})]}):null]}),r.jsx(d,{})]})}export{u as default};
