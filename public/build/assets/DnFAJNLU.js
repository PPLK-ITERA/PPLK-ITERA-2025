import{r as e,j as s,a as o,q as a,W as l}from"./DqG_jvZq.js";import{D as i}from"./CtFtZqrz.js";import{A as r}from"./yXH11Gys.js";import{b as t,B as m}from"./D8EpR_mp.js";import{D as n}from"./GHyQjvu2.js";import{S as d}from"./K081oCV9.js";import{B as c}from"./DmFc5DtG.js";import{D as p,f as j,a as u,b as h,c as x,g as k,e as f}from"./zKGVgHNP.js";import{I as g}from"./C4AutZlW.js";import{L as v}from"./D-z7qY3_.js";import{T as N}from"./CJHU9WGK.js";import{u as b}from"./POyznjw6.js";import{l as w}from"./BZtDV8eV.js";import{I as y}from"./BNQrAqMh.js";import"./Djrf8RR7.js";import"./DsQM-G0s.js";import"./DP5z5bPu.js";import"./xgQHLkAg.js";import"./DfL4xOZn.js";import"./Bvqnwa5P.js";import"./XTxzhHY9.js";import"./Cshwob9e.js";import"./Dw_vvL_O.js";import"./Chi2-jaP.js";import"./C46PLoNX.js";import"./C-dGCEgX.js";import"./DWF5FuEh.js";import"./U-U80pLs.js";import"./CfLNumT5.js";import"./BVaomOsG.js";const _=({data:a})=>{const[l,i]=e.useState(!1),[m,n]=e.useState(!1);return s.jsxs(s.Fragment,{children:[s.jsx(r,{isOpen:m,onClose:()=>n(!1),onConfirm:async()=>{},loading:l}),s.jsx("div",{className:"flex gap-1 p-2",children:s.jsx(o,{href:`/dashboard/user/edit/${a.id}`,className:`${t({size:"sm"})}`,children:"Edit"})})]})},K=[{id:"no",header:"No",cell:({row:e})=>e.original.no},{id:"name",accessorKey:"user.name",header:"Nama",cell:({row:e})=>e.original.user.name},{id:"nim",accessorKey:"user.nim",header:"NIM",cell:({row:e})=>e.original.user.nim},{id:"email",accessorKey:"user.email",header:"Email",cell:({row:e})=>e.original.user.email},{id:"actions",header:"Aksi",cell:({row:e})=>s.jsx(_,{data:e.original})}],C=()=>s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"flex items-start justify-between"}),s.jsx(d,{}),s.jsx(n,{searchKey:"Nama, Nim, Email",columns:K,apiEndpoint:route("dashboard.user.data.maba"),title:"Data Kelompok",description:"Gunakan sistem informasi ini untuk melihat data kelompok!"})]}),D=[{title:"Dashboard",link:"/dashboard"},{title:"Informasi Kelompok",link:"/dashboard/informasi-kelompok"}];function E({auth:o}){const{toast:r}=b(),{flash:t}=a().props;e.useEffect((()=>{t.response&&(200===t.response.status?r({title:"Berhasil",description:t.response.message,variant:"default"}):r({title:"Gagal",description:t.response.message,variant:"destructive"}),window.location.reload())}),[t,r]);const[n,d]=e.useState(null),[_,K]=e.useState(""),[E,S]=e.useState(),{data:F,setData:I,post:M}=l({nama_kelompok:"",logo_kelompok:null,_method:"put"});e.useEffect((()=>{(async()=>{const e=await fetch(route("dashboard.kelompok.data"),{method:"GET",headers:{"Content-Type":"application/json"}}),s=await e.json();S(s),I("nama_kelompok",s.nama_kelompok)})()}),[]);return s.jsxs(s.Fragment,{children:[s.jsxs(i,{user:o.user,children:[s.jsx(c,{items:D}),s.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Informasi Kelompok"}),s.jsx("div",{className:"w-36 h-36 md:mx-0 mx-auto overflow-hidden border rounded-full",children:(null==E?void 0:E.logo_kelompok)?s.jsx("img",{src:null==E?void 0:E.logo_kelompok,alt:`logo kelompok ${null==E?void 0:E.nama_kelompok}`}):s.jsx("img",{src:w,alt:"logopplk"})}),s.jsxs("div",{className:"flex items-center justify-start gap-2 font-semibold",children:[s.jsxs("p",{className:"line-clamp-1 text-lg capitalize",children:["Kelompok ",null==E?void 0:E.no_kelompok," ",null==E?void 0:E.nama_kelompok]}),s.jsxs(p,{children:[s.jsx(j,{asChild:!0,children:s.jsx(y,{className:"-mt-[1px] cursor-pointer"})}),s.jsxs(u,{className:"sm:max-w-[425px]",children:[s.jsx(h,{children:s.jsx(x,{children:"Edit Informasi Kelompok"})}),s.jsxs("div",{className:"grid gap-4 py-4",children:[s.jsxs("div",{className:"w-36 h-36 relative flex items-center justify-center mx-auto border rounded-full",children:[_?s.jsx("div",{className:"w-36 h-36 overflow-hidden rounded-full",children:s.jsx("img",{src:_,alt:"preview-image-kelompok w-full h-full"})}):s.jsx("div",{className:"w-36 h-36 overflow-hidden rounded-full",children:s.jsx("img",{src:null==E?void 0:E.logo_kelompok,alt:`logo kelompok ${null==E?void 0:E.nama_kelompok}`})}),s.jsx(v,{htmlFor:"upload-logo-kelompok",children:s.jsx(y,{size:32,color:"white",className:"-mt-[1px] cursor-pointer absolute bottom-1 right-1 bg-primary border rounded-full p-1"})}),s.jsx(g,{type:"file",onChange:e=>{const s=e.target.files[0];if(s){if(!s.type.startsWith("image"))return r({title:"Invalid File Type",description:"Tolong pilih file gambar.",variant:"destructive"}),d(null),I("logo_kelompok",null),void K("");if(s.size>2048e3)return r({title:"File Too Large",description:"Pilih foto yang berukuran dibawah 2MB.",variant:"destructive"}),d(null),I("logo_kelompok",null),void K("");d(s),K(URL.createObjectURL(s)),I("logo_kelompok",s)}else d(null),I("logo_kelompok",null),K("")},accept:"image/*",className:"hidden",id:"upload-logo-kelompok"})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx(v,{htmlFor:"nama-kelompok",className:"text-left",children:"Nama Kelompok"}),s.jsx(g,{id:"nama-kelompok",value:F.nama_kelompok,onChange:e=>I("nama_kelompok",e.target.value),placeholder:"Nama Kelompok Anda",className:"mt-1"})]})]}),s.jsxs(k,{children:[s.jsx(f,{asChild:!0,children:s.jsx(m,{variant:"outline",children:"Batalkan"})}),s.jsx(f,{asChild:!0,children:s.jsx(m,{type:"submit",onClick:()=>{M(route("dashboard.kelompok.update"))},children:"Simpan"})})]})]})]})]}),s.jsxs("div",{className:"flex max-w-sm gap-2",children:[s.jsxs("div",{className:"w-full px-2 py-3 border-2 rounded-md",children:[s.jsx("h2",{className:"font-bold",children:"Daplok"}),s.jsxs("div",{className:"mt-5",children:[s.jsx("p",{className:"text-lg font-bold",children:null==E?void 0:E.daplok.name}),s.jsx("p",{className:"font-semibold",children:null==E?void 0:E.daplok.prodi.nama_prodi})]})]}),s.jsxs("div",{className:"w-full px-2 py-3 border-2 rounded-md",children:[s.jsx("h2",{className:"font-bold",children:"Mentor"}),s.jsxs("div",{className:"mt-5",children:[s.jsx("p",{className:"text-lg font-bold",children:null==E?void 0:E.mentor.name}),s.jsx("p",{className:"font-semibold",children:null==E?void 0:E.mentor.prodi.nama_prodi})]})]})]}),s.jsxs("div",{className:"flex flex-col items-center justify-center max-w-sm px-10 py-5 border-2 rounded-md",children:[s.jsx("h2",{className:"font-semibold",children:"Absensi Maba"}),s.jsx(m,{className:"mt-3",children:"Mulai Absen Maba"})]}),s.jsx(C,{})]}),s.jsx(N,{})]})}export{E as default};
