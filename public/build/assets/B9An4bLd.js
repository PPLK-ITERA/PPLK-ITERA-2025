import{G as a,r as e,j as s,S as i}from"./BKWIV8y9.js";import{B as l,C as t}from"./wbhqm9Kd.js";import{D as r}from"./D6VpsmEl.js";import{B as n,b as d}from"./B84iNFE3.js";import{I as o}from"./C5isKG_T.js";import{L as c}from"./B_-FjWi3.js";import{S as u,a as m,b as h,c as j,f as p,d as g,e as x}from"./2BFaGImb.js";import{t as k}from"./ChrlaxVJ.js";import{T as f}from"./D0ERKESj.js";import{D as N,f as v,a as T,b,c as w,d as _,g as S,e as y}from"./D4zlDK6g.js";import{D as C}from"./CMkRiO3Q.js";import{S as E}from"./AXFtsbHh.js";import{P as A,a as K,b as P,C as D,c as F,d as I,e as L,f as O}from"./CFCFMHzW.js";import{S as R,a as B}from"./DCs8Dm_v.js";import{T as G}from"./BupwQMCf.js";import{u as J}from"./DuQDRefB.js";import{a as M}from"./DLuoemJp.js";import{I as q}from"./BdJ-lrjE.js";import{C as V}from"./B_quBKWX.js";import"./D1N0levu.js";import"./Cc41DYaS.js";import"./wQXlF5xS.js";import"./DAbOw5fE.js";import"./DyOi1XHm.js";import"./PGL2GczG.js";import"./C0u18CNn.js";import"./B00V_SBm.js";import"./CBCn8Bdn.js";import"./CYGtiu2k.js";import"./DMGPquOc.js";import"./C9iB0kfi.js";import"./X-hXQqSw.js";import"./CsmqyYJy.js";import"./DPdBf6DS.js";function z(){const{data:i,setData:l,post:t,processing:r,errors:d}=a({judul:"",deskripsi:"",hari:"",tipe_link:"",kategori:"",deadline:""}),[g,x]=e.useState(null);return s.jsxs("form",{"aria-describedby":"form",className:"grid gap-4 py-4",onSubmit:a=>{a.preventDefault(),k({title:"Mohon tunggu sebentar...",description:"Sedang mengupload Tugas..."}),t(route("dashboard.tugas.addTugas"),{onError:()=>{k({title:"Uh oh! Gagal mengupload Tugas.",description:d.judul||d.deskripsi||d.hari||d.tipe_link||d.kategori||d.deadline})},onSuccess:()=>{k({title:"Berhasil!",description:"Tugas berhasil diupload."})}}),window.location.reload()},children:[s.jsxs("div",{className:"grid items-center grid-cols-4 gap-4",children:[s.jsx(c,{htmlFor:"judul",className:"text-right",children:"Judul"}),s.jsx(o,{id:"judul",name:"judul",required:!0,type:"text",value:i.judul,maxLength:255,className:"col-span-3",onChange:a=>{l("judul",a.target.value),validateJudul()}})]}),s.jsxs("div",{className:"grid items-center grid-cols-4 gap-4",children:[s.jsx(c,{htmlFor:"deskripsi",className:"text-right",children:"Deskripsi"}),s.jsx(f,{id:"deskripsi",name:"deskripsi",required:!0,type:"text",value:i.deskripsi,maxLength:255,className:"col-span-3",onChange:a=>l("deskripsi",a.target.value)})]}),s.jsxs("div",{className:"grid items-center grid-cols-4 gap-4",children:[s.jsx(c,{htmlFor:"hari",className:"text-right",children:"Hari"}),s.jsxs(u,{value:i.hari,onValueChange:a=>l("hari",a),children:[s.jsx(m,{className:"col-span-3",id:"hari",name:"hari",required:!0,children:s.jsx(h,{placeholder:"Pilih hari"})}),s.jsxs(j,{children:[s.jsx(p,{value:"0",children:"0"}),s.jsx(p,{value:"1",children:"1"}),s.jsx(p,{value:"2",children:"2"}),s.jsx(p,{value:"3",children:"3"}),s.jsx(p,{value:"4",children:"4"}),s.jsx(p,{value:"5",children:"5"})]})]})]}),s.jsxs("div",{className:"grid items-center grid-cols-4 gap-4",children:[s.jsx(c,{htmlFor:"tipe_link",className:"text-right",children:"Tipe Link"}),s.jsxs(u,{value:i.tipe_link,onValueChange:a=>l("tipe_link",a),children:[s.jsx(m,{className:"col-span-3",id:"tipe_link",name:"tipe_link",required:!0,children:s.jsx(h,{placeholder:"Pilih tipe link"})}),s.jsxs(j,{children:[s.jsx(p,{value:"instagram",children:"Instagram"}),s.jsx(p,{value:"tiktok",children:"TikTok"}),s.jsx(p,{value:"drive",children:"Google Drive"}),s.jsx(p,{value:"linkedin",children:"LinkedIn"})]})]})]}),s.jsxs("div",{className:"grid items-center grid-cols-4 gap-4",children:[s.jsx(c,{htmlFor:"kategori",className:"text-right",children:"Kategori"}),s.jsxs(u,{value:i.kategori,onValueChange:a=>l("kategori",a),children:[s.jsx(m,{className:"col-span-3",id:"kategori",name:"kategori",required:!0,children:s.jsx(h,{placeholder:"Pilih kategori"})}),s.jsxs(j,{children:[s.jsx(p,{value:"individu",children:"Individu"}),s.jsx(p,{value:"kelompok",children:"Kelompok"})]})]})]}),s.jsxs("div",{className:"grid items-center grid-cols-4 gap-4",children:[s.jsx(c,{htmlFor:"deadline",className:"text-right",children:"Deadline"}),s.jsx(o,{id:"deadline",name:"deadline",required:!0,type:"date",value:i.deadline,className:"col-span-3",onChange:a=>l("deadline",a.target.value),min:(new Date).toISOString().split("T")[0]})]}),s.jsxs("div",{className:"place-content-center flex items-center justify-between gap-4 mt-4 text-right",children:[!!g&&s.jsx("p",{className:"text-sm text-red-500",children:g}),s.jsx(n,{size:"sm",type:"submit",className:"w-full bg-[#BE3F00]",disabled:!!g||r,children:"Tambahkan Tugas"})]})]})}const H=({data:e})=>{const{setData:i,put:l}=a({id:0,catatan:"",_method:"put"});return s.jsx(s.Fragment,{children:s.jsxs("div",{className:"flex gap-1 p-2",children:[s.jsx("a",{href:`${e.tugas.jawaban??"#"}`,className:`${d({size:"sm"})}`,children:"Lihat Tugas"}),s.jsxs(N,{children:[e.tugas.isReturn?null:s.jsx(v,{asChild:!0,children:s.jsx(n,{className:"gap-2",variant:"outline",size:"sm",onClick:()=>i("id",e.tugas.id),children:"Kembalikan Tugas"})}),s.jsxs(T,{className:"sm:max-w-[425px]",children:[s.jsxs(b,{children:[s.jsx(w,{children:"Kembalikan Tugas"}),s.jsx(_,{children:"Kembalikan tugas yang sudah dikerjakan oleh mahasiswa ini agar diperbaiki"})]}),s.jsx("div",{className:"grid gap-4 py-4",children:s.jsxs("div",{className:"flex flex-col",children:[s.jsx(c,{htmlFor:"catatan",className:"text-left",children:"Catatan"}),s.jsx(f,{id:"catatan",onChange:a=>i("catatan",a.target.value),placeholder:"Berikan catatan pengembalian tugas",className:"mt-1"})]})}),s.jsxs(S,{children:[s.jsx(y,{asChild:!0,children:s.jsx(n,{variant:"outline",children:"Batalkan"})}),s.jsx(y,{asChild:!0,children:s.jsx(n,{onClick:()=>{l(route("dashboard.tugas.return"))},children:"Lanjutkan"})})]})]})]})]})})},$=[{id:"no",header:"No",cell:({row:a})=>a.index+1},{id:"name",accessorKey:"user.name",header:"Nama",cell:({row:a})=>a.original.user.name},{id:"judul",accessorKey:"tugas.judul",header:"Nama Tugas",cell:({row:a})=>a.original.tugas.judul},{id:"nama_kelompok",accessorKey:"user.nama_kelompok",header:"Kelompok",cell:({row:a})=>a.original.user.nama_kelompok},{id:"status",accessorKey:"tugas.status",header:"Status",cell:({row:a})=>a.original.status},{id:"catatan",accessorKey:"tugas.catatan",header:"Catatan",cell:({row:a})=>a.original.tugas.catatan},{id:"actions",header:"Aksi",cell:({row:a})=>s.jsx(H,{data:a.original})}],W=({tugas_id:a,no_kelompok:i,status:l})=>{const[t,r]=e.useState({status:l||null,no_kelompok:i||null,tugas_id:a});e.useEffect((()=>{(t.no_kelompok||t.status||t.tugas_id)&&(async()=>{const a=route("dashboard.tugas.data",{no_kelompok:t.no_kelompok??0,status:t.status??0,tugas_id:t.tugas_id});console.log("Fetching data for:",a)})()}),[t]);return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx(n,{onClick:()=>{r({tugas_id:a,no_kelompok:i||null,status:l||null})},children:"Terapkan"}),s.jsx(n,{onClick:()=>{window.location.reload()},variant:"outline",children:"Reset Filter"})]}),s.jsx(E,{}),s.jsx(C,{searchKey:"Nama, Nim, Email",columns:$,apiEndpoint:route("dashboard.tugas.data",{tugas_id:t.tugas_id,no_kelompok:t.no_kelompok??0,status:t.status??0}),title:"Pengumpulan Tugas",description:"Daftar pengumpulan tugas oleh kelompok."})]})},U=[{title:"Ellysion Panel",link:"/dashboard"},{title:"Pengumpulan Tugas",link:"/dashboard/pengumpulan-tugas"}];function X({auth:a,response:d}){const o=a.user;J();const[k,f]=e.useState(!1),[_,S]=e.useState(""),[y,C]=e.useState(""),[E,H]=e.useState(""),[$,X]=e.useState(""),[Y,Z]=e.useState([]),[Q,aa]=e.useState([]),[ea,sa]=e.useState(!1),[ia,la]=e.useState(null);e.useEffect((()=>{(async()=>{try{const a=await fetch(route("dashboard.user.data.kelompok"),{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);const e=await a.json();Z(e)}catch(a){console.error("Error fetching kelompok data:",a)}})(),(async()=>{sa(!0),la(null);try{const a=await fetch(route("dashboard.tugas.data.judulTugas"),{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);const e=await a.json(),s=e.response?.data||e.data||e;aa(s),s&&s.length>0&&(C(s[0].id.toString()),H(s[0].id))}catch(a){console.error("Error fetching tugas data:",a),la("Gagal mengambil data tugas dari server");const e=[{id:1,judul:"DIRETRA"},{id:2,judul:"HARTATERA"},{id:3,judul:"COOLIN"},{id:4,judul:"GARTA MATERA"},{id:5,judul:"PORTAL DILOGI"},{id:6,judul:"REKASITERA"},{id:7,judul:"MOTLET CAKRAWALA"}];aa(e),C(e[0].id.toString()),H(e[0].id)}finally{sa(!1)}})()}),[]);const ta=a=>{S(a===_?"":a),f(!1)};return s.jsxs(s.Fragment,{children:[s.jsx(i,{title:"Pengumpulan Tugas"}),s.jsxs(r,{user:a.user,children:[s.jsx(l,{items:U}),s.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Pengumpulan Tugas"}),7==o.role_id||3==o.role_id?s.jsx("div",{className:"place-content-start flex w-full",children:s.jsxs(N,{children:[s.jsx(v,{asChild:!0,children:s.jsxs(n,{children:[s.jsx(q,{size:18}),s.jsx("span",{children:"Buat Tugas"})]})}),s.jsxs(T,{children:[s.jsx(b,{children:s.jsx(w,{children:"Buat Tugas"})}),s.jsx(z,{})]})]})}):null,s.jsx("h2",{children:"Filter berdasarkan..."}),ia&&s.jsx("div",{className:"p-4 mb-4 text-red-700 bg-red-100 border border-red-300 rounded",children:ia}),s.jsxs("div",{className:"md:flex-row md:items-center flex flex-col items-start gap-1",children:[s.jsxs("div",{className:"grow w-full",children:[s.jsx(c,{className:"ml-[1px]",children:"Nama Tugas"}),s.jsxs(u,{onValueChange:a=>{C(a),H(parseInt(a))},value:y,disabled:ea,children:[s.jsx(m,{className:"w-full font-bold",children:s.jsx(h,{placeholder:ea?"Memuat...":"Pilih nama tugas"})}),s.jsx(j,{children:s.jsxs(g,{children:[s.jsx(x,{children:"Nama Tugas"}),Q.map((a=>s.jsx(p,{value:a.id.toString(),children:a.judul},a.id)))]})})]})]}),s.jsxs("div",{className:"grow w-full",children:[s.jsx(c,{className:"ml-[1px]",children:"Nama Kelompok"}),s.jsxs(A,{open:k,onOpenChange:f,children:[s.jsx(K,{asChild:!0,children:s.jsxs(n,{variant:"outline",role:"combobox","aria-expanded":k,className:"justify-between w-full font-normal shadow-none",size:"sm",children:[_?Y.find((a=>JSON.stringify(a.id)===_))?.no_kelompok+" - "+Y.find((a=>JSON.stringify(a.id)===_))?.nama_kelompok:"Pilih Kelompok",s.jsx(t,{className:"shrink-0 w-4 h-4 ml-2 opacity-50"})]})}),s.jsx(P,{children:s.jsxs(D,{children:[s.jsx(F,{placeholder:"Cari Kelompok...",className:"h-9"}),s.jsx(I,{children:"Data kelompok tidak ada."}),s.jsx(L,{children:s.jsxs(R,{className:"h-[calc(50vh-64px)]",children:[Y.length>0?Y.map(((a,e)=>s.jsxs(O,{value:JSON.stringify(a.id),onSelect:ta,children:[a.no_kelompok," - ",a.nama_kelompok,s.jsx(V,{className:M("ml-auto h-4 w-4",_===JSON.stringify(a.id)?"opacity-100":"opacity-0")})]},e))):null,s.jsx(B,{orientation:"vertical"})]})})]})})]})]}),s.jsxs("div",{className:"grow w-full",children:[s.jsx(c,{className:"ml-[1px]",children:"Status Pengumpulan"}),s.jsxs(u,{onValueChange:a=>{X(a)},value:$,children:[s.jsx(m,{className:"w-full font-bold",children:s.jsx(h,{placeholder:"Pilih status pengumpulan"})}),s.jsx(j,{children:s.jsxs(g,{children:[s.jsx(x,{children:"Status Pengumpulan"}),s.jsx(p,{value:"1",children:"Sudah Mengumpulkan"}),s.jsx(p,{value:"2",children:"Telat Mengumpulkan"}),s.jsx(p,{value:"3",children:"Dikembalikan"}),s.jsx(p,{value:"4",children:"Belum Mengumpulkan"})]})})]})]})]}),s.jsx(W,{tugas_id:"number"==typeof E?E:0,no_kelompok:_?parseInt(JSON.parse(_)):0,status:$?parseInt($):0})]}),s.jsx(G,{})]})}export{X as default};
